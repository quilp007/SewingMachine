cscope 15 $HOME/work/SewingMachine/SewingMachine_github/SewingMachine/Core               0000205725
	@Inc/dwt_stm32_delay.h

1 #ide
DWT_STM32_DELAY_H


2 
	#DWT_STM32_DELAY_H


	)

4 #ifde
__lulus


9 
	~"m32f4xx_h.h
"

17 
ut32_t
 
DWT_Day_In
();

25 
__STATIC_INLINE
 
DWT_Day_us
(vީ
ut32_t
 
miocds
)

27 
ut32_t
 
k_cye_t
 = 
DWT
->
CYCCNT
;

30 
miocds
 *(
HAL_RCC_GHCLKFq
() / 1000000);

33 (
DWT
->
CYCCNT
 - 
k_cye_t
< 
miocds
);

37 #ifde
__lulus


	@Inc/main.h

23 #ide
__MAIN_H


24 
	#__MAIN_H


	)

26 #ifde
__lulus


31 
	~"m32f4xx_h.h
"

40 
ADC_HdTyDef
 
hadc1
;

42 
I2C_HdTyDef
 
hi2c1
;

44 
RTC_HdTyDef
 
hc
;

46 
SPI_HdTyDef
 
hi2
;

47 
SPI_HdTyDef
 
hi3
;

49 
TIM_HdTyDef
 
htim2
;

50 
TIM_HdTyDef
 
htim3
;

51 
TIM_HdTyDef
 
htim4
;

52 
TIM_HdTyDef
 
htim8
;

54 
UART_HdTyDef
 
hut4
;

55 
UART_HdTyDef
 
hut1
;

56 
UART_HdTyDef
 
hut2
;

57 
UART_HdTyDef
 
hut3
;

70 
HAL_TIM_MPoIn
(
TIM_HdTyDef
 *
htim
);

73 
E_Hdr
();

80 
	#__DEBUG__


	)

87 
	#ROE_A
 
GPIO_PIN_5


	)

89 
	#RC_PULSE1
 
GPIO_PIN_6


	)

91 
	#UART2_RW
 
GPIO_PIN_8


	)

94 
	#SYS_RUN
 
GPIO_PIN_11


	)

95 
	#EEP_WP
 
GPIO_PIN_12


	)

100 
	#UART2_READ
 
	`HAL_GPIO_WreP
(
GPIOA
, 
UART2_RW
, 
GPIO_PIN_RESET
)

	)

101 
	#UART2_WRITE
 
	`HAL_GPIO_WreP
(
GPIOA
, 
UART2_RW
, 
GPIO_PIN_SET
)

	)

103 
	#LED_RUN_ON
 
	`HAL_GPIO_WreP
(
GPIOA
, 
SYS_RUN
, 
GPIO_PIN_RESET
)

	)

104 
	#LED_RUN_OFF
 
	`HAL_GPIO_WreP
(
GPIOA
, 
SYS_RUN
, 
GPIO_PIN_SET
)

	)

105 
	#LED_RUN_TOG
 
	`HAL_GPIO_ToggP
(
GPIOA
, 
SYS_RUN
)

	)

107 
	#EEP_WRITE
 
	`HAL_GPIO_WreP
(
GPIOA
, 
EEP_WP
, 
GPIO_PIN_SET
)

	)

108 
	#EEP_PROTECT
 
	`HAL_GPIO_WreP
(
GPIOA
, 
EEP_WP
, 
GPIO_PIN_RESET
)

	)

113 
	#OUT_CLK1
 
GPIO_PIN_0


	)

114 
	#OUT_CLK2
 
GPIO_PIN_1


	)

115 
	#OUT_CLK3
 
GPIO_PIN_2


	)

116 
	#ROE_B
 
GPIO_PIN_3


	)

117 
	#OUT_CLK4
 
GPIO_PIN_4


	)

118 
	#OUT_CLK5
 
GPIO_PIN_5


	)

121 
	#OUT_CLK7
 
GPIO_PIN_8


	)

122 
	#OUT_CLK8
 
GPIO_PIN_9


	)

125 
	#OUT_CLK6
 
GPIO_PIN_12


	)

127 
	#IN_CLK
 
GPIO_PIN_14


	)

130 
	#OUT_CLK1_HIGH
 
	`HAL_GPIO_WreP
(
GPIOB
, 
GPIO_PIN_0
, 
GPIO_PIN_SET
)

	)

131 
	#OUT_CLK1_LOW
 
	`HAL_GPIO_WreP
(
GPIOB
, 
GPIO_PIN_0
, 
GPIO_PIN_RESET
)

	)

133 
	#OUT_CLK2_HIGH
 
	`HAL_GPIO_WreP
(
GPIOB
, 
GPIO_PIN_1
, 
GPIO_PIN_SET
)

	)

134 
	#OUT_CLK2_LOW
 
	`HAL_GPIO_WreP
(
GPIOB
, 
GPIO_PIN_1
, 
GPIO_PIN_RESET
)

	)

136 
	#OUT_CLK3_HIGH
 
	`HAL_GPIO_WreP
(
GPIOB
, 
GPIO_PIN_2
, 
GPIO_PIN_SET
)

	)

137 
	#OUT_CLK3_LOW
 
	`HAL_GPIO_WreP
(
GPIOB
, 
GPIO_PIN_2
, 
GPIO_PIN_RESET
)

	)

139 
	#OUT_CLK4_HIGH
 
	`HAL_GPIO_WreP
(
GPIOB
, 
GPIO_PIN_4
, 
GPIO_PIN_SET
)

	)

140 
	#OUT_CLK4_LOW
 
	`HAL_GPIO_WreP
(
GPIOB
, 
GPIO_PIN_4
, 
GPIO_PIN_RESET
)

	)

142 
	#OUT_CLK5_HIGH
 
	`HAL_GPIO_WreP
(
GPIOB
, 
GPIO_PIN_5
, 
GPIO_PIN_SET
)

	)

143 
	#OUT_CLK5_LOW
 
	`HAL_GPIO_WreP
(
GPIOB
, 
GPIO_PIN_5
, 
GPIO_PIN_RESET
)

	)

145 
	#OUT_CLK6_HIGH
 
	`HAL_GPIO_WreP
(
GPIOB
, 
GPIO_PIN_8
, 
GPIO_PIN_SET
)

	)

146 
	#OUT_CLK6_LOW
 
	`HAL_GPIO_WreP
(
GPIOB
, 
GPIO_PIN_8
, 
GPIO_PIN_RESET
)

	)

148 
	#OUT_CLK7_HIGH
 
	`HAL_GPIO_WreP
(
GPIOB
, 
GPIO_PIN_9
, 
GPIO_PIN_SET
)

	)

149 
	#OUT_CLK7_LOW
 
	`HAL_GPIO_WreP
(
GPIOB
, 
GPIO_PIN_9
, 
GPIO_PIN_RESET
)

	)

151 
	#OUT_CLK8_HIGH
 
	`HAL_GPIO_WreP
(
GPIOB
, 
GPIO_PIN_12
, 
GPIO_PIN_SET
)

	)

152 
	#OUT_CLK8_LOW
 
	`HAL_GPIO_WreP
(
GPIOB
, 
GPIO_PIN_12
, 
GPIO_PIN_RESET
)

	)

154 
	#IN_CLK_HIGH
 
	`HAL_GPIO_WreP
(
GPIOB
, 
GPIO_PIN_12
, 
GPIO_PIN_SET
)

	)

155 
	#IN_CLK_LOW
 
	`HAL_GPIO_WreP
(
GPIOB
, 
GPIO_PIN_12
, 
GPIO_PIN_RESET
)

	)

159 
	#IN_EN1
 
GPIO_PIN_0


	)

160 
	#IN_EN2
 
GPIO_PIN_1


	)

162 
	#IN_EN3
 
GPIO_PIN_3


	)

163 
	#IN_EN4
 
GPIO_PIN_4


	)

164 
	#IN_EN5
 
GPIO_PIN_5


	)

165 
	#RC_PULSE2
 
GPIO_PIN_6


	)

166 
	#IN_EN7
 
GPIO_PIN_7


	)

167 
	#IN_EN8
 
GPIO_PIN_8


	)

168 
	#UART1_RW
 
GPIO_PIN_9


	)

172 
	#IN_EN6
 
GPIO_PIN_13


175 

	)

176 
	#IN_EN1_HIGH
 
	`HAL_GPIO_WreP
(
GPIOC
, 
IN_EN1
, 
GPIO_PIN_SET
)

	)

177 
	#IN_EN1_LOW
 
	`HAL_GPIO_WreP
(
GPIOC
, 
IN_EN1
, 
GPIO_PIN_RESET
)

	)

179 
	#IN_EN2_HIGH
 
	`HAL_GPIO_WreP
(
GPIOC
, 
IN_EN2
, 
GPIO_PIN_SET
)

	)

180 
	#IN_EN2_LOW
 
	`HAL_GPIO_WreP
(
GPIOC
, 
IN_EN2
, 
GPIO_PIN_RESET
)

	)

182 
	#IN_EN3_HIGH
 
	`HAL_GPIO_WreP
(
GPIOC
, 
IN_EN3
, 
GPIO_PIN_SET
)

	)

183 
	#IN_EN3_LOW
 
	`HAL_GPIO_WreP
(
GPIOC
, 
IN_EN3
, 
GPIO_PIN_RESET
)

	)

185 
	#IN_EN4_HIGH
 
	`HAL_GPIO_WreP
(
GPIOC
, 
IN_EN4
, 
GPIO_PIN_SET
)

	)

186 
	#IN_EN4_LOW
 
	`HAL_GPIO_WreP
(
GPIOC
, 
IN_EN4
, 
GPIO_PIN_RESET
)

	)

188 
	#IN_EN5_HIGH
 
	`HAL_GPIO_WreP
(
GPIOC
, 
IN_EN5
, 
GPIO_PIN_SET
)

	)

189 
	#IN_EN5_LOW
 
	`HAL_GPIO_WreP
(
GPIOC
, 
IN_EN5
, 
GPIO_PIN_RESET
)

	)

191 
	#IN_EN6_HIGH
 
	`HAL_GPIO_WreP
(
GPIOC
, 
IN_EN6
, 
GPIO_PIN_SET
)

	)

192 
	#IN_EN6_LOW
 
	`HAL_GPIO_WreP
(
GPIOC
, 
IN_EN6
, 
GPIO_PIN_RESET
)

	)

194 
	#IN_EN7_HIGH
 
	`HAL_GPIO_WreP
(
GPIOC
, 
IN_EN7
, 
GPIO_PIN_SET
)

	)

195 
	#IN_EN7_LOW
 
	`HAL_GPIO_WreP
(
GPIOC
, 
IN_EN7
, 
GPIO_PIN_RESET
)

	)

197 
	#IN_EN8_HIGH
 
	`HAL_GPIO_WreP
(
GPIOC
, 
IN_EN8
, 
GPIO_PIN_SET
)

	)

198 
	#IN_EN8_LOW
 
	`HAL_GPIO_WreP
(
GPIOC
, 
IN_EN8
, 
GPIO_PIN_RESET
)

	)

200 
	#UART1_READ
 
	`HAL_GPIO_WreP
(
GPIOC
, 
UART1_RW
, 
GPIO_PIN_RESET
)

	)

201 
	#UART1_WRITE
 
	`HAL_GPIO_WreP
(
GPIOC
, 
UART1_RW
, 
GPIO_PIN_SET
)

	)

206 
	#SV_PULSE1_IN
 
GPIO_PIN_0


	)

208 
	#SV_PULSE2_IN
 
GPIO_PIN_1


	)

210 
	#SV_PULSE3_IN
 
GPIO_PIN_2


	)

212 
	#SV_PULSE4_IN
 
GPIO_PIN_3


	)

214 
	#ID_D0
 
GPIO_PIN_4


	)

215 
	#ID_D1
 
GPIO_PIN_5


	)

216 
	#ID_D2
 
GPIO_PIN_6


	)

217 
	#ID_D3
 
GPIO_PIN_7


	)

218 
	#SV_SIGN1
 
GPIO_PIN_8


	)

219 
	#SV_SIGN2
 
GPIO_PIN_9


	)

220 
	#SV_SIGN3
 
GPIO_PIN_10


	)

221 
	#SV_SIGN4
 
GPIO_PIN_11


	)

222 
	#SV_PULSE1
 
GPIO_PIN_12


	)

223 
	#SV_PULSE2
 
GPIO_PIN_13


	)

224 
	#SV_PULSE3
 
GPIO_PIN_14


	)

225 
	#SV_PULSE4
 
GPIO_PIN_15


	)

227 
	#SV1_DIR_CW
 
	`HAL_GPIO_WreP
(
GPIOD
,
SV_SIGN1
,
GPIO_PIN_SET
)

	)

228 
	#SV1_DIR_CCW
 
	`HAL_GPIO_WreP
(
GPIOD
,
SV_SIGN1
,
GPIO_PIN_RESET
)

	)

230 
	#SV2_DIR_CW
 
	`HAL_GPIO_WreP
(
GPIOD
,
SV_SIGN2
,
GPIO_PIN_SET
)

	)

231 
	#SV2_DIR_CCW
 
	`HAL_GPIO_WreP
(
GPIOD
,
SV_SIGN2
,
GPIO_PIN_RESET
)

	)

233 
	#SV3_DIR_CW
 
	`HAL_GPIO_WreP
(
GPIOD
,
SV_SIGN3
,
GPIO_PIN_SET
)

	)

234 
	#SV3_DIR_CCW
 
	`HAL_GPIO_WreP
(
GPIOD
,
SV_SIGN3
,
GPIO_PIN_RESET
)

	)

236 
	#SV4_DIR_CW
 
	`HAL_GPIO_WreP
(
GPIOD
,
SV_SIGN4
,
GPIO_PIN_SET
)

	)

237 
	#SV4_DIR_CCW
 
	`HAL_GPIO_WreP
(
GPIOD
,
SV_SIGN4
,
GPIO_PIN_RESET
)

	)

242 
	#IN0
 
GPIO_PIN_0


	)

243 
	#IN1
 
GPIO_PIN_1


	)

244 
	#IN2
 
GPIO_PIN_2


	)

245 
	#IN3
 
GPIO_PIN_3


	)

246 
	#IN4
 
GPIO_PIN_4


	)

247 
	#IN5
 
GPIO_PIN_5


	)

248 
	#IN6
 
GPIO_PIN_6


	)

249 
	#IN7
 
GPIO_PIN_7


	)

250 
	#OUT0
 
GPIO_PIN_8


	)

251 
	#OUT1
 
GPIO_PIN_9


	)

252 
	#OUT2
 
GPIO_PIN_10


	)

253 
	#OUT3
 
GPIO_PIN_11


	)

254 
	#OUT4
 
GPIO_PIN_12


	)

255 
	#OUT5
 
GPIO_PIN_13


	)

256 
	#OUT6
 
GPIO_PIN_14


	)

257 
	#OUT7
 
GPIO_PIN_15


	)

260 
	#SV_ON
 
OUT0


	)

261 
	#ALRM_RST
 
OUT1


	)

262 
	#EMG_STOP
 
OUT2


	)

263 
	#CNT_CLR
 
OUT3


	)

264 
	#MODE_SEL0
 
OUT4


	)

265 
	#MODE_SEL1
 
OUT5


	)

266 
	#CW_LIM
 
OUT6


	)

267 
	#CCW_LIM
 
OUT7


	)

270 
	#OUTPUT1
 
OUT0


	)

271 
	#OUTPUT2
 
OUT1


	)

272 
	#OUTPUT3
 
OUT2


	)

273 
	#OUTPUT4
 
OUT3


	)

274 
	#OUTPUT5
 
OUT4


	)

275 
	#OUTPUT6
 
OUT5


	)

276 
	#OUTPUT7
 
OUT6


	)

277 
	#OUTPUT8
 
OUT7


	)

280 
	#OUTPUT9
 
OUT0


	)

281 
	#OUTPUT10
 
OUT1


	)

282 
	#OUTPUT11
 
OUT2


	)

283 
	#OUTPUT12
 
OUT3


	)

284 
	#OUTPUT13
 
OUT4


	)

285 
	#OUTPUT14
 
OUT5


	)

286 
	#OUTPUT15
 
OUT6


	)

287 
	#OUTPUT16
 
OUT7


	)

290 
	#OUTPUT17
 
OUT0


	)

291 
	#OUTPUT18
 
OUT1


	)

292 
	#OUTPUT19
 
OUT2


	)

293 
	#OUTPUT20
 
OUT3


	)

294 
	#OUTPUT21
 
OUT4


	)

295 
	#OUTPUT22
 
OUT5


	)

296 
	#OUTPUT23
 
OUT6


	)

297 
	#OUTPUT24
 
OUT7


	)

300 
	#OUTPUT25
 
OUT0


	)

301 
	#OUTPUT26
 
OUT1


	)

302 
	#R_OUTPUT1
 
OUT2


	)

303 
	#R_OUTPUT2
 
OUT3


	)

304 
	#R_OUTPUT3
 
OUT4


	)

305 
	#R_OUTPUT4
 
OUT5


	)

306 
	#R_OUTPUT5
 
OUT6


	)

307 
	#R_OUTPUT6
 
OUT7


	)

310 
	#CLAMP1_CNT
 
OUTPUT1


311 
	#CLAMP2_CNT
 
OUTPUT2


312 
	#CLAMP3_CNT
 
OUTPUT3


313 
	#CLAMP4_CNT
 
OUTPUT4


314 
	#VACCUM_CNT
 
OUTPUT5


315 
	#RES_OUTPUT6
 
OUTPUT6


	)

316 
	#RES_OUTPUT7
 
OUTPUT7


	)

317 
	#BAND_CUT_HEAT
 
OUTPUT8


318 
	#RES_OUTPUT9
 
OUTPUT9


	)

319 
	#RES_OUTPUT10
 
OUTPUT10


	)

320 
	#TL_R
 
OUTPUT11


321 
	#TL_G
 
OUTPUT12


322 
	#TL_Y
 
OUTPUT13


323 
	#RES_OUTPUT14
 
OUTPUT14


	)

324 
	#RES_OUTPUT15
 
OUTPUT15


	)

325 
	#RES_OUTPUT16
 
OUTPUT16


	)

326 
	#RES_OUTPUT17
 
OUTPUT17


	)

327 
	#RES_OUTPUT18
 
OUTPUT18


	)

328 
	#RES_OUTPUT19
 
OUTPUT19


	)

329 
	#RES_OUTPUT20
 
OUTPUT20


	)

330 
	#RES_OUTPUT21
 
OUTPUT21


	)

331 
	#RES_OUTPUT22
 
OUTPUT22


	)

332 
	#RES_OUTPUT23
 
OUTPUT23


	)

333 
	#RES_OUTPUT24
 
OUTPUT24


	)

334 
	#RES_OUTPUT25
 
OUTPUT25


	)

335 
	#RES_OUTPUT26
 
OUTPUT26


	)

338 
	#SV_ALRM
 
IN0


	)

339 
	#SV_HOME
 
IN1


	)

340 
	#SV_RDY
 
IN2


	)

341 
	#ZERO_SPD
 
IN3


	)

342 
	#T_POS
 
IN4


	)

345 
	#SW_IN1
 
IN5


346 
	#SW_IN2
 
IN6


347 
	#SW_IN3
 
IN7


348 

	)

350 
	#SW_IN4
 
IN5


351 
	#SW_IN5
 
IN6


352 
	#SW_IN6
 
IN7


353 

	)

355 
	#SW_IN7
 
IN5


356 
	#SW_IN8
 
IN6


357 
	#SW_IN9
 
IN7


358 

	)

360 
	#SW_IN10
 
IN5


361 
	#SW_IN11
 
IN6


362 
	#SW_IN12
 
IN7


363 

	)

365 
	#INPUT1
 
IN0


	)

366 
	#INPUT2
 
IN1


	)

367 
	#INPUT3
 
IN2


	)

368 
	#INPUT4
 
IN3


	)

369 
	#INPUT5
 
IN4


	)

370 
	#INPUT6
 
IN5


	)

371 
	#INPUT7
 
IN6


	)

372 
	#INPUT8
 
IN7


	)

375 
	#INPUT9
 
IN0


	)

376 
	#INPUT10
 
IN1


	)

377 
	#INPUT11
 
IN2


	)

378 
	#INPUT12
 
IN3


	)

379 
	#INPUT13
 
IN4


	)

380 
	#INPUT14
 
IN5


	)

381 
	#INPUT15
 
IN6


	)

382 
	#INPUT16
 
IN7


	)

385 
	#INPUT17
 
IN0


	)

386 
	#INPUT18
 
IN1


	)

387 
	#INPUT19
 
IN2


	)

388 
	#INPUT20
 
IN3


	)

389 
	#INPUT21
 
IN4


	)

390 
	#INPUT22
 
IN5


	)

391 
	#INPUT23
 
IN6


	)

392 
	#INPUT24
 
IN7


	)

395 
	#INPUT25
 
IN0


	)

396 
	#INPUT26
 
IN1


	)

397 
	#INPUT27
 
IN2


	)

398 
	#INPUT28
 
IN3


	)

399 
	#INPUT29
 
IN4


	)

400 
	#INPUT30
 
IN5


	)

401 
	#INPUT31
 
IN6


	)

402 
	#INPUT32
 
IN7


	)

406 
	#SW_EMS
 
INPUT1


407 
	#SW_AUTO_MANUAL
 
INPUT2


408 
	#SEN_LIFTING_UP_LIM
 
INPUT3


409 
	#SEN_LIFTING_DN_LIM
 
INPUT4


410 
	#SEN_LIFTING_HOME
 
INPUT5


411 
	#SEN_NEEDLE_HOME
 
INPUT6


412 
	#SEN_BAND_EMPTY1
 
INPUT7


413 
	#SEN_BAND_EMPTY2
 
INPUT8


414 
	#SEN_BAND_LOST1
 
INPUT9


415 
	#SEN_BAND_LOST2
 
INPUT10


416 
	#SEN_UPPER_THREAD_CUT_OFF
 
INPUT11


417 
	#SEN_LOOPER_HOME
 
INPUT12


418 
	#SEN_UNDER_THREAD_CUT_OFF
 
INPUT13


419 
	#SEN_BAND_INSERT1
 
INPUT14


420 
	#SEN_BAND_INSERT2
 
INPUT15


421 
	#SEN_MOVING_FORWARD_LIM
 
INPUT16


422 
	#SEN_MOVING_BACKWARD_LIM
 
INPUT17


423 
	#SEN_MOVING_HOME
 
INPUT18


424 
	#SEN_FABRIC_DETECT1
 
INPUT19


425 
	#SEN_FABRIC_DETECT2
 
INPUT20


426 
	#SEN_CLAMP12_OPEN
 
INPUT21


427 
	#SEN_CLAMP12_CLOSE
 
INPUT22


428 
	#SEN_CLAMP34_OPEN
 
INPUT23


429 
	#SEN_CLAMP34_CLOSE
 
INPUT24


430 
	#SW_MOVING_FB
 
INPUT25


431 
	#SW_MOVING_UD
 
INPUT26


432 
	#SW_AUTO_START
 
INPUT27


433 
	#SW_AUTO_STOP
 
INPUT28


434 
	#SW_AUTO_RESET
 
INPUT29


435 
	#SW_TEST_SEWING
 
INPUT30


436 
	#SW_NEEDLE_HOME
 
INPUT31


437 
	#SW_LOOPER_HOME
 
INPUT32


438 
	#SW_MOVING_HOME
 
SW_IN1


439 
	#SW_UD_HOME
 
SW_IN2


440 
	#SW_CLAMP1_OPEN_CLOSE
 
SW_IN3


441 
	#SW_CLAMP2_OPEN_CLOSE
 
SW_IN4


442 
	#SW_CLAMP3_OPEN_CLOSE
 
SW_IN5


443 
	#SW_CLAMP4_OPEN_CLOSE
 
SW_IN6


444 
	#SW_VACCUM_OPEN_CLOSE
 
SW_IN7


445 
	#SW_BAND_CUT
 
SW_IN8


446 
	#RES_INPUT1
 
SW_IN9


	)

447 
	#RES_INPUT2
 
SW_IN10


	)

448 
	#RES_INPUT3
 
SW_IN11


	)

449 
	#RES_INPUT4
 
SW_IN12


	)

452 
	#SEN_LIFTING_DN_LIM
 
INPUT1


453 
	#SEN_LIFTING_HOME
 
INPUT2


454 
	#SEN_BAND_EMPTY1
 
INPUT3


456 
	#SEN_MOVING_HOME
 
INPUT4


457 
	#SEN_BAND_LOST1
 
INPUT5


458 
	#SEN_BAND_LOST2
 
INPUT6


459 
	#SEN_UPPER_THREAD_CUT_OFF
 
INPUT7


460 
	#SEN_LOOPER_HOME
 
INPUT9


461 

	)

462 
	#SEN_NEEDLE_HOME
 
INPUT17


463 
	#SEN_LIFTING_UP_LIM
 
INPUT18


464 

	)

465 
	#SW_AUTO_MANUAL
 
INPUT20


466 
	#SW_AUTO_START
 
INPUT21


467 
	#SW_AUTO_STOP
 
INPUT22


468 
	#SW_AUTO_RESET
 
INPUT23


469 
	#SW_TEST_SEWING
 
INPUT24


470 
	#SW_NEEDLE_HOME
 
INPUT25


471 
	#SW_LOOPER_HOME
 
INPUT26


472 
	#SW_MOVING_HOME
 
INPUT27


473 
	#SW_UD_HOME
 
INPUT28


474 
	#SW_CLAMP1_OPEN_CLOSE
 
INPUT29


475 
	#SW_CLAMP2_OPEN_CLOSE
 
INPUT30


476 
	#SW_CLAMP3_OPEN_CLOSE
 
INPUT31


477 
	#SW_CLAMP4_OPEN_CLOSE
 
INPUT32


478 
	#SW_VACCUM_OPEN_CLOSE
 
SW_IN1


479 

	)

480 
	#SW_ROE_X
 
SW_IN8


481 
	#SW_ROE_Y
 
SW_IN9


482 
	#SW_ROE_Z
 
SW_IN10


483 
	#SW_ROE_X1
 
SW_IN11


484 
	#SW_ROE_X10
 
SW_IN12


485 

	)

496 
	#IN2_P
 
GPIO_PIN_2


	)

497 
	#IN2_GPIO_Pt
 
GPIOE


	)

498 
	#IN3_P
 
GPIO_PIN_3


	)

499 
	#IN3_GPIO_Pt
 
GPIOE


	)

500 
	#IN4_P
 
GPIO_PIN_4


	)

501 
	#IN4_GPIO_Pt
 
GPIOE


	)

502 
	#IN5_P
 
GPIO_PIN_5


	)

503 
	#IN5_GPIO_Pt
 
GPIOE


	)

504 
	#IN6_P
 
GPIO_PIN_6


	)

505 
	#IN6_GPIO_Pt
 
GPIOE


	)

506 
	#IN_CLK1_P
 
GPIO_PIN_0


	)

507 
	#IN_CLK1_GPIO_Pt
 
GPIOC


	)

508 
	#IN_CLK2_P
 
GPIO_PIN_1


	)

509 
	#IN_CLK2_GPIO_Pt
 
GPIOC


	)

510 
	#IN_CLK3_P
 
GPIO_PIN_3


	)

511 
	#IN_CLK3_GPIO_Pt
 
GPIOC


	)

512 
	#ROE_A_P
 
GPIO_PIN_5


	)

513 
	#ROE_A_GPIO_Pt
 
GPIOA


	)

514 
	#ROE_A_EXTI_IRQn
 
EXTI9_5_IRQn


	)

515 
	#RC_PULSE1_P
 
GPIO_PIN_6


	)

516 
	#RC_PULSE1_GPIO_Pt
 
GPIOA


	)

517 
	#IN_CLK4_P
 
GPIO_PIN_4


	)

518 
	#IN_CLK4_GPIO_Pt
 
GPIOC


	)

519 
	#IN_CLK5_P
 
GPIO_PIN_5


	)

520 
	#IN_CLK5_GPIO_Pt
 
GPIOC


	)

521 
	#OUT_CLK1_P
 
GPIO_PIN_0


	)

522 
	#OUT_CLK1_GPIO_Pt
 
GPIOB


	)

523 
	#OUT_CLK2_P
 
GPIO_PIN_1


	)

524 
	#OUT_CLK2_GPIO_Pt
 
GPIOB


	)

525 
	#OUT_CLK3_P
 
GPIO_PIN_2


	)

526 
	#OUT_CLK3_GPIO_Pt
 
GPIOB


	)

527 
	#IN7_P
 
GPIO_PIN_7


	)

528 
	#IN7_GPIO_Pt
 
GPIOE


	)

529 
	#OUT0_P
 
GPIO_PIN_8


	)

530 
	#OUT0_GPIO_Pt
 
GPIOE


	)

531 
	#OUT1_P
 
GPIO_PIN_9


	)

532 
	#OUT1_GPIO_Pt
 
GPIOE


	)

533 
	#OUT2_P
 
GPIO_PIN_10


	)

534 
	#OUT2_GPIO_Pt
 
GPIOE


	)

535 
	#OUT3_P
 
GPIO_PIN_11


	)

536 
	#OUT3_GPIO_Pt
 
GPIOE


	)

537 
	#OUT4_P
 
GPIO_PIN_12


	)

538 
	#OUT4_GPIO_Pt
 
GPIOE


	)

539 
	#OUT5_P
 
GPIO_PIN_13


	)

540 
	#OUT5_GPIO_Pt
 
GPIOE


	)

541 
	#OUT6_P
 
GPIO_PIN_14


	)

542 
	#OUT6_GPIO_Pt
 
GPIOE


	)

543 
	#OUT7_P
 
GPIO_PIN_15


	)

544 
	#OUT7_GPIO_Pt
 
GPIOE


	)

545 
	#OUT_CLK6_P
 
GPIO_PIN_12


	)

546 
	#OUT_CLK6_GPIO_Pt
 
GPIOB


	)

547 
	#SV_SIGN1_P
 
GPIO_PIN_8


	)

548 
	#SV_SIGN1_GPIO_Pt
 
GPIOD


	)

549 
	#SV_SIGN2_P
 
GPIO_PIN_9


	)

550 
	#SV_SIGN2_GPIO_Pt
 
GPIOD


	)

551 
	#SV_SIGN3_P
 
GPIO_PIN_10


	)

552 
	#SV_SIGN3_GPIO_Pt
 
GPIOD


	)

553 
	#SV_SIGN4_P
 
GPIO_PIN_11


	)

554 
	#SV_SIGN4_GPIO_Pt
 
GPIOD


	)

555 
	#SV_PULSE1_P
 
GPIO_PIN_12


	)

556 
	#SV_PULSE1_GPIO_Pt
 
GPIOD


	)

557 
	#SV_PULSE2_P
 
GPIO_PIN_13


	)

558 
	#SV_PULSE2_GPIO_Pt
 
GPIOD


	)

559 
	#SV_PULSE3_P
 
GPIO_PIN_14


	)

560 
	#SV_PULSE3_GPIO_Pt
 
GPIOD


	)

561 
	#SV_PULSE4_P
 
GPIO_PIN_15


	)

562 
	#SV_PULSE4_GPIO_Pt
 
GPIOD


	)

563 
	#RC_PULSE2_P
 
GPIO_PIN_6


	)

564 
	#RC_PULSE2_GPIO_Pt
 
GPIOC


	)

565 
	#IN_CLK7_P
 
GPIO_PIN_7


	)

566 
	#IN_CLK7_GPIO_Pt
 
GPIOC


	)

567 
	#IN_CLK8_P
 
GPIO_PIN_8


	)

568 
	#IN_CLK8_GPIO_Pt
 
GPIOC


	)

569 
	#UART1_RW_P
 
GPIO_PIN_9


	)

570 
	#UART1_RW_GPIO_Pt
 
GPIOC


	)

571 
	#UART2_RW_P
 
GPIO_PIN_8


	)

572 
	#UART2_RW_GPIO_Pt
 
GPIOA


	)

573 
	#SYS_RUN_P
 
GPIO_PIN_11


	)

574 
	#SYS_RUN_GPIO_Pt
 
GPIOA


	)

575 
	#EEP_WP_P
 
GPIO_PIN_12


	)

576 
	#EEP_WP_GPIO_Pt
 
GPIOA


	)

577 
	#IN_CLK6_P
 
GPIO_PIN_15


	)

578 
	#IN_CLK6_GPIO_Pt
 
GPIOA


	)

579 
	#SV_PULSE1D0_P
 
GPIO_PIN_0


	)

580 
	#SV_PULSE1D0_GPIO_Pt
 
GPIOD


	)

581 
	#SV_PULSE1D0_EXTI_IRQn
 
EXTI0_IRQn


	)

582 
	#SV_PULSE2D1_P
 
GPIO_PIN_1


	)

583 
	#SV_PULSE2D1_GPIO_Pt
 
GPIOD


	)

584 
	#SV_PULSE2D1_EXTI_IRQn
 
EXTI1_IRQn


	)

585 
	#SV_PULSE3D2_P
 
GPIO_PIN_2


	)

586 
	#SV_PULSE3D2_GPIO_Pt
 
GPIOD


	)

587 
	#SV_PULSE3D2_EXTI_IRQn
 
EXTI2_IRQn


	)

588 
	#SV_PULSE4D3_P
 
GPIO_PIN_3


	)

589 
	#SV_PULSE4D3_GPIO_Pt
 
GPIOD


	)

590 
	#SV_PULSE4D3_EXTI_IRQn
 
EXTI3_IRQn


	)

591 
	#ID_D0_P
 
GPIO_PIN_4


	)

592 
	#ID_D0_GPIO_Pt
 
GPIOD


	)

593 
	#ID_D1_P
 
GPIO_PIN_5


	)

594 
	#ID_D1_GPIO_Pt
 
GPIOD


	)

595 
	#ID_D2_P
 
GPIO_PIN_6


	)

596 
	#ID_D2_GPIO_Pt
 
GPIOD


	)

597 
	#ID_D3_P
 
GPIO_PIN_7


	)

598 
	#ID_D3_GPIO_Pt
 
GPIOD


	)

599 
	#ROE_B_P
 
GPIO_PIN_3


	)

600 
	#ROE_B_GPIO_Pt
 
GPIOB


	)

601 
	#OUT_CLK4_P
 
GPIO_PIN_4


	)

602 
	#OUT_CLK4_GPIO_Pt
 
GPIOB


	)

603 
	#OUT_CLK5_P
 
GPIO_PIN_5


	)

604 
	#OUT_CLK5_GPIO_Pt
 
GPIOB


	)

605 
	#OUT_CLK7_P
 
GPIO_PIN_8


	)

606 
	#OUT_CLK7_GPIO_Pt
 
GPIOB


	)

607 
	#OUT_CLK8_P
 
GPIO_PIN_9


	)

608 
	#OUT_CLK8_GPIO_Pt
 
GPIOB


	)

609 
	#IN0_P
 
GPIO_PIN_0


	)

610 
	#IN0_GPIO_Pt
 
GPIOE


	)

611 
	#IN1_P
 
GPIO_PIN_1


	)

612 
	#IN1_GPIO_Pt
 
GPIOE


	)

619 #ifde
__lulus


	@Inc/stm32f4xx_hal_conf.h

23 #ide
__STM32F4xx_HAL_CONF_H


24 
	#__STM32F4xx_HAL_CONF_H


	)

26 #ifde
__lulus


37 
	#HAL_MODULE_ENABLED


	)

39 
	#HAL_ADC_MODULE_ENABLED


	)

55 
	#HAL_I2C_MODULE_ENABLED


	)

60 
	#HAL_RTC_MODULE_ENABLED


	)

64 
	#HAL_SPI_MODULE_ENABLED


	)

65 
	#HAL_TIM_MODULE_ENABLED


	)

66 
	#HAL_UART_MODULE_ENABLED


	)

83 
	#HAL_GPIO_MODULE_ENABLED


	)

84 
	#HAL_EXTI_MODULE_ENABLED


	)

85 
	#HAL_DMA_MODULE_ENABLED


	)

86 
	#HAL_RCC_MODULE_ENABLED


	)

87 
	#HAL_FLASH_MODULE_ENABLED


	)

88 
	#HAL_PWR_MODULE_ENABLED


	)

89 
	#HAL_CORTEX_MODULE_ENABLED


	)

97 #i!
defed
 (
HSE_VALUE
)

98 
	#HSE_VALUE
 25000000U

	)

101 #i!
defed
 (
HSE_STARTUP_TIMEOUT
)

102 
	#HSE_STARTUP_TIMEOUT
 100U

	)

110 #i!
defed
 (
HSI_VALUE
)

111 
	#HSI_VALUE
 ((
ut32_t
)16000000U

	)

117 #i!
defed
 (
LSI_VALUE
)

118 
	#LSI_VALUE
 32000U

	)

120 
The
 

 
vue
 
may
 
vy
 
ddg
 

 
the
 
vtis


121 

 
vޏge
 
d
 
mtu
.*/

125 #i!
defed
 (
LSE_VALUE
)

126 
	#LSE_VALUE
 32768U

	)

129 #i!
defed
 (
LSE_STARTUP_TIMEOUT
)

130 
	#LSE_STARTUP_TIMEOUT
 5000U

	)

138 #i!
defed
 (
EXTERNAL_CLOCK_VALUE
)

139 
	#EXTERNAL_CLOCK_VALUE
 12288000U

	)

149 
	#VDD_VALUE
 3300U

	)

150 
	#TICK_INT_PRIORITY
 15U

	)

151 
	#USE_RTOS
 0U

	)

152 
	#PREFETCH_ENABLE
 1U

	)

153 
	#INSTRUCTION_CACHE_ENABLE
 1U

	)

154 
	#DATA_CACHE_ENABLE
 1U

	)

156 
	#USE_HAL_ADC_REGISTER_CALLBACKS
 0U

	)

157 
	#USE_HAL_CAN_REGISTER_CALLBACKS
 0U

	)

158 
	#USE_HAL_CEC_REGISTER_CALLBACKS
 0U

	)

159 
	#USE_HAL_CRYP_REGISTER_CALLBACKS
 0U

	)

160 
	#USE_HAL_DAC_REGISTER_CALLBACKS
 0U

	)

161 
	#USE_HAL_DCMI_REGISTER_CALLBACKS
 0U

	)

162 
	#USE_HAL_DFSDM_REGISTER_CALLBACKS
 0U

	)

163 
	#USE_HAL_DMA2D_REGISTER_CALLBACKS
 0U

	)

164 
	#USE_HAL_DSI_REGISTER_CALLBACKS
 0U

	)

165 
	#USE_HAL_ETH_REGISTER_CALLBACKS
 0U

	)

166 
	#USE_HAL_HASH_REGISTER_CALLBACKS
 0U

	)

167 
	#USE_HAL_HCD_REGISTER_CALLBACKS
 0U

	)

168 
	#USE_HAL_I2C_REGISTER_CALLBACKS
 0U

	)

169 
	#USE_HAL_FMPI2C_REGISTER_CALLBACKS
 0U

	)

170 
	#USE_HAL_FMPSMBUS_REGISTER_CALLBACKS
 0U

	)

171 
	#USE_HAL_I2S_REGISTER_CALLBACKS
 0U

	)

172 
	#USE_HAL_IRDA_REGISTER_CALLBACKS
 0U

	)

173 
	#USE_HAL_LPTIM_REGISTER_CALLBACKS
 0U

	)

174 
	#USE_HAL_LTDC_REGISTER_CALLBACKS
 0U

	)

175 
	#USE_HAL_MMC_REGISTER_CALLBACKS
 0U

	)

176 
	#USE_HAL_NAND_REGISTER_CALLBACKS
 0U

	)

177 
	#USE_HAL_NOR_REGISTER_CALLBACKS
 0U

	)

178 
	#USE_HAL_PCCARD_REGISTER_CALLBACKS
 0U

	)

179 
	#USE_HAL_PCD_REGISTER_CALLBACKS
 0U

	)

180 
	#USE_HAL_QSPI_REGISTER_CALLBACKS
 0U

	)

181 
	#USE_HAL_RNG_REGISTER_CALLBACKS
 0U

	)

182 
	#USE_HAL_RTC_REGISTER_CALLBACKS
 0U

	)

183 
	#USE_HAL_SAI_REGISTER_CALLBACKS
 0U

	)

184 
	#USE_HAL_SD_REGISTER_CALLBACKS
 0U

	)

185 
	#USE_HAL_SMARTCARD_REGISTER_CALLBACKS
 0U

	)

186 
	#USE_HAL_SDRAM_REGISTER_CALLBACKS
 0U

	)

187 
	#USE_HAL_SRAM_REGISTER_CALLBACKS
 0U

	)

188 
	#USE_HAL_SPDIFRX_REGISTER_CALLBACKS
 0U

	)

189 
	#USE_HAL_SMBUS_REGISTER_CALLBACKS
 0U

	)

190 
	#USE_HAL_SPI_REGISTER_CALLBACKS
 0U

	)

191 
	#USE_HAL_TIM_REGISTER_CALLBACKS
 0U

	)

192 
	#USE_HAL_UART_REGISTER_CALLBACKS
 0U

	)

193 
	#USE_HAL_USART_REGISTER_CALLBACKS
 0U

	)

194 
	#USE_HAL_WWDG_REGISTER_CALLBACKS
 0U

	)

208 
	#MAC_ADDR0
 2U

	)

209 
	#MAC_ADDR1
 0U

	)

210 
	#MAC_ADDR2
 0U

	)

211 
	#MAC_ADDR3
 0U

	)

212 
	#MAC_ADDR4
 0U

	)

213 
	#MAC_ADDR5
 0U

	)

216 
	#ETH_RX_BUF_SIZE
 
ETH_MAX_PACKET_SIZE


	)

217 
	#ETH_TX_BUF_SIZE
 
ETH_MAX_PACKET_SIZE


	)

218 
	#ETH_RXBUFNB
 4U

	)

219 
	#ETH_TXBUFNB
 4U

	)

224 
	#DP83848_PHY_ADDRESS
 0x01U

	)

226 
	#PHY_RESET_DELAY
 0x000000FFU

	)

228 
	#PHY_CONFIG_DELAY
 0x00000FFFU

	)

230 
	#PHY_READ_TO
 0x0000FFFFU

	)

231 
	#PHY_WRITE_TO
 0x0000FFFFU

	)

235 
	#PHY_BCR
 ((
ut16_t
)0x0000U

	)

236 
	#PHY_BSR
 ((
ut16_t
)0x0001U

	)

238 
	#PHY_RESET
 ((
ut16_t
)0x8000U

	)

239 
	#PHY_LOOPBACK
 ((
ut16_t
)0x4000U

	)

240 
	#PHY_FULLDUPLEX_100M
 ((
ut16_t
)0x2100U

	)

241 
	#PHY_HALFDUPLEX_100M
 ((
ut16_t
)0x2000U

	)

242 
	#PHY_FULLDUPLEX_10M
 ((
ut16_t
)0x0100U

	)

243 
	#PHY_HALFDUPLEX_10M
 ((
ut16_t
)0x0000U

	)

244 
	#PHY_AUTONEGOTIATION
 ((
ut16_t
)0x1000U

	)

245 
	#PHY_RESTART_AUTONEGOTIATION
 ((
ut16_t
)0x0200U

	)

246 
	#PHY_POWERDOWN
 ((
ut16_t
)0x0800U

	)

247 
	#PHY_ISOLATE
 ((
ut16_t
)0x0400U

	)

249 
	#PHY_AUTONEGO_COMPLETE
 ((
ut16_t
)0x0020U

	)

250 
	#PHY_LINKED_STATUS
 ((
ut16_t
)0x0004U

	)

251 
	#PHY_JABBER_DETECTION
 ((
ut16_t
)0x0002U

	)

254 
	#PHY_SR
 ((
ut16_t
)0x10U

	)

256 
	#PHY_SPEED_STATUS
 ((
ut16_t
)0x0002U

	)

257 
	#PHY_DUPLEX_STATUS
 ((
ut16_t
)0x0004U

	)

266 
	#USE_SPI_CRC
 0U

	)

273 #ifde
HAL_RCC_MODULE_ENABLED


274 
	~"m32f4xx_h_rcc.h
"

277 #ifde
HAL_GPIO_MODULE_ENABLED


278 
	~"m32f4xx_h_gpio.h
"

281 #ifde
HAL_EXTI_MODULE_ENABLED


282 
	~"m32f4xx_h_exti.h
"

285 #ifde
HAL_DMA_MODULE_ENABLED


286 
	~"m32f4xx_h_dma.h
"

289 #ifde
HAL_CORTEX_MODULE_ENABLED


290 
	~"m32f4xx_h_c܋x.h
"

293 #ifde
HAL_ADC_MODULE_ENABLED


294 
	~"m32f4xx_h_adc.h
"

297 #ifde
HAL_CAN_MODULE_ENABLED


298 
	~"m32f4xx_h_n.h
"

301 #ifde
HAL_CAN_LEGACY_MODULE_ENABLED


302 
	~"m32f4xx_h_n_gacy.h
"

305 #ifde
HAL_CRC_MODULE_ENABLED


306 
	~"m32f4xx_h_c.h
"

309 #ifde
HAL_CRYP_MODULE_ENABLED


310 
	~"m32f4xx_h_yp.h
"

313 #ifde
HAL_DMA2D_MODULE_ENABLED


314 
	~"m32f4xx_h_dma2d.h
"

317 #ifde
HAL_DAC_MODULE_ENABLED


318 
	~"m32f4xx_h_dac.h
"

321 #ifde
HAL_DCMI_MODULE_ENABLED


322 
	~"m32f4xx_h_dcmi.h
"

325 #ifde
HAL_ETH_MODULE_ENABLED


326 
	~"m32f4xx_h_h.h
"

329 #ifde
HAL_FLASH_MODULE_ENABLED


330 
	~"m32f4xx_h_ash.h
"

333 #ifde
HAL_SRAM_MODULE_ENABLED


334 
	~"m32f4xx_h_am.h
"

337 #ifde
HAL_NOR_MODULE_ENABLED


338 
	~"m32f4xx_h_n.h
"

341 #ifde
HAL_NAND_MODULE_ENABLED


342 
	~"m32f4xx_h_nd.h
"

345 #ifde
HAL_PCCARD_MODULE_ENABLED


346 
	~"m32f4xx_h_pcrd.h
"

349 #ifde
HAL_SDRAM_MODULE_ENABLED


350 
	~"m32f4xx_h_sdm.h
"

353 #ifde
HAL_HASH_MODULE_ENABLED


354 
	~"m32f4xx_h_hash.h
"

357 #ifde
HAL_I2C_MODULE_ENABLED


358 
	~"m32f4xx_h_i2c.h
"

361 #ifde
HAL_SMBUS_MODULE_ENABLED


362 
	~"m32f4xx_h_smbus.h
"

365 #ifde
HAL_I2S_MODULE_ENABLED


366 
	~"m32f4xx_h_i2s.h
"

369 #ifde
HAL_IWDG_MODULE_ENABLED


370 
	~"m32f4xx_h_iwdg.h
"

373 #ifde
HAL_LTDC_MODULE_ENABLED


374 
	~"m32f4xx_h_dc.h
"

377 #ifde
HAL_PWR_MODULE_ENABLED


378 
	~"m32f4xx_h_pwr.h
"

381 #ifde
HAL_RNG_MODULE_ENABLED


382 
	~"m32f4xx_h_g.h
"

385 #ifde
HAL_RTC_MODULE_ENABLED


386 
	~"m32f4xx_h_c.h
"

389 #ifde
HAL_SAI_MODULE_ENABLED


390 
	~"m32f4xx_h_i.h
"

393 #ifde
HAL_SD_MODULE_ENABLED


394 
	~"m32f4xx_h_sd.h
"

397 #ifde
HAL_SPI_MODULE_ENABLED


398 
	~"m32f4xx_h_i.h
"

401 #ifde
HAL_TIM_MODULE_ENABLED


402 
	~"m32f4xx_h_tim.h
"

405 #ifde
HAL_UART_MODULE_ENABLED


406 
	~"m32f4xx_h_ut.h
"

409 #ifde
HAL_USART_MODULE_ENABLED


410 
	~"m32f4xx_h_u.h
"

413 #ifde
HAL_IRDA_MODULE_ENABLED


414 
	~"m32f4xx_h_da.h
"

417 #ifde
HAL_SMARTCARD_MODULE_ENABLED


418 
	~"m32f4xx_h_smtrd.h
"

421 #ifde
HAL_WWDG_MODULE_ENABLED


422 
	~"m32f4xx_h_wwdg.h
"

425 #ifde
HAL_PCD_MODULE_ENABLED


426 
	~"m32f4xx_h_pcd.h
"

429 #ifde
HAL_HCD_MODULE_ENABLED


430 
	~"m32f4xx_h_hcd.h
"

433 #ifde
HAL_DSI_MODULE_ENABLED


434 
	~"m32f4xx_h_dsi.h
"

437 #ifde
HAL_QSPI_MODULE_ENABLED


438 
	~"m32f4xx_h_qi.h
"

441 #ifde
HAL_CEC_MODULE_ENABLED


442 
	~"m32f4xx_h_c.h
"

445 #ifde
HAL_FMPI2C_MODULE_ENABLED


446 
	~"m32f4xx_h_fmpi2c.h
"

449 #ifde
HAL_FMPSMBUS_MODULE_ENABLED


450 
	~"m32f4xx_h_fmpsmbus.h
"

453 #ifde
HAL_SPDIFRX_MODULE_ENABLED


454 
	~"m32f4xx_h_dix.h
"

457 #ifde
HAL_DFSDM_MODULE_ENABLED


458 
	~"m32f4xx_h_dfsdm.h
"

461 #ifde
HAL_LPTIM_MODULE_ENABLED


462 
	~"m32f4xx_h_tim.h
"

465 #ifde
HAL_MMC_MODULE_ENABLED


466 
	~"m32f4xx_h_mmc.h
"

470 #ifde 
USE_FULL_ASSERT


479 
	#as_m
(
ex
(x? ()0U : 
	`as_ed
((
ut8_t
 *)
__FILE__
, 
__LINE__
))

	)

481 
as_ed
(
ut8_t
* 
fe
, 
ut32_t
 
le
);

483 
	#as_m
(
ex
(()0U)

	)

486 #ifde
__lulus


	@Inc/stm32f4xx_it.h

22 #ide
__STM32F4xx_IT_H


23 
	#__STM32F4xx_IT_H


	)

25 #ifde
__lulus


50 
NMI_Hdr
();

51 
HdFau_Hdr
();

52 
MemMage_Hdr
();

53 
BusFau_Hdr
();

54 
UgeFau_Hdr
();

55 
SVC_Hdr
();

56 
DebugM_Hdr
();

57 
PdSV_Hdr
();

58 
SysTick_Hdr
();

59 
EXTI0_IRQHdr
();

60 
EXTI1_IRQHdr
();

61 
EXTI2_IRQHdr
();

62 
EXTI3_IRQHdr
();

63 
EXTI9_5_IRQHdr
();

64 
TIM2_IRQHdr
();

65 
USART1_IRQHdr
();

66 
USART2_IRQHdr
();

67 
USART3_IRQHdr
();

68 
UART4_IRQHdr
();

73 #ifde
__lulus


	@Inc/vfdn_acsv.h

23 #ide
__VFDN_ACSV_H


24 
	#__VFDN_ACSV_H


	)

26 #ifde
__lulus


50 
	#SEW_MOTOR_1CYCLE_CLOCK
 100

	)

51 
	#MOV_MOTOR_1CYCLE_CLOCK
 100

	)

55 
	#ONE_PULSE_MV
 ()0.016421367

	)

56 
	#ONE_PULSE_LF
 ()0.00625

	)

57 
	#ONE_PULSE_NL
 ()0.007657632

	)

59 
	#NL_1MM_CLOCK
 130

	)

61 
	#MOV_1MM_CLOCK
 60

	)

62 
	#MOV_5MM_CLOCK
 304

	)

63 
	#MOV_6MM_CLOCK
 365

	)

64 
	#MOV_7MM_CLOCK
 426

	)

65 
	#MOV_8MM_CLOCK
 487

	)

66 
	#MOV_9MM_CLOCK
 548

	)

67 
	#MOV_10MM_CLOCK
 608

	)

69 
	#MOV_100MM_CLOCK
 6089

70 
	#MOV_150MM_CLOCK
 9134

71 
	#MOV_200MM_CLOCK
 12179

72 
	#MOV_250MM_CLOCK
 15199

73 
	#MOV_300MM_CLOCK
 18268

74 
	#MOV_350MM_CLOCK
 21313

75 
	#MOV_400MM_CLOCK
 24358

76 
	#MOV_450MM_CLOCK
 27403

77 
	#MOV_500MM_CLOCK
 30448

78 
	#MOV_1000MM_CLOCK
 60896

79 
	#MOV_1200MM_CLOCK
 73075

80 
	#MOV_1500MM_CLOCK
 91344

81 
	#MOV_2000MM_CLOCK
 121792

82 
	#MOV_2500MM_CLOCK
 152240

83 
	#MOV_2600MM_CLOCK
 158330

84 
	#MOV_2700MM_CLOCK
 164419

85 
	#MOV_2800MM_CLOCK
 170509

86 

	)

87 
	#SEW_1CYCLE_PULSE
 1600

88 
	#SEW_OFF_FABRIC_PULSE
 1250

89 

	)

90 
	#MOV_1CYCLE_PULSE
 
MOV_7MM_CLOCK


91 
	#MOV_MAX_PULSE
 
MOV_1500MM_CLOCK


92 
	#MOV_ROE_MAX_PULSE
 
MOV_10MM_CLOCK


93 

	)

100 
svEtiC
;

101 
svRC
;

116 #ifde
__lulus


	@Inc/vfdn_adc.h

23 #ide
__VFDN_ADC_H


24 
	#__VFDN_ADC_H


	)

26 #ifde
__lulus


50 
	#ADC_SCAN_TCNT
 5

51 
	#ADC_SCAN_TSTART
 1

	)

52 
	#ADC_SCAN_NOW
 2

	)

54 
	#ADC_CNT_MAX
 40

	)

62 
adcFg
;

63 
adcC
;

64 
adcV
;

70 
adcCheck
();

81 #ifde
__lulus


	@Inc/vfdn_com.h

21 #ide
__VFDN_COM_H


22 
	#__VFDN_COM_H


	)

24 #ifde
__lulus


47 
	#COM_BUF_MAX
 50

	)

49 
	#COM_STX1
 0x02

	)

50 
	#COM_STX2
 0x0b

	)

51 
	#COM_ETX1
 0x0d

	)

52 
	#COM_ETX2
 0x0a

	)

54 
	#COM_STEP_STX1
 0

	)

55 
	#COM_STEP_STX2
 1

	)

56 
	#COM_STEP_DATA
 2

	)

57 
	#COM_STEP_ETX1
 3

	)

58 
	#COM_STEP_ETX2
 4

	)

60 
	#COM_DATA
 15

	)

62 
	#COM_PACKET_CYCLE
 120

63 

	)

64 
	#COM_PACKET_TIM_STOP
 0

	)

65 
	#COM_PACKET_TIM_START
 1

	)

66 
	#COM_PACKET_TIM_OCCUR
 2

	)

67 
	#COM_PACKET_TIM_ERROR
 3

	)

69 
	#COM_ID
 0

	)

70 
	#COM_METERIAL_LEN
 9

	)

71 
	#COM_ERROR_CODE
 14

	)

72 
	#COM_SOFT_STOP
 0x80

	)

78 
comBuf
[
COM_BUF_MAX
];

79 
comIC
;

80 
comCyeFg
;

81 
comCyeC
;

82 
comSoSt
;

83 
comOKFg
;

88 
comCheck
();

89 
comAlysis
();

90 
putCh
(
UART_HdTyDef
 * 
t
, 
sda
);

91 
putS
(
UART_HdTyDef
 * 
t
, cڡ *
r
);

95 #ifde
__lulus


	@Inc/vfdn_io_cntl.h

23 #ide
__VFDN_IO_CNTL_H


24 
	#__VFDN_IO_CNTL_H


	)

26 #ifde
__lulus


50 
	#IN_CH_MAX
 7

	)

52 
	#READ_US_DLY
 5

	)

54 
	#READ_SIG_TCNT
 2

55 
	#READ_SIG_TSTART
 1

	)

56 
	#READ_SIG_NOW
 2

	)

59 
	#SW_SCAN_TCNT
 10

60 
	#SW_SCAN_TSTART
 1

	)

61 
	#SW_SCAN_NOW
 2

	)

64 
	#MODE_AUTO
 0x01

	)

65 
	#MODE_MANUAL
 0x02

	)

66 
	#MODE_EMS
 0x04

	)

67 
	#MODE_MTEST
 0x08

	)

69 
	#IN_CH1
 0

	)

70 
	#IN_CH2
 1

	)

71 
	#IN_CH3
 2

	)

72 
	#IN_CH4
 3

	)

73 
	#IN_CH5
 4

	)

74 
	#IN_CH6
 5

	)

75 
	#IN_CH7
 6

	)

76 
	#IN_CH8
 7

	)

78 
	#OUT_CH1
 0

	)

79 
	#OUT_CH2
 1

	)

80 
	#OUT_CH3
 2

	)

81 
	#OUT_CH4
 3

	)

82 
	#OUT_CH5
 4

	)

83 
	#OUT_CH6
 5

	)

84 
	#OUT_CH7
 6

	)

85 
	#OUT_CH8
 7

	)

88 
	#ST_SW_EMS
 0x00000001

89 
	#ST_SW_AUTO_MANUAL
 0x00000002

90 
	#ST_SW_MOVING_FB
 0x00000004

91 
	#ST_SW_MOVING_UD
 0x00000008

92 
	#ST_SW_AUTO_START
 0x00000010

93 
	#ST_SW_AUTO_STOP
 0x00000020

94 
	#ST_SW_AUTO_RESET
 0x00000040

95 
	#ST_SW_TEST_SEWING
 0x00000080

96 
	#ST_SW_NEEDLE_HOME
 0x00000100

97 
	#ST_SW_LOOPER_HOME
 0x00000200

98 
	#ST_SW_MOVING_HOME
 0x00000400

99 
	#ST_SW_UD_HOME
 0x00000800

100 
	#ST_SW_CLAMP1_OPEN_CLOSE
 0x00001000

101 
	#ST_SW_CLAMP2_OPEN_CLOSE
 0x00002000

102 
	#ST_SW_CLAMP3_OPEN_CLOSE
 0x00004000

103 
	#ST_SW_CLAMP4_OPEN_CLOSE
 0x00008000

104 
	#ST_SW_VACCUM_OPEN_CLOSE
 0x00010000

105 
	#ST_SW_BAND_CUT
 0x00020000

106 
	#ST_SW_ROE_X
 0x00040000

107 
	#ST_SW_ROE_Y
 0x00080000

108 
	#ST_SW_ROE_Z
 0x00100000

109 
	#ST_SW_ROE_X1
 0x00200000

110 
	#ST_SW_ROE_X10
 0x00400000

111 

	)

113 
	#ST_SEN_LIFTING_UP_LIM
 0x00000001

114 
	#ST_SEN_LIFTING_DN_LIM
 0x00000002

115 
	#ST_SEN_LIFTING_HOME
 0x00000004

116 
	#ST_SEN_NEEDLE_HOME
 0x00000008

117 
	#ST_SEN_BAND_EMPTY1
 0x00000010

118 
	#ST_SEN_BAND_EMPTY2
 0x00000020

119 
	#ST_SEN_BAND_LOST1
 0x00000040

120 
	#ST_SEN_BAND_LOST2
 0x00000080

121 
	#ST_SEN_UPPER_THREAD_CUT_OFF
 0x00000100

122 
	#ST_SEN_LOOPER_HOME
 0x00000200

123 
	#ST_SEN_UNDER_THREAD_CUT_OFF
 0x00000400

124 
	#ST_SEN_BAND_INSERT1
 0x00000800

125 
	#ST_SEN_BAND_INSERT2
 0x00001000

126 
	#ST_SEN_MOVING_BACKWARD_LIM
 0x00002000

127 
	#ST_SEN_MOVING_FORWARD_LIM
 0x00004000

128 
	#ST_SEN_MOVING_HOME
 0x00008000

129 
	#ST_SEN_FABRIC_DETECT1
 0x00010000

130 
	#ST_SEN_FABRIC_DETECT2
 0x00020000

131 
	#ST_SEN_CLAMP12_OPEN
 0x00040000

132 
	#ST_SEN_CLAMP12_CLOSE
 0x00080000

133 
	#ST_SEN_CLAMP34_OPEN
 0x00100000

134 
	#ST_SEN_CLAMP34_CLOSE
 0x00200000

135 

	)

137 
	#ST_SV_ALRM
 0x01

138 
	#ST_SV_HOME
 0x02

139 
	#ST_SV_RDY
 0x04

140 
	#ST_ZERO_SPD
 0x08

141 
	#ST_T_POS
 0x10

142 

	)

143 
	sOUT_PORT_DEF
 {

146 
ut8_t
 
b0
:1;

147 
ut8_t
 
b1
:1;

148 
ut8_t
 
b2
:1;

149 
ut8_t
 
b3
:1;

150 
ut8_t
 
b4
:1;

151 
ut8_t
 
b5
:1;

152 
ut8_t
 
b6
:1;

153 
ut8_t
 
b7
:1;

155 
ut8_t
 
da
;

157 } 
OUT_PORT_DATA
[8];

160 
	#ST_SV_ON
 0x01

161 
	#ST_ALRM_RST
 0x02

162 
	#ST_EMG_STOP
 0x04

163 
	#ST_CNT_CLR
 0x08

164 
	#ST_MODE_SEL0
 0x10

165 
	#ST_MODE_SEL1
 0x20

166 
	#ST_CW_LIM
 0x40

167 
	#ST_CCW_LIM
 0x80

168 

	)

170 
	#OUT_CLAMP1_CNTL
 0x02

171 
	#OUT_CLAMP2_CNTL
 0x08

172 
	#OUT_CLAMP3_CNTL
 0x20

173 
	#OUT_CLAMP4_CNTL
 0x80

174 

	)

177 
	#OUT_HEAT_CNTL
 0x01

178 

	)

183 
	#OUT_TL_R_CNTL
 0x04

184 
	#OUT_TL_G_CNTL
 0x01

185 
	#OUT_VACCUM_CNTL
 0x0a

186 
	#OUT_TL_Y_CNTL
 0x10

190 

	)

211 
scFg
;

212 
rsFg
;

213 
rsC
;

214 
Ch
;

215 
SV
[4];

217 
Out
[8];

218 
SW
;

219 
SEN
;

230 
adID
();

231 
outSigl
(
ch
, 
sda
);

232 
adSiglPross
();

233 
chkE
();

235 
outTe
();

244 #ifde
__lulus


	@Inc/vfdn_roe.h

23 #ide
__VFDN_ROE_H


24 
	#__VFDN_ROE_H


	)

26 #ifde
__lulus


48 
	#__DEBUG_ROE__


	)

50 
	#ROE_CNT_MAX
 100

	)

52 
	#ROE_CLK_REF_CNT
 60000

	)

61 
rNowFg
;

62 
rPvFg
;

63 
	grCWNowC
 = 0;

64 
	grCCWNowC
 = 0;

65 
	grPvC
 = 0;

67 sigd 
rNowC
;

68 sigd 
rPvC
;

69 
rEvt
;

70 
rDFg
;

87 #ifde
__lulus


	@Inc/vfdn_rtc.h

23 #ide
__VFDN_RTC_H


24 
	#__VFDN_RTC_H


	)

26 #ifde
__lulus


39 
RTC_TimeTyDef
 
sTime
;

40 
RTC_DeTyDef
 
sDe
;

50 
	#__DEBUG_RTC__


	)

58 
rYr
;

59 
rMth
;

60 
rDe
;

61 
rHour
;

62 
rMu
;

63 
rSecd
;

64 
rWkDay
;

70 
gRTCTime
();

71 
tRTCTime
();

81 #ifde
__lulus


	@Inc/vfdn_servo.h

23 #ide
__VFDN_SERVO_H


24 
	#__VFDN_SERVO_H


	)

26 #ifde
__lulus


50 
	#RC_SV_PERIOD
 10000

51 
	#RC_SV_A0
 1500

52 
	#RC_SV_AP45
 2000

53 
	#RC_SV_AN45
 1000

54 

	)

56 
	#FRQ_25KHz
 39

57 
	#FRQ_20KHz
 49

	)

58 
	#FRQ_15KHz
 74

59 
	#FRQ_10KHz
 99

60 
	#FRQ_8KHz
 124

	)

61 
	#FRQ_5KHz
 199

	)

62 
	#FRQ_4KHz
 249

	)

63 
	#FRQ_2KHz
 499

	)

64 
	#FRQ_1KHz
 999

	)

65 
	#FRQ_500Hz
 1999

	)

66 
	#FRQ_200Hz
 4999

67 
	#FRQ_100Hz
 9999

68 
	#FRQ_62Hz
 15999

69 

	)

70 
	#VSLOW_SEWING
 
FRQ_100Hz


	)

71 
	#SLOW_SEWING
 
FRQ_500Hz


	)

72 
	#FAST_SEWING
 
FRQ_10KHz


	)

73 
	#VFAST_SEWING
 
FRQ_25KHz


	)

75 
	#FRQ_AC_SV_NOR_OP
 
FRQ_25KHz


76 
	#FRQ_RC_SV
 
FRQ_62Hz


	)

77 
	#FRQ_AC_SV_TEST_OP
 
FRQ_500Hz


	)

97 #ifde
__lulus


	@Inc/vfdn_spi.h

23 #ide
__VFDN_SPI_H


24 
	#__VFDN_SPI_H


	)

26 #ifde
__lulus


50 
	#AP_SCAN_TCNT
 20

51 
	#AP_SCAN_TSTART
 1

	)

52 
	#AP_SCAN_NOW
 2

	)

54 
	#AP_CNT_MAX
 40

	)

61 
Fg
;

62 
C
;

63 
kPa
;

68 
Check
();

78 #ifde
__lulus


	@Inc/vfdn_sub.h

23 #ide
__VFDN_SUB_H


24 
	#__VFDN_SUB_H


	)

26 #ifde
__lulus


49 
	#__DEBUG_SUB__


	)

51 
	#INIT_STEP_NEEDLE
 0

	)

52 
	#INIT_STEP_LOOPER
 1

	)

53 
	#INIT_STEP_MOVING
 2

	)

54 
	#INIT_STEP_LIFTING
 3

	)

55 
	#INIT_STEP_CLAMP
 4

	)

57 
	#SYS_LED_TCNT
 499

	)

59 
	#INIT_TCNT
 60000

60 
	#INIT_TSTART
 1

	)

61 
	#INIT_TOVER
 2

	)

63 
	#SW_SCAN_TCNT
 10

64 
	#SW_SCAN_TSTART
 1

	)

65 
	#SW_SCAN_NOW
 2

	)

67 
	#MODE_SEWING
 0

	)

68 
	#MODE_TEST
 1

	)

70 
	#VACCUM_CLOSE
 0

	)

71 
	#VACCUM_OPEN
 1

	)

73 
	#CLAMP_OPEN
 0

	)

74 
	#CLAMP_CLOSE
 1

	)

76 
	#METERIAL_LEN_MIN
 500

	)

77 
	#METERIAL_LEN_MAX
 2600

	)

79 
	#AP_KPA_MIN
 100

	)

80 
	#AP_KPA_MAX
 700

	)

82 
	#RC_DUTY_MIN
 1000

	)

83 
	#RC_DUTY_MAX
 2000

	)

84 
	#RC_DUTY_STEP
 20

	)

85 
	#RC_GEN_TCNT
 20

	)

86 
	#RC_GEN_TSTART
 1

	)

87 
	#RC_GEN_NOW
 2

	)

89 
	#HEATER_CURR_MIN
 20

90 
	#HEATER_CURR_MAX
 80

91 

	)

92 
	#TLAMP_RUN_TSTART
 1

	)

93 
	#TLAMP_RUN_NOW
 2

	)

94 
	#TLAMP_10MSEC_TCNT
 10

	)

95 
	#TLAMP_200MSEC_TCNT
 200

	)

96 
	#TLAMP_500MSEC_TCNT
 500

	)

97 
	#TLAMP_1000MSEC_TCNT
 1000

	)

99 
	#SEW_ACT_WAIT
 0x00

100 
	#SEW_ACT_FR
 0x20

101 
	#SEW_ACT_FIN
 0x40

102 
	#SEW_ACT_BR
 0x60

103 
	#SEW_ACT_AS
 0x80

104 
	#SEW_ACT_ALL
 0xe0

105 

	)

110 
bdID
;

111 
htCu
;

112 
kPa
;

113 
mL
;

115 
sysLedC
;

116 
sysMode
;

117 
rMode
;

119 
swFg
;

120 
swC
;

122 
bcFg
;

123 
bcC
;

125 
wA
;

127 
wRunC
;

129 
wMovMaxC
;

130 
wMovC
;

134 
rCode
[4];

135 
sysSFg
;

137 
Fg
[5];

138 
C
[5];

140 
CkFg
;

141 
CkC
;

143 
Fg
;

144 
C
;

145 
F
;

147 
svRdy
;

149 
C
;

150 
Fg
;

152 
ROEC
;

154 
tSewC
;

155 
tMovC
;

156 
tMovMaxC
;

158 
loݔC
;

159 
loݔFg
;

161 
movC
;

162 
movFg
;

164 
lfC
;

165 
lfFg
;

170 
TLamp
();

171 
snSw
();

172 
rugPross
();

173 
SV
(
TIM_HdTyDef
 *
htim
, 
ut32_t
 
Chl
, 
ut16_t
 
ime
);

174 
ROE
();

176 
BdCut
();

177 
autoMode
();

179 
wRunFg
;

189 #ifde
__lulus


	@Src/dwt_stm32_delay.c

1 
	~"dwt_m32_day.h
"

10 
ut32_t
 
	$DWT_Day_In
() {

12 
CeDebug
->
DEMCR
 &~
CeDebug_DEMCR_TRCENA_Msk
;

14 
CeDebug
->
DEMCR
 |
CeDebug_DEMCR_TRCENA_Msk
;

17 
DWT
->
CTRL
 &~
DWT_CTRL_CYCCNTENA_Msk
;

19 
DWT
->
CTRL
 |
DWT_CTRL_CYCCNTENA_Msk
;

22 
DWT
->
CYCCNT
 = 0;

25 
__ASM
 volatile ("NOP");

26 
__ASM
 volatile ("NOP");

27 
__ASM
 volatile ("NOP");

30 if(
DWT
->
CYCCNT
)

38 
	}
}

	@Src/main.c

21 
	~"ma.h
"

22 
	~"vfdn_io_.h
"

23 
	~"vfdn_adc.h
"

24 
	~"vfdn_i.h
"

25 
	~"vfdn_sub.h
"

26 
	~"vfdn_com.h
"

27 
	~"vfdn_rvo.h
"

28 
	~"dwt_m32_day.h
"

51 
ADC_HdTyDef
 
	ghadc1
;

53 
I2C_HdTyDef
 
	ghi2c1
;

55 
RTC_HdTyDef
 
	ghc
;

57 
SPI_HdTyDef
 
	ghi2
;

58 
SPI_HdTyDef
 
	ghi3
;

60 
TIM_HdTyDef
 
	ghtim2
;

61 
TIM_HdTyDef
 
	ghtim3
;

62 
TIM_HdTyDef
 
	ghtim4
;

63 
TIM_HdTyDef
 
	ghtim8
;

65 
UART_HdTyDef
 
	ghut4
;

66 
UART_HdTyDef
 
	ghut1
;

67 
UART_HdTyDef
 
	ghut2
;

68 
UART_HdTyDef
 
	ghut3
;

75 
SyemClock_Cfig
();

76 
MX_GPIO_In
();

77 
MX_ADC1_In
();

78 
MX_I2C1_In
();

79 
MX_RTC_In
();

80 
MX_SPI2_In
();

81 
MX_SPI3_In
();

82 
MX_TIM3_In
();

83 
MX_TIM4_In
();

84 
MX_UART4_In
();

85 
MX_USART1_UART_In
();

86 
MX_USART2_UART_In
();

87 
MX_USART3_UART_In
();

88 
MX_TIM2_In
();

89 
MX_TIM8_In
();

90 
Vbs
();

104 
	$ma
()

113 
	`HAL_In
();

120 
	`SyemClock_Cfig
();

127 
	`MX_GPIO_In
();

128 
	`MX_ADC1_In
();

129 
	`MX_I2C1_In
();

130 
	`MX_RTC_In
();

131 
	`MX_SPI2_In
();

132 
	`MX_SPI3_In
();

133 
	`MX_TIM3_In
();

134 
	`MX_TIM4_In
();

135 
	`MX_UART4_In
();

136 
	`MX_USART1_UART_In
();

137 
	`MX_USART2_UART_In
();

138 
	`MX_USART3_UART_In
();

139 
	`MX_TIM2_In
();

140 
	`MX_TIM8_In
();

143 
	`DWT_Day_In
();

144 
	`HAL_TIM_Ba_S_IT
(&
htim2
);

147 
	`DWT_Day_us
(3000000);

148 
	`putS
(&
hut4
,(const *)"System Start!\n");

149 
	`Vbs
();

150 
	`adID
();

178 
	`adSiglPross
();

179 
	`chkE
();

180 
	`snSw
();

181 
	`rugPross
();

185 
	`Check
();

191 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_14
,
SET
);

193 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_0
,
SET
);

194 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_1
,
SET
);

195 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_2
,
SET
);

196 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_4
,
SET
);

197 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_5
,
SET
);

198 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_8
,
SET
);

199 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_9
,
SET
);

200 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_12
,
SET
);

202 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_12
,
SET
);

204 
	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_0
,
SET
);

205 
	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_1
,
SET
);

206 
	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_3
,
SET
);

207 
	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_4
,
SET
);

208 
	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_5
,
SET
);

209 
	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_13
,
SET
);

210 
	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_7
,
SET
);

211 
	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_8
,
SET
);

213 
	`DWT_Day_us
(100);

215 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_14
,
RESET
);

217 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_0
,
RESET
);

218 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_1
,
RESET
);

219 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_2
,
RESET
);

220 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_4
,
RESET
);

221 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_5
,
RESET
);

222 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_8
,
RESET
);

223 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_9
,
RESET
);

224 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_12
,
RESET
);

226 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_12
,
RESET
);

228 
	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_0
,
RESET
);

229 
	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_1
,
RESET
);

230 
	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_3
,
RESET
);

231 
	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_4
,
RESET
);

232 
	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_5
,
RESET
);

233 
	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_13
,
RESET
);

234 
	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_7
,
RESET
);

235 
	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_8
,
RESET
);

237 
	`DWT_Day_us
(100);

242 
	}
}

248 
	$SyemClock_Cfig
()

250 
RCC_OscInTyDef
 
RCC_OscInSu
 = {0};

251 
RCC_ClkInTyDef
 
RCC_ClkInSu
 = {0};

255 
	`__HAL_RCC_PWR_CLK_ENABLE
();

256 
	`__HAL_PWR_VOLTAGESCALING_CONFIG
(
PWR_REGULATOR_VOLTAGE_SCALE1
);

260 
RCC_OscInSu
.
OsctTy
 = 
RCC_OSCILLATORTYPE_HSE
|
RCC_OSCILLATORTYPE_LSE
;

261 
RCC_OscInSu
.
HSES
 = 
RCC_HSE_ON
;

262 
RCC_OscInSu
.
LSES
 = 
RCC_LSE_ON
;

263 
RCC_OscInSu
.
PLL
.
PLLS
 = 
RCC_PLL_ON
;

264 
RCC_OscInSu
.
PLL
.
PLLSour
 = 
RCC_PLLSOURCE_HSE
;

265 
RCC_OscInSu
.
PLL
.
PLLM
 = 25;

266 
RCC_OscInSu
.
PLL
.
PLLN
 = 144;

267 
RCC_OscInSu
.
PLL
.
PLLP
 = 
RCC_PLLP_DIV2
;

268 
RCC_OscInSu
.
PLL
.
PLLQ
 = 4;

269 i(
	`HAL_RCC_OscCfig
(&
RCC_OscInSu
!
HAL_OK
)

271 
	`E_Hdr
();

275 
RCC_ClkInSu
.
ClockTy
 = 
RCC_CLOCKTYPE_HCLK
|
RCC_CLOCKTYPE_SYSCLK


276 |
RCC_CLOCKTYPE_PCLK1
|
RCC_CLOCKTYPE_PCLK2
;

277 
RCC_ClkInSu
.
SYSCLKSour
 = 
RCC_SYSCLKSOURCE_PLLCLK
;

278 
RCC_ClkInSu
.
AHBCLKDivid
 = 
RCC_SYSCLK_DIV1
;

279 
RCC_ClkInSu
.
APB1CLKDivid
 = 
RCC_HCLK_DIV2
;

280 
RCC_ClkInSu
.
APB2CLKDivid
 = 
RCC_HCLK_DIV1
;

282 i(
	`HAL_RCC_ClockCfig
(&
RCC_ClkInSu
, 
FLASH_LATENCY_2
!
HAL_OK
)

284 
	`E_Hdr
();

289 
	`HAL_SYSTICK_Cfig
(
	`HAL_RCC_GHCLKFq
()/1000);

292 
	`HAL_SYSTICK_CLKSourCfig
(
SYSTICK_CLKSOURCE_HCLK
);

295 
	`HAL_NVIC_SPriܙy
(
SysTick_IRQn
, 0, 0);

296 
	}
}

303 
	$MX_ADC1_In
()

309 
ADC_ChlCfTyDef
 
sCfig
 = {0};

316 
hadc1
.
In
 = 
ADC1
;

317 
hadc1
.
In
.
ClockPsr
 = 
ADC_CLOCK_SYNC_PCLK_DIV8
;

318 
hadc1
.
In
.
Resuti
 = 
ADC_RESOLUTION_12B
;

319 
hadc1
.
In
.
SnCvMode
 = 
DISABLE
;

320 
hadc1
.
In
.
CtuousCvMode
 = 
DISABLE
;

321 
hadc1
.
In
.
DisctuousCvMode
 = 
DISABLE
;

322 
hadc1
.
In
.
ExTrigCvEdge
 = 
ADC_EXTERNALTRIGCONVEDGE_NONE
;

323 
hadc1
.
In
.
ExTrigCv
 = 
ADC_SOFTWARE_START
;

324 
hadc1
.
In
.
DaAlign
 = 
ADC_DATAALIGN_RIGHT
;

325 
hadc1
.
In
.
NbrOfCvsi
 = 1;

326 
hadc1
.
In
.
DMACtuousReques
 = 
DISABLE
;

327 
hadc1
.
In
.
EOCSei
 = 
ADC_EOC_SINGLE_CONV
;

328 i(
	`HAL_ADC_In
(&
hadc1
!
HAL_OK
)

330 
	`E_Hdr
();

334 
sCfig
.
Chl
 = 
ADC_CHANNEL_4
;

335 
sCfig
.
Rk
 = 1;

336 
sCfig
.
SamgTime
 = 
ADC_SAMPLETIME_3CYCLES
;

337 i(
	`HAL_ADC_CfigChl
(&
hadc1
, &
sCfig
!
HAL_OK
)

339 
	`E_Hdr
();

344 
	}
}

351 
	$MX_I2C1_In
()

360 
hi2c1
.
In
 = 
I2C1
;

361 
hi2c1
.
In
.
ClockSed
 = 100000;

362 
hi2c1
.
In
.
DutyCye
 = 
I2C_DUTYCYCLE_2
;

363 
hi2c1
.
In
.
OwnAddss1
 = 0;

364 
hi2c1
.
In
.
AddssgMode
 = 
I2C_ADDRESSINGMODE_7BIT
;

365 
hi2c1
.
In
.
DuAddssMode
 = 
I2C_DUALADDRESS_DISABLE
;

366 
hi2c1
.
In
.
OwnAddss2
 = 0;

367 
hi2c1
.
In
.
GClMode
 = 
I2C_GENERALCALL_DISABLE
;

368 
hi2c1
.
In
.
NoSchMode
 = 
I2C_NOSTRETCH_DISABLE
;

369 i(
	`HAL_I2C_In
(&
hi2c1
!
HAL_OK
)

371 
	`E_Hdr
();

376 
	}
}

383 
	$MX_RTC_In
()

389 
RTC_TimeTyDef
 
sTime
 = {0};

390 
RTC_DeTyDef
 
sDe
 = {0};

397 
hc
.
In
 = 
RTC
;

398 
hc
.
In
.
HourFm
 = 
RTC_HOURFORMAT_24
;

399 
hc
.
In
.
AsynchPdiv
 = 127;

400 
hc
.
In
.
SynchPdiv
 = 255;

401 
hc
.
In
.
OutPut
 = 
RTC_OUTPUT_DISABLE
;

402 
hc
.
In
.
OutPutPެy
 = 
RTC_OUTPUT_POLARITY_HIGH
;

403 
hc
.
In
.
OutPutTy
 = 
RTC_OUTPUT_TYPE_OPENDRAIN
;

404 i(
	`HAL_RTC_In
(&
hc
!
HAL_OK
)

406 
	`E_Hdr
();

415 
sTime
.
Hours
 = 0x0;

416 
sTime
.
Mus
 = 0x0;

417 
sTime
.
Secds
 = 0x0;

418 
sTime
.
DayLightSavg
 = 
RTC_DAYLIGHTSAVING_NONE
;

419 
sTime
.
SteOti
 = 
RTC_STOREOPERATION_RESET
;

420 i(
	`HAL_RTC_STime
(&
hc
, &
sTime
, 
RTC_FORMAT_BCD
!
HAL_OK
)

422 
	`E_Hdr
();

424 
sDe
.
WkDay
 = 
RTC_WEEKDAY_WEDNESDAY
;

425 
sDe
.
Mth
 = 
RTC_MONTH_DECEMBER
;

426 
sDe
.
De
 = 0x1;

427 
sDe
.
Yr
 = 0x21;

429 i(
	`HAL_RTC_SDe
(&
hc
, &
sDe
, 
RTC_FORMAT_BCD
!
HAL_OK
)

431 
	`E_Hdr
();

436 
	}
}

443 
	$MX_SPI2_In
()

453 
hi2
.
In
 = 
SPI2
;

454 
hi2
.
In
.
Mode
 = 
SPI_MODE_MASTER
;

455 
hi2
.
In
.
Dei
 = 
SPI_DIRECTION_2LINES
;

458 
hi2
.
In
.
DaSize
 = 
SPI_DATASIZE_16BIT
;

459 
hi2
.
In
.
CLKPެy
 = 
SPI_POLARITY_LOW
;

461 
hi2
.
In
.
CLKPha
 = 
SPI_PHASE_1EDGE
;

463 
hi2
.
In
.
NSS
 = 
SPI_NSS_SOFT
;

464 
hi2
.
In
.
BaudRePsr
 = 
SPI_BAUDRATEPRESCALER_2
;

465 
hi2
.
In
.
FB
 = 
SPI_FIRSTBIT_MSB
;

466 
hi2
.
In
.
TIMode
 = 
SPI_TIMODE_DISABLE
;

467 
hi2
.
In
.
CRCCcuti
 = 
SPI_CRCCALCULATION_DISABLE
;

468 
hi2
.
In
.
CRCPynoml
 = 10;

469 i(
	`HAL_SPI_In
(&
hi2
!
HAL_OK
)

471 
	`E_Hdr
();

476 
	}
}

483 
	$MX_SPI3_In
()

493 
hi3
.
In
 = 
SPI3
;

494 
hi3
.
In
.
Mode
 = 
SPI_MODE_MASTER
;

495 
hi3
.
In
.
Dei
 = 
SPI_DIRECTION_2LINES
;

496 
hi3
.
In
.
DaSize
 = 
SPI_DATASIZE_16BIT
;

497 
hi3
.
In
.
CLKPެy
 = 
SPI_POLARITY_LOW
;

499 
hi3
.
In
.
CLKPha
 = 
SPI_PHASE_1EDGE
;

501 
hi3
.
In
.
NSS
 = 
SPI_NSS_SOFT
;

502 
hi3
.
In
.
BaudRePsr
 = 
SPI_BAUDRATEPRESCALER_2
;

503 
hi3
.
In
.
FB
 = 
SPI_FIRSTBIT_MSB
;

504 
hi3
.
In
.
TIMode
 = 
SPI_TIMODE_DISABLE
;

505 
hi3
.
In
.
CRCCcuti
 = 
SPI_CRCCALCULATION_DISABLE
;

506 
hi3
.
In
.
CRCPynoml
 = 10;

507 i(
	`HAL_SPI_In
(&
hi3
!
HAL_OK
)

509 
	`E_Hdr
();

514 
	}
}

521 
	$MX_TIM2_In
()

527 
TIM_ClockCfigTyDef
 
sClockSourCfig
 = {0};

528 
TIM_MaCfigTyDef
 
sMaCfig
 = {0};

533 
htim2
.
In
 = 
TIM2
;

534 
htim2
.
In
.
Psr
 = 71;

535 
htim2
.
In
.
CouMode
 = 
TIM_COUNTERMODE_UP
;

536 
htim2
.
In
.
Piod
 = 999;

537 
htim2
.
In
.
ClockDivisi
 = 
TIM_CLOCKDIVISION_DIV1
;

538 
htim2
.
In
.
AutoRdPld
 = 
TIM_AUTORELOAD_PRELOAD_DISABLE
;

539 i(
	`HAL_TIM_Ba_In
(&
htim2
!
HAL_OK
)

541 
	`E_Hdr
();

543 
sClockSourCfig
.
ClockSour
 = 
TIM_CLOCKSOURCE_INTERNAL
;

544 i(
	`HAL_TIM_CfigClockSour
(&
htim2
, &
sClockSourCfig
!
HAL_OK
)

546 
	`E_Hdr
();

548 
sMaCfig
.
MaOuutTrigg
 = 
TIM_TRGO_RESET
;

549 
sMaCfig
.
MaSveMode
 = 
TIM_MASTERSLAVEMODE_DISABLE
;

550 i(
	`HAL_TIMEx_MaCfigSynchrizi
(&
htim2
, &
sMaCfig
!
HAL_OK
)

552 
	`E_Hdr
();

557 
	}
}

564 
	$MX_TIM3_In
()

570 
TIM_ClockCfigTyDef
 
sClockSourCfig
 = {0};

571 
TIM_MaCfigTyDef
 
sMaCfig
 = {0};

572 
TIM_OC_InTyDef
 
sCfigOC
 = {0};

577 
htim3
.
In
 = 
TIM3
;

578 
htim3
.
In
.
Psr
 = 71;

579 
htim3
.
In
.
CouMode
 = 
TIM_COUNTERMODE_UP
;

580 
htim3
.
In
.
Piod
 = 
FRQ_RC_SV
;

581 
htim3
.
In
.
ClockDivisi
 = 
TIM_CLOCKDIVISION_DIV1
;

582 
htim3
.
In
.
AutoRdPld
 = 
TIM_AUTORELOAD_PRELOAD_DISABLE
;

583 i(
	`HAL_TIM_Ba_In
(&
htim3
!
HAL_OK
)

585 
	`E_Hdr
();

587 
sClockSourCfig
.
ClockSour
 = 
TIM_CLOCKSOURCE_INTERNAL
;

588 i(
	`HAL_TIM_CfigClockSour
(&
htim3
, &
sClockSourCfig
!
HAL_OK
)

590 
	`E_Hdr
();

592 i(
	`HAL_TIM_PWM_In
(&
htim3
!
HAL_OK
)

594 
	`E_Hdr
();

596 
sMaCfig
.
MaOuutTrigg
 = 
TIM_TRGO_UPDATE
;

597 
sMaCfig
.
MaSveMode
 = 
TIM_MASTERSLAVEMODE_DISABLE
;

598 i(
	`HAL_TIMEx_MaCfigSynchrizi
(&
htim3
, &
sMaCfig
!
HAL_OK
)

600 
	`E_Hdr
();

602 
sCfigOC
.
OCMode
 = 
TIM_OCMODE_PWM1
;

603 
sCfigOC
.
Pul
 = 0;

604 
sCfigOC
.
OCPެy
 = 
TIM_OCPOLARITY_HIGH
;

605 
sCfigOC
.
OCFaMode
 = 
TIM_OCFAST_DISABLE
;

606 i(
	`HAL_TIM_PWM_CfigChl
(&
htim3
, &
sCfigOC
, 
TIM_CHANNEL_1
!
HAL_OK
)

608 
	`E_Hdr
();

613 
	`HAL_TIM_MPoIn
(&
htim3
);

614 
	}
}

621 
	$MX_TIM4_In
()

627 
TIM_ClockCfigTyDef
 
sClockSourCfig
 = {0};

628 
TIM_MaCfigTyDef
 
sMaCfig
 = {0};

629 
TIM_OC_InTyDef
 
sCfigOC
 = {0};

634 
htim4
.
In
 = 
TIM4
;

635 
htim4
.
In
.
Psr
 = 71;

636 
htim4
.
In
.
CouMode
 = 
TIM_COUNTERMODE_UP
;

637 
htim4
.
In
.
Piod
 = 1999;

638 
htim4
.
In
.
ClockDivisi
 = 
TIM_CLOCKDIVISION_DIV1
;

639 
htim4
.
In
.
AutoRdPld
 = 
TIM_AUTORELOAD_PRELOAD_DISABLE
;

640 i(
	`HAL_TIM_Ba_In
(&
htim4
!
HAL_OK
)

642 
	`E_Hdr
();

644 
sClockSourCfig
.
ClockSour
 = 
TIM_CLOCKSOURCE_INTERNAL
;

645 i(
	`HAL_TIM_CfigClockSour
(&
htim4
, &
sClockSourCfig
!
HAL_OK
)

647 
	`E_Hdr
();

649 i(
	`HAL_TIM_PWM_In
(&
htim4
!
HAL_OK
)

651 
	`E_Hdr
();

653 
sMaCfig
.
MaOuutTrigg
 = 
TIM_TRGO_UPDATE
;

655 
sMaCfig
.
MaSveMode
 = 
TIM_MASTERSLAVEMODE_DISABLE
;

656 i(
	`HAL_TIMEx_MaCfigSynchrizi
(&
htim4
, &
sMaCfig
!
HAL_OK
)

658 
	`E_Hdr
();

660 
sCfigOC
.
OCMode
 = 
TIM_OCMODE_PWM1
;

661 
sCfigOC
.
Pul
 = 1000;

662 
sCfigOC
.
OCPެy
 = 
TIM_OCPOLARITY_HIGH
;

663 
sCfigOC
.
OCFaMode
 = 
TIM_OCFAST_DISABLE
;

664 i(
	`HAL_TIM_PWM_CfigChl
(&
htim4
, &
sCfigOC
, 
TIM_CHANNEL_1
!
HAL_OK
)

666 
	`E_Hdr
();

668 i(
	`HAL_TIM_PWM_CfigChl
(&
htim4
, &
sCfigOC
, 
TIM_CHANNEL_2
!
HAL_OK
)

670 
	`E_Hdr
();

672 i(
	`HAL_TIM_PWM_CfigChl
(&
htim4
, &
sCfigOC
, 
TIM_CHANNEL_3
!
HAL_OK
)

674 
	`E_Hdr
();

676 i(
	`HAL_TIM_PWM_CfigChl
(&
htim4
, &
sCfigOC
, 
TIM_CHANNEL_4
!
HAL_OK
)

678 
	`E_Hdr
();

683 
	`HAL_TIM_MPoIn
(&
htim4
);

684 
	}
}

691 
	$MX_TIM8_In
()

697 
TIM_ClockCfigTyDef
 
sClockSourCfig
 = {0};

698 
TIM_MaCfigTyDef
 
sMaCfig
 = {0};

699 
TIM_OC_InTyDef
 
sCfigOC
 = {0};

700 
TIM_BakDdTimeCfigTyDef
 
sBakDdTimeCfig
 = {0};

705 
htim8
.
In
 = 
TIM8
;

706 
htim8
.
In
.
Psr
 = 71;

707 
htim8
.
In
.
CouMode
 = 
TIM_COUNTERMODE_UP
;

708 
htim8
.
In
.
Piod
 = 
FRQ_RC_SV
;

709 
htim8
.
In
.
ClockDivisi
 = 
TIM_CLOCKDIVISION_DIV1
;

710 
htim8
.
In
.
RiCou
 = 0;

711 
htim8
.
In
.
AutoRdPld
 = 
TIM_AUTORELOAD_PRELOAD_DISABLE
;

712 i(
	`HAL_TIM_Ba_In
(&
htim8
!
HAL_OK
)

714 
	`E_Hdr
();

716 
sClockSourCfig
.
ClockSour
 = 
TIM_CLOCKSOURCE_INTERNAL
;

717 i(
	`HAL_TIM_CfigClockSour
(&
htim8
, &
sClockSourCfig
!
HAL_OK
)

719 
	`E_Hdr
();

721 i(
	`HAL_TIM_PWM_In
(&
htim8
!
HAL_OK
)

723 
	`E_Hdr
();

725 
sMaCfig
.
MaOuutTrigg
 = 
TIM_TRGO_RESET
;

727 
sMaCfig
.
MaSveMode
 = 
TIM_MASTERSLAVEMODE_DISABLE
;

728 i(
	`HAL_TIMEx_MaCfigSynchrizi
(&
htim8
, &
sMaCfig
!
HAL_OK
)

730 
	`E_Hdr
();

732 
sCfigOC
.
OCMode
 = 
TIM_OCMODE_PWM1
;

733 
sCfigOC
.
Pul
 = 0;

734 
sCfigOC
.
OCPެy
 = 
TIM_OCPOLARITY_HIGH
;

735 
sCfigOC
.
OCNPެy
 = 
TIM_OCNPOLARITY_HIGH
;

736 
sCfigOC
.
OCFaMode
 = 
TIM_OCFAST_DISABLE
;

737 
sCfigOC
.
OCIdS
 = 
TIM_OCIDLESTATE_RESET
;

738 
sCfigOC
.
OCNIdS
 = 
TIM_OCNIDLESTATE_RESET
;

739 i(
	`HAL_TIM_PWM_CfigChl
(&
htim8
, &
sCfigOC
, 
TIM_CHANNEL_1
!
HAL_OK
)

741 
	`E_Hdr
();

743 
sBakDdTimeCfig
.
OffSRunMode
 = 
TIM_OSSR_DISABLE
;

744 
sBakDdTimeCfig
.
OffSIDLEMode
 = 
TIM_OSSI_DISABLE
;

745 
sBakDdTimeCfig
.
LockLev
 = 
TIM_LOCKLEVEL_OFF
;

746 
sBakDdTimeCfig
.
DdTime
 = 0;

747 
sBakDdTimeCfig
.
BakS
 = 
TIM_BREAK_DISABLE
;

748 
sBakDdTimeCfig
.
BakPެy
 = 
TIM_BREAKPOLARITY_HIGH
;

749 
sBakDdTimeCfig
.
AutomicOuut
 = 
TIM_AUTOMATICOUTPUT_DISABLE
;

750 i(
	`HAL_TIMEx_CfigBakDdTime
(&
htim8
, &
sBakDdTimeCfig
!
HAL_OK
)

752 
	`E_Hdr
();

757 
	`HAL_TIM_MPoIn
(&
htim8
);

758 
	}
}

765 
	$MX_UART4_In
()

774 
hut4
.
In
 = 
UART4
;

775 
hut4
.
In
.
BaudRe
 = 115200;

776 
hut4
.
In
.
WdLgth
 = 
UART_WORDLENGTH_8B
;

777 
hut4
.
In
.
StBs
 = 
UART_STOPBITS_1
;

778 
hut4
.
In
.
Py
 = 
UART_PARITY_NONE
;

779 
hut4
.
In
.
Mode
 = 
UART_MODE_TX_RX
;

780 
hut4
.
In
.
HwFlowC
 = 
UART_HWCONTROL_NONE
;

781 
hut4
.
In
.
OvSamg
 = 
UART_OVERSAMPLING_16
;

782 i(
	`HAL_UART_In
(&
hut4
!
HAL_OK
)

784 
	`E_Hdr
();

789 
	}
}

796 
	$MX_USART1_UART_In
()

805 
hut1
.
In
 = 
USART1
;

806 
hut1
.
In
.
BaudRe
 = 115200;

807 
hut1
.
In
.
WdLgth
 = 
UART_WORDLENGTH_8B
;

808 
hut1
.
In
.
StBs
 = 
UART_STOPBITS_1
;

809 
hut1
.
In
.
Py
 = 
UART_PARITY_NONE
;

810 
hut1
.
In
.
Mode
 = 
UART_MODE_TX_RX
;

811 
hut1
.
In
.
HwFlowC
 = 
UART_HWCONTROL_NONE
;

812 
hut1
.
In
.
OvSamg
 = 
UART_OVERSAMPLING_16
;

813 i(
	`HAL_UART_In
(&
hut1
!
HAL_OK
)

815 
	`E_Hdr
();

820 
	}
}

827 
	$MX_USART2_UART_In
()

836 
hut2
.
In
 = 
USART2
;

837 
hut2
.
In
.
BaudRe
 = 115200;

838 
hut2
.
In
.
WdLgth
 = 
UART_WORDLENGTH_8B
;

839 
hut2
.
In
.
StBs
 = 
UART_STOPBITS_1
;

840 
hut2
.
In
.
Py
 = 
UART_PARITY_NONE
;

841 
hut2
.
In
.
Mode
 = 
UART_MODE_TX_RX
;

842 
hut2
.
In
.
HwFlowC
 = 
UART_HWCONTROL_NONE
;

843 
hut2
.
In
.
OvSamg
 = 
UART_OVERSAMPLING_16
;

844 i(
	`HAL_UART_In
(&
hut2
!
HAL_OK
)

846 
	`E_Hdr
();

851 
	}
}

858 
	$MX_USART3_UART_In
()

867 
hut3
.
In
 = 
USART3
;

868 
hut3
.
In
.
BaudRe
 = 115200;

869 
hut3
.
In
.
WdLgth
 = 
UART_WORDLENGTH_8B
;

870 
hut3
.
In
.
StBs
 = 
UART_STOPBITS_1
;

871 
hut3
.
In
.
Py
 = 
UART_PARITY_NONE
;

872 
hut3
.
In
.
Mode
 = 
UART_MODE_TX_RX
;

873 
hut3
.
In
.
HwFlowC
 = 
UART_HWCONTROL_NONE
;

874 
hut3
.
In
.
OvSamg
 = 
UART_OVERSAMPLING_16
;

875 i(
	`HAL_UART_In
(&
hut3
!
HAL_OK
)

877 
	`E_Hdr
();

882 
	}
}

889 
	$MX_GPIO_In
()

891 
GPIO_InTyDef
 
GPIO_InSu
 = {0};

894 
	`__HAL_RCC_GPIOA_CLK_ENABLE
();

895 
	`__HAL_RCC_GPIOB_CLK_ENABLE
();

896 
	`__HAL_RCC_GPIOC_CLK_ENABLE
();

897 
	`__HAL_RCC_GPIOD_CLK_ENABLE
();

898 
	`__HAL_RCC_GPIOE_CLK_ENABLE
();

899 
	`__HAL_RCC_GPIOH_CLK_ENABLE
();

904 
GPIO_InSu
.
P
 = 
UART2_RW
|
SYS_RUN
|
EEP_WP
;

905 
GPIO_InSu
.
Mode
 = 
GPIO_MODE_OUTPUT_PP
;

906 
GPIO_InSu
.
Pu
 = 
GPIO_NOPULL
;

907 
GPIO_InSu
.
Sed
 = 
GPIO_SPEED_FREQ_HIGH
;

908 
	`HAL_GPIO_In
(
GPIOA
, &
GPIO_InSu
);

911 
	`HAL_GPIO_WreP
(
GPIOA
, 
UART2_RW
|
SYS_RUN
|
EEP_WP
, 
GPIO_PIN_RESET
);

914 
GPIO_InSu
.
P
 = 
GPIO_PIN_8
|
GPIO_PIN_11
|
GPIO_PIN_12
;

915 
GPIO_InSu
.
Mode
 = 
GPIO_MODE_OUTPUT_PP
;

916 
GPIO_InSu
.
Pu
 = 
GPIO_NOPULL
;

917 
GPIO_InSu
.
Sed
 = 
GPIO_SPEED_FREQ_HIGH
;

918 
	`HAL_GPIO_In
(
GPIOA
, &
GPIO_InSu
);

921 
	`HAL_GPIO_WreP
(
GPIOA
, 
UART2_RW
|
SYS_RUN
|
EEP_WP
, 
GPIO_PIN_RESET
);

927 
GPIO_InSu
.
P
 = 
OUT_CLK1
|
OUT_CLK2
|
OUT_CLK3
|
OUT_CLK4
|
OUT_CLK5
|
OUT_CLK7
|
OUT_CLK8
|
OUT_CLK6
;

928 
GPIO_InSu
.
Mode
 = 
GPIO_MODE_OUTPUT_PP
;

929 
GPIO_InSu
.
Pu
 = 
GPIO_NOPULL
;

930 
GPIO_InSu
.
Sed
 = 
GPIO_SPEED_FREQ_HIGH
;

931 
	`HAL_GPIO_In
(
GPIOB
, &
GPIO_InSu
);

934 
GPIO_InSu
.
P
 = 
ROE_B
;

935 
GPIO_InSu
.
Mode
 = 
GPIO_MODE_INPUT
;

936 
GPIO_InSu
.
Pu
 = 
GPIO_NOPULL
;

937 
	`HAL_GPIO_In
(
GPIOB
, &
GPIO_InSu
);

943 
GPIO_InSu
.
P
 = 
GPIO_PIN_0
|
GPIO_PIN_1
|
GPIO_PIN_2
|
GPIO_PIN_4
|
GPIO_PIN_5
|
GPIO_PIN_8
|
GPIO_PIN_9
|
GPIO_PIN_12
|
GPIO_PIN_14
;

944 
GPIO_InSu
.
Mode
 = 
GPIO_MODE_OUTPUT_PP
;

945 
GPIO_InSu
.
Pu
 = 
GPIO_NOPULL
;

946 
GPIO_InSu
.
Sed
 = 
GPIO_SPEED_FREQ_HIGH
;

947 
	`HAL_GPIO_In
(
GPIOB
, &
GPIO_InSu
);

950 
GPIO_InSu
.
P
 = 
GPIO_PIN_3
;

951 
GPIO_InSu
.
Mode
 = 
GPIO_MODE_INPUT
;

952 
GPIO_InSu
.
Pu
 = 
GPIO_NOPULL
;

953 
	`HAL_GPIO_In
(
GPIOB
, &
GPIO_InSu
);

956 
	`HAL_GPIO_WreP
(
GPIOB
, 
GPIO_PIN_0
|
GPIO_PIN_1
|
GPIO_PIN_2
|
GPIO_PIN_4
|
GPIO_PIN_5
|
GPIO_PIN_8
|
GPIO_PIN_9
|
GPIO_PIN_12
|
GPIO_PIN_14
, 
GPIO_PIN_RESET
);

962 
GPIO_InSu
.
P
 = 
IN_EN1
|
IN_EN2
|
IN_EN3
|
IN_EN4
|
IN_EN5
|
IN_EN7
|
IN_EN8
|
UART1_RW
;

963 
GPIO_InSu
.
Mode
 = 
GPIO_MODE_OUTPUT_PP
;

964 
GPIO_InSu
.
Pu
 = 
GPIO_NOPULL
;

965 
GPIO_InSu
.
Sed
 = 
GPIO_SPEED_FREQ_HIGH
;

966 
	`HAL_GPIO_In
(
GPIOC
, &
GPIO_InSu
);

969 
GPIO_InSu
.
P
 = 
IN_EN6
;

970 
GPIO_InSu
.
Mode
 = 
GPIO_MODE_OUTPUT_PP
;

971 
GPIO_InSu
.
Pu
 = 
GPIO_NOPULL
;

972 
GPIO_InSu
.
Sed
 = 
GPIO_SPEED_FREQ_LOW
;

973 
	`HAL_GPIO_In
(
GPIOC
, &
GPIO_InSu
);

976 
	`HAL_GPIO_WreP
(
GPIOC
, 
IN_EN1
|
IN_EN2
|
IN_EN3
|
IN_EN4
|
IN_EN5
|
IN_EN6
|
IN_EN7
|
IN_EN8
|
UART1_RW
, 
GPIO_PIN_RESET
);

979 
GPIO_InSu
.
P
 = 
GPIO_PIN_0
|
GPIO_PIN_1
|
GPIO_PIN_3
|
GPIO_PIN_4
|
GPIO_PIN_5
|
GPIO_PIN_7
|
GPIO_PIN_8
|
GPIO_PIN_9
;

980 
GPIO_InSu
.
Mode
 = 
GPIO_MODE_OUTPUT_PP
;

981 
GPIO_InSu
.
Pu
 = 
GPIO_NOPULL
;

982 
GPIO_InSu
.
Sed
 = 
GPIO_SPEED_FREQ_HIGH
;

983 
	`HAL_GPIO_In
(
GPIOC
, &
GPIO_InSu
);

986 
GPIO_InSu
.
P
 = 
GPIO_PIN_13
;

987 
GPIO_InSu
.
Mode
 = 
GPIO_MODE_OUTPUT_PP
;

988 
GPIO_InSu
.
Pu
 = 
GPIO_NOPULL
;

989 
GPIO_InSu
.
Sed
 = 
GPIO_SPEED_FREQ_LOW
;

990 
	`HAL_GPIO_In
(
GPIOC
, &
GPIO_InSu
);

993 
	`HAL_GPIO_WreP
(
GPIOC
, 
GPIO_PIN_0
|
GPIO_PIN_1
|
GPIO_PIN_3
|
GPIO_PIN_4
|
GPIO_PIN_5
|
GPIO_PIN_13
|
GPIO_PIN_7
|
GPIO_PIN_8
, 
GPIO_PIN_SET
);

994 
	`HAL_GPIO_WreP
(
GPIOC
, 
GPIO_PIN_9
, 
GPIO_PIN_RESET
);

1000 
GPIO_InSu
.
P
 = 
SV_SIGN1
|
SV_SIGN2
|
SV_SIGN3
|
SV_SIGN4
;

1001 
GPIO_InSu
.
Mode
 = 
GPIO_MODE_OUTPUT_PP
;

1002 
GPIO_InSu
.
Pu
 = 
GPIO_NOPULL
;

1003 
GPIO_InSu
.
Sed
 = 
GPIO_SPEED_FREQ_HIGH
;

1004 
	`HAL_GPIO_In
(
GPIOD
, &
GPIO_InSu
);

1007 
GPIO_InSu
.
P
 = 
ID_D0
|
ID_D1
|
ID_D2
|
ID_D3
;

1008 
GPIO_InSu
.
Mode
 = 
GPIO_MODE_INPUT
;

1009 
GPIO_InSu
.
Pu
 = 
GPIO_NOPULL
;

1010 
	`HAL_GPIO_In
(
GPIOD
, &
GPIO_InSu
);

1013 
	`HAL_GPIO_WreP
(
GPIOD
, 
SV_SIGN1
|
SV_SIGN2
|
SV_SIGN3
|
SV_SIGN4
, 
GPIO_PIN_RESET
);

1016 
GPIO_InSu
.
P
 = 
GPIO_PIN_8
|
GPIO_PIN_9
|
GPIO_PIN_10
|
GPIO_PIN_11
;

1017 
GPIO_InSu
.
Mode
 = 
GPIO_MODE_OUTPUT_PP
;

1018 
GPIO_InSu
.
Pu
 = 
GPIO_NOPULL
;

1019 
GPIO_InSu
.
Sed
 = 
GPIO_SPEED_FREQ_HIGH
;

1020 
	`HAL_GPIO_In
(
GPIOD
, &
GPIO_InSu
);

1023 
GPIO_InSu
.
P
 = 
GPIO_PIN_12
;

1024 
GPIO_InSu
.
Mode
 = 
GPIO_MODE_OUTPUT_PP
;

1025 
GPIO_InSu
.
Pu
 = 
GPIO_NOPULL
;

1026 
GPIO_InSu
.
Sed
 = 
GPIO_SPEED_FREQ_HIGH
;

1027 
	`HAL_GPIO_In
(
GPIOD
, &
GPIO_InSu
);

1030 
GPIO_InSu
.
P
 = 
GPIO_PIN_4
|
GPIO_PIN_5
|
GPIO_PIN_6
|
GPIO_PIN_7
;

1031 
GPIO_InSu
.
Mode
 = 
GPIO_MODE_INPUT
;

1032 
GPIO_InSu
.
Pu
 = 
GPIO_NOPULL
;

1033 
	`HAL_GPIO_In
(
GPIOD
, &
GPIO_InSu
);

1036 
	`HAL_GPIO_WreP
(
GPIOD
, 
GPIO_PIN_8
|
GPIO_PIN_9
|
GPIO_PIN_10
|
GPIO_PIN_11
, 
GPIO_PIN_RESET
);

1042 
GPIO_InSu
.
P
 = 
IN0
|
IN1
|
IN2
|
IN3
|
IN4
|
IN5
|
IN6
|
IN7
;

1043 
GPIO_InSu
.
Mode
 = 
GPIO_MODE_INPUT
;

1044 
GPIO_InSu
.
Pu
 = 
GPIO_NOPULL
;

1045 
	`HAL_GPIO_In
(
GPIOE
, &
GPIO_InSu
);

1048 
GPIO_InSu
.
P
 = 
OUT0
|
OUT1
|
OUT2
|
OUT3
|
OUT4
|
OUT5
|
OUT6
|
OUT7
;

1049 
GPIO_InSu
.
Mode
 = 
GPIO_MODE_OUTPUT_PP
;

1050 
GPIO_InSu
.
Pu
 = 
GPIO_NOPULL
;

1051 
GPIO_InSu
.
Sed
 = 
GPIO_SPEED_FREQ_HIGH
;

1052 
	`HAL_GPIO_In
(
GPIOE
, &
GPIO_InSu
);

1055 
	`HAL_GPIO_WreP
(
GPIOE
, 
OUT0
|
OUT1
|
OUT2
|
OUT3
|
OUT4
|
OUT5
|
OUT6
|
OUT7
, 
GPIO_PIN_RESET
);

1058 
GPIO_InSu
.
P
 = 
GPIO_PIN_0
|
GPIO_PIN_1
|
GPIO_PIN_2
|
GPIO_PIN_3
|
GPIO_PIN_4
|
GPIO_PIN_5
|
GPIO_PIN_6
|
GPIO_PIN_7
;

1059 
GPIO_InSu
.
Mode
 = 
GPIO_MODE_INPUT
;

1061 
GPIO_InSu
.
Pu
 = 
GPIO_PULLDOWN
;

1062 
	`HAL_GPIO_In
(
GPIOE
, &
GPIO_InSu
);

1065 
GPIO_InSu
.
P
 = 
GPIO_PIN_8
|
GPIO_PIN_9
|
GPIO_PIN_10
|
GPIO_PIN_11
|
GPIO_PIN_12
|
GPIO_PIN_13
|
GPIO_PIN_14
|
GPIO_PIN_15
;

1066 
GPIO_InSu
.
Mode
 = 
GPIO_MODE_OUTPUT_PP
;

1067 
GPIO_InSu
.
Pu
 = 
GPIO_NOPULL
;

1068 
GPIO_InSu
.
Sed
 = 
GPIO_SPEED_FREQ_HIGH
;

1069 
	`HAL_GPIO_In
(
GPIOE
, &
GPIO_InSu
);

1072 
	`HAL_GPIO_WreP
(
GPIOE
, 
GPIO_PIN_8
|
GPIO_PIN_9
|
GPIO_PIN_10
|
GPIO_PIN_11
|
GPIO_PIN_12
|
GPIO_PIN_13
|
GPIO_PIN_14
|
GPIO_PIN_15
, 
GPIO_PIN_SET
);

1078 
GPIO_InSu
.
P
 = 
ROE_A
;

1079 
GPIO_InSu
.
Mode
 = 
GPIO_MODE_IT_RISING
;

1080 
GPIO_InSu
.
Pu
 = 
GPIO_NOPULL
;

1081 
	`HAL_GPIO_In
(
GPIOA
, &
GPIO_InSu
);

1084 
GPIO_InSu
.
P
 = 
SV_PULSE1_IN
|
SV_PULSE2_IN
|
SV_PULSE3_IN
|
SV_PULSE4_IN
;

1085 
GPIO_InSu
.
Mode
 = 
GPIO_MODE_IT_RISING
;

1086 
GPIO_InSu
.
Pu
 = 
GPIO_NOPULL
;

1087 
	`HAL_GPIO_In
(
GPIOD
, &
GPIO_InSu
);

1090 
GPIO_InSu
.
P
 = 
GPIO_PIN_5
;

1091 
GPIO_InSu
.
Mode
 = 
GPIO_MODE_IT_RISING
;

1092 
GPIO_InSu
.
Pu
 = 
GPIO_NOPULL
;

1093 
	`HAL_GPIO_In
(
GPIOA
, &
GPIO_InSu
);

1096 
GPIO_InSu
.
P
 = 
GPIO_PIN_0
|
GPIO_PIN_1
|
GPIO_PIN_2
|
GPIO_PIN_3
;

1097 
GPIO_InSu
.
Mode
 = 
GPIO_MODE_IT_RISING
;

1098 
GPIO_InSu
.
Pu
 = 
GPIO_NOPULL
;

1099 
	`HAL_GPIO_In
(
GPIOD
, &
GPIO_InSu
);

1103 
	`HAL_NVIC_SPriܙy
(
EXTI0_IRQn
, 0, 0);

1104 
	`HAL_NVIC_EbIRQ
(
EXTI0_IRQn
);

1106 
	`HAL_NVIC_SPriܙy
(
EXTI1_IRQn
, 0, 0);

1107 
	`HAL_NVIC_EbIRQ
(
EXTI1_IRQn
);

1109 
	`HAL_NVIC_SPriܙy
(
EXTI2_IRQn
, 0, 0);

1110 
	`HAL_NVIC_EbIRQ
(
EXTI2_IRQn
);

1112 
	`HAL_NVIC_SPriܙy
(
EXTI3_IRQn
, 0, 0);

1113 
	`HAL_NVIC_EbIRQ
(
EXTI3_IRQn
);

1115 
	`HAL_NVIC_SPriܙy
(
EXTI9_5_IRQn
, 0, 0);

1116 
	`HAL_NVIC_EbIRQ
(
EXTI9_5_IRQn
);

1117 
	}
}

1124 
	$Vbs
()

1131 
rsC
 = 
READ_SIG_TCNT
;

1132 
rsFg
 = 
READ_SIG_TSTART
;

1134 
swC
 = 
SW_SCAN_TCNT
;

1135 
swFg
 = 
SW_SCAN_TSTART
;

1137 
adcC
 = 
ADC_SCAN_TCNT
;

1138 
adcFg
 = 
ADC_SCAN_TSTART
;

1140 
C
 = 
AP_SCAN_TCNT
;

1141 
Fg
 = 
AP_SCAN_TSTART
;

1143 
comCyeC
 = 
COM_PACKET_CYCLE
;

1144 
comCyeFg
 = 
COM_PACKET_TIM_START
;

1146 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_14
,
RESET
);

1147 
	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_0
,
SET
);

1148 
	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_1
,
SET
);

1149 
	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_3
,
SET
);

1150 
	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_4
,
SET
);

1151 
	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_5
,
SET
);

1152 
	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_13
,
SET
);

1153 
	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_7
,
SET
);

1154 
	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_8
,
SET
);

1168 
Out
[0] |= 0x01;

1169 
Out
[0] |= 0x02;

1170 
Out
[0] &= ~0x04;

1171 
	`outSigl
(
OUT_CH1
,
Out
[0]);

1173 
Out
[1] |= 0x01;

1174 
Out
[1] |= 0x02;

1175 
Out
[1] &= ~0x04;

1176 
	`outSigl
(
OUT_CH2
,
Out
[1]);

1178 
Out
[2] |= 0x01;

1179 
Out
[2] |= 0x02;

1180 
Out
[2] &= ~0x04;

1181 
	`outSigl
(
OUT_CH3
,
Out
[2]);

1183 
Out
[3] |= 0x01;

1184 
Out
[3] |= 0x02;

1185 
Out
[3] &= ~0x04;

1186 
	`outSigl
(
OUT_CH4
,
Out
[3]);

1189 
Out
[4] = 0xff;

1190 
	`outSigl
(
OUT_CH5
,
Out
[4]);

1193 
Out
[5] = 0xff;

1194 
	`outSigl
(
OUT_CH6
,
Out
[5]);

1196 
Out
[6] = 0xff;

1197 
	`outSigl
(
OUT_CH7
,
Out
[6]);

1199 
Out
[7] = 0xff;

1200 
	`outSigl
(
OUT_CH8
,
Out
[7]);

1201 
	}
}

1211 
	$E_Hdr
()

1215 
	`__dib_q
();

1220 
	}
}

1222 #ifde 
USE_FULL_ASSERT


1230 
	$as_ed
(
ut8_t
 *
fe
, 
ut32_t
 
le
)

1236 
	}
}

	@Src/stm32f4xx_hal_msp.c

23 
	~"ma.h
"

62 
HAL_TIM_MPoIn
(
TIM_HdTyDef
 *
htim
);

66 
	$HAL_MIn
()

72 
	`__HAL_RCC_SYSCFG_CLK_ENABLE
();

73 
	`__HAL_RCC_PWR_CLK_ENABLE
();

80 
	}
}

88 
	$HAL_ADC_MIn
(
ADC_HdTyDef
* 
hadc
)

90 
GPIO_InTyDef
 
GPIO_InSu
 = {0};

91 if(
hadc
->
In
==
ADC1
)

97 
	`__HAL_RCC_ADC1_CLK_ENABLE
();

99 
	`__HAL_RCC_GPIOA_CLK_ENABLE
();

103 
GPIO_InSu
.
P
 = 
GPIO_PIN_4
;

104 
GPIO_InSu
.
Mode
 = 
GPIO_MODE_ANALOG
;

105 
GPIO_InSu
.
Pu
 = 
GPIO_NOPULL
;

106 
	`HAL_GPIO_In
(
GPIOA
, &
GPIO_InSu
);

113 
	}
}

121 
	$HAL_ADC_MDeIn
(
ADC_HdTyDef
* 
hadc
)

123 if(
hadc
->
In
==
ADC1
)

129 
	`__HAL_RCC_ADC1_CLK_DISABLE
();

134 
	`HAL_GPIO_DeIn
(
GPIOA
, 
GPIO_PIN_4
);

141 
	}
}

149 
	$HAL_I2C_MIn
(
I2C_HdTyDef
* 
hi2c
)

151 
GPIO_InTyDef
 
GPIO_InSu
 = {0};

152 if(
hi2c
->
In
==
I2C1
)

158 
	`__HAL_RCC_GPIOB_CLK_ENABLE
();

163 
GPIO_InSu
.
P
 = 
GPIO_PIN_6
|
GPIO_PIN_7
;

164 
GPIO_InSu
.
Mode
 = 
GPIO_MODE_AF_OD
;

165 
GPIO_InSu
.
Pu
 = 
GPIO_NOPULL
;

166 
GPIO_InSu
.
Sed
 = 
GPIO_SPEED_FREQ_VERY_HIGH
;

167 
GPIO_InSu
.
Aɔǋ
 = 
GPIO_AF4_I2C1
;

168 
	`HAL_GPIO_In
(
GPIOB
, &
GPIO_InSu
);

171 
	`__HAL_RCC_I2C1_CLK_ENABLE
();

177 
	}
}

185 
	$HAL_I2C_MDeIn
(
I2C_HdTyDef
* 
hi2c
)

187 if(
hi2c
->
In
==
I2C1
)

193 
	`__HAL_RCC_I2C1_CLK_DISABLE
();

199 
	`HAL_GPIO_DeIn
(
GPIOB
, 
GPIO_PIN_6
);

201 
	`HAL_GPIO_DeIn
(
GPIOB
, 
GPIO_PIN_7
);

208 
	}
}

216 
	$HAL_RTC_MIn
(
RTC_HdTyDef
* 
hc
)

218 
RCC_PhCLKInTyDef
 
PhClkInSu
 = {0};

219 if(
hc
->
In
==
RTC
)

226 
PhClkInSu
.
PhClockSei
 = 
RCC_PERIPHCLK_RTC
;

227 
PhClkInSu
.
RTCClockSei
 = 
RCC_RTCCLKSOURCE_LSE
;

228 i(
	`HAL_RCCEx_PhCLKCfig
(&
PhClkInSu
!
HAL_OK
)

230 
	`E_Hdr
();

234 
	`__HAL_RCC_RTC_ENABLE
();

240 
	}
}

248 
	$HAL_RTC_MDeIn
(
RTC_HdTyDef
* 
hc
)

250 if(
hc
->
In
==
RTC
)

256 
	`__HAL_RCC_RTC_DISABLE
();

262 
	}
}

270 
	$HAL_SPI_MIn
(
SPI_HdTyDef
* 
hi
)

272 
GPIO_InTyDef
 
GPIO_InSu
 = {0};

273 if(
hi
->
In
==
SPI2
)

279 
	`__HAL_RCC_SPI2_CLK_ENABLE
();

281 
	`__HAL_RCC_GPIOC_CLK_ENABLE
();

282 
	`__HAL_RCC_GPIOB_CLK_ENABLE
();

288 
GPIO_InSu
.
P
 = 
GPIO_PIN_2
;

289 
GPIO_InSu
.
Mode
 = 
GPIO_MODE_AF_PP
;

290 
GPIO_InSu
.
Pu
 = 
GPIO_NOPULL
;

291 
GPIO_InSu
.
Sed
 = 
GPIO_SPEED_FREQ_VERY_HIGH
;

292 
GPIO_InSu
.
Aɔǋ
 = 
GPIO_AF5_SPI2
;

293 
	`HAL_GPIO_In
(
GPIOC
, &
GPIO_InSu
);

295 
GPIO_InSu
.
P
 = 
GPIO_PIN_13
|
GPIO_PIN_15
;

296 
GPIO_InSu
.
Mode
 = 
GPIO_MODE_AF_PP
;

297 
GPIO_InSu
.
Pu
 = 
GPIO_NOPULL
;

298 
GPIO_InSu
.
Sed
 = 
GPIO_SPEED_FREQ_VERY_HIGH
;

299 
GPIO_InSu
.
Aɔǋ
 = 
GPIO_AF5_SPI2
;

300 
	`HAL_GPIO_In
(
GPIOB
, &
GPIO_InSu
);

306 if(
hi
->
In
==
SPI3
)

312 
	`__HAL_RCC_SPI3_CLK_ENABLE
();

314 
	`__HAL_RCC_GPIOC_CLK_ENABLE
();

320 
GPIO_InSu
.
P
 = 
GPIO_PIN_10
|
GPIO_PIN_11
|
GPIO_PIN_12
;

321 
GPIO_InSu
.
Mode
 = 
GPIO_MODE_AF_PP
;

322 
GPIO_InSu
.
Pu
 = 
GPIO_NOPULL
;

323 
GPIO_InSu
.
Sed
 = 
GPIO_SPEED_FREQ_VERY_HIGH
;

324 
GPIO_InSu
.
Aɔǋ
 = 
GPIO_AF6_SPI3
;

325 
	`HAL_GPIO_In
(
GPIOC
, &
GPIO_InSu
);

332 
	}
}

340 
	$HAL_SPI_MDeIn
(
SPI_HdTyDef
* 
hi
)

342 if(
hi
->
In
==
SPI2
)

348 
	`__HAL_RCC_SPI2_CLK_DISABLE
();

355 
	`HAL_GPIO_DeIn
(
GPIOC
, 
GPIO_PIN_2
);

357 
	`HAL_GPIO_DeIn
(
GPIOB
, 
GPIO_PIN_13
|
GPIO_PIN_15
);

363 if(
hi
->
In
==
SPI3
)

369 
	`__HAL_RCC_SPI3_CLK_DISABLE
();

376 
	`HAL_GPIO_DeIn
(
GPIOC
, 
GPIO_PIN_10
|
GPIO_PIN_11
|
GPIO_PIN_12
);

383 
	}
}

391 
	$HAL_TIM_Ba_MIn
(
TIM_HdTyDef
* 
htim_ba
)

393 if(
htim_ba
->
In
==
TIM2
)

399 
	`__HAL_RCC_TIM2_CLK_ENABLE
();

401 
	`HAL_NVIC_SPriܙy
(
TIM2_IRQn
, 0, 0);

402 
	`HAL_NVIC_EbIRQ
(
TIM2_IRQn
);

407 if(
htim_ba
->
In
==
TIM3
)

413 
	`__HAL_RCC_TIM3_CLK_ENABLE
();

418 if(
htim_ba
->
In
==
TIM4
)

424 
	`__HAL_RCC_TIM4_CLK_ENABLE
();

429 if(
htim_ba
->
In
==
TIM8
)

435 
	`__HAL_RCC_TIM8_CLK_ENABLE
();

441 
	}
}

443 
	$HAL_TIM_MPoIn
(
TIM_HdTyDef
* 
htim
)

445 
GPIO_InTyDef
 
GPIO_InSu
 = {0};

446 if(
htim
->
In
==
TIM3
)

451 
	`__HAL_RCC_GPIOA_CLK_ENABLE
();

455 
GPIO_InSu
.
P
 = 
GPIO_PIN_6
;

456 
GPIO_InSu
.
Mode
 = 
GPIO_MODE_AF_PP
;

457 
GPIO_InSu
.
Pu
 = 
GPIO_NOPULL
;

458 
GPIO_InSu
.
Sed
 = 
GPIO_SPEED_FREQ_HIGH
;

459 
GPIO_InSu
.
Aɔǋ
 = 
GPIO_AF2_TIM3
;

460 
	`HAL_GPIO_In
(
GPIOA
, &
GPIO_InSu
);

466 if(
htim
->
In
==
TIM4
)

472 
	`__HAL_RCC_GPIOD_CLK_ENABLE
();

479 
GPIO_InSu
.
P
 = 
GPIO_PIN_12
|
GPIO_PIN_13
|
GPIO_PIN_14
|
GPIO_PIN_15
;

480 
GPIO_InSu
.
Mode
 = 
GPIO_MODE_AF_PP
;

481 
GPIO_InSu
.
Pu
 = 
GPIO_NOPULL
;

482 
GPIO_InSu
.
Sed
 = 
GPIO_SPEED_FREQ_HIGH
;

483 
GPIO_InSu
.
Aɔǋ
 = 
GPIO_AF2_TIM4
;

484 
	`HAL_GPIO_In
(
GPIOD
, &
GPIO_InSu
);

490 if(
htim
->
In
==
TIM8
)

496 
	`__HAL_RCC_GPIOC_CLK_ENABLE
();

500 
GPIO_InSu
.
P
 = 
GPIO_PIN_6
;

501 
GPIO_InSu
.
Mode
 = 
GPIO_MODE_AF_PP
;

502 
GPIO_InSu
.
Pu
 = 
GPIO_NOPULL
;

503 
GPIO_InSu
.
Sed
 = 
GPIO_SPEED_FREQ_HIGH
;

504 
GPIO_InSu
.
Aɔǋ
 = 
GPIO_AF3_TIM8
;

505 
	`HAL_GPIO_In
(
GPIOC
, &
GPIO_InSu
);

512 
	}
}

519 
	$HAL_TIM_Ba_MDeIn
(
TIM_HdTyDef
* 
htim_ba
)

521 if(
htim_ba
->
In
==
TIM2
)

527 
	`__HAL_RCC_TIM2_CLK_DISABLE
();

530 
	`HAL_NVIC_DibIRQ
(
TIM2_IRQn
);

535 if(
htim_ba
->
In
==
TIM3
)

541 
	`__HAL_RCC_TIM3_CLK_DISABLE
();

546 if(
htim_ba
->
In
==
TIM4
)

552 
	`__HAL_RCC_TIM4_CLK_DISABLE
();

557 if(
htim_ba
->
In
==
TIM8
)

563 
	`__HAL_RCC_TIM8_CLK_DISABLE
();

569 
	}
}

577 
	$HAL_UART_MIn
(
UART_HdTyDef
* 
hut
)

579 
GPIO_InTyDef
 
GPIO_InSu
 = {0};

580 if(
hut
->
In
==
UART4
)

586 
	`__HAL_RCC_UART4_CLK_ENABLE
();

588 
	`__HAL_RCC_GPIOA_CLK_ENABLE
();

593 
GPIO_InSu
.
P
 = 
GPIO_PIN_0
|
GPIO_PIN_1
;

594 
GPIO_InSu
.
Mode
 = 
GPIO_MODE_AF_PP
;

595 
GPIO_InSu
.
Pu
 = 
GPIO_NOPULL
;

596 
GPIO_InSu
.
Sed
 = 
GPIO_SPEED_FREQ_VERY_HIGH
;

597 
GPIO_InSu
.
Aɔǋ
 = 
GPIO_AF8_UART4
;

598 
	`HAL_GPIO_In
(
GPIOA
, &
GPIO_InSu
);

601 
	`HAL_NVIC_SPriܙy
(
UART4_IRQn
, 0, 0);

602 
	`HAL_NVIC_EbIRQ
(
UART4_IRQn
);

607 if(
hut
->
In
==
USART1
)

613 
	`__HAL_RCC_USART1_CLK_ENABLE
();

615 
	`__HAL_RCC_GPIOA_CLK_ENABLE
();

620 
GPIO_InSu
.
P
 = 
GPIO_PIN_9
|
GPIO_PIN_10
;

621 
GPIO_InSu
.
Mode
 = 
GPIO_MODE_AF_PP
;

622 
GPIO_InSu
.
Pu
 = 
GPIO_NOPULL
;

623 
GPIO_InSu
.
Sed
 = 
GPIO_SPEED_FREQ_VERY_HIGH
;

624 
GPIO_InSu
.
Aɔǋ
 = 
GPIO_AF7_USART1
;

625 
	`HAL_GPIO_In
(
GPIOA
, &
GPIO_InSu
);

628 
	`HAL_NVIC_SPriܙy
(
USART1_IRQn
, 0, 0);

629 
	`HAL_NVIC_EbIRQ
(
USART1_IRQn
);

634 if(
hut
->
In
==
USART2
)

640 
	`__HAL_RCC_USART2_CLK_ENABLE
();

642 
	`__HAL_RCC_GPIOA_CLK_ENABLE
();

647 
GPIO_InSu
.
P
 = 
GPIO_PIN_2
|
GPIO_PIN_3
;

648 
GPIO_InSu
.
Mode
 = 
GPIO_MODE_AF_PP
;

649 
GPIO_InSu
.
Pu
 = 
GPIO_NOPULL
;

650 
GPIO_InSu
.
Sed
 = 
GPIO_SPEED_FREQ_VERY_HIGH
;

651 
GPIO_InSu
.
Aɔǋ
 = 
GPIO_AF7_USART2
;

652 
	`HAL_GPIO_In
(
GPIOA
, &
GPIO_InSu
);

655 
	`HAL_NVIC_SPriܙy
(
USART2_IRQn
, 0, 0);

656 
	`HAL_NVIC_EbIRQ
(
USART2_IRQn
);

661 if(
hut
->
In
==
USART3
)

667 
	`__HAL_RCC_USART3_CLK_ENABLE
();

669 
	`__HAL_RCC_GPIOB_CLK_ENABLE
();

674 
GPIO_InSu
.
P
 = 
GPIO_PIN_10
|
GPIO_PIN_11
;

675 
GPIO_InSu
.
Mode
 = 
GPIO_MODE_AF_PP
;

676 
GPIO_InSu
.
Pu
 = 
GPIO_NOPULL
;

677 
GPIO_InSu
.
Sed
 = 
GPIO_SPEED_FREQ_VERY_HIGH
;

678 
GPIO_InSu
.
Aɔǋ
 = 
GPIO_AF7_USART3
;

679 
	`HAL_GPIO_In
(
GPIOB
, &
GPIO_InSu
);

682 
	`HAL_NVIC_SPriܙy
(
USART3_IRQn
, 0, 0);

683 
	`HAL_NVIC_EbIRQ
(
USART3_IRQn
);

688 
	`__HAL_UART_ENABLE_IT
(
hut
,
UART_IT_RXNE
);

689 
	}
}

697 
	$HAL_UART_MDeIn
(
UART_HdTyDef
* 
hut
)

699 if(
hut
->
In
==
UART4
)

705 
	`__HAL_RCC_UART4_CLK_DISABLE
();

711 
	`HAL_GPIO_DeIn
(
GPIOA
, 
GPIO_PIN_0
|
GPIO_PIN_1
);

714 
	`HAL_NVIC_DibIRQ
(
UART4_IRQn
);

719 if(
hut
->
In
==
USART1
)

725 
	`__HAL_RCC_USART1_CLK_DISABLE
();

731 
	`HAL_GPIO_DeIn
(
GPIOA
, 
GPIO_PIN_9
|
GPIO_PIN_10
);

734 
	`HAL_NVIC_DibIRQ
(
USART1_IRQn
);

739 if(
hut
->
In
==
USART2
)

745 
	`__HAL_RCC_USART2_CLK_DISABLE
();

751 
	`HAL_GPIO_DeIn
(
GPIOA
, 
GPIO_PIN_2
|
GPIO_PIN_3
);

754 
	`HAL_NVIC_DibIRQ
(
USART2_IRQn
);

759 if(
hut
->
In
==
USART3
)

765 
	`__HAL_RCC_USART3_CLK_DISABLE
();

771 
	`HAL_GPIO_DeIn
(
GPIOB
, 
GPIO_PIN_10
|
GPIO_PIN_11
);

774 
	`HAL_NVIC_DibIRQ
(
USART3_IRQn
);

779 
	}
}

	@Src/stm32f4xx_it.c

22 
	~"ma.h
"

23 
	~"m32f4xx_.h
"

25 
	~"vfdn_adc.h
"

26 
	~"vfdn_i.h
"

27 
	~"vfdn_com.h
"

28 
	~"vfdn_sub.h
"

29 
	~"vfdn_r.h
"

30 
	~"vfdn_acsv.h
"

31 
	~"vfdn_io_.h
"

68 
TIM_HdTyDef
 
htim2
;

69 
UART_HdTyDef
 
hut4
;

70 
UART_HdTyDef
 
hut1
;

71 
UART_HdTyDef
 
hut2
;

72 
UART_HdTyDef
 
hut3
;

83 
	$NMI_Hdr
()

93 
	}
}

98 
	$HdFau_Hdr
()

108 
	}
}

113 
	$MemMage_Hdr
()

123 
	}
}

128 
	$BusFau_Hdr
()

138 
	}
}

143 
	$UgeFau_Hdr
()

153 
	}
}

158 
	$SVC_Hdr
()

166 
	}
}

171 
	$DebugM_Hdr
()

179 
	}
}

184 
	$PdSV_Hdr
()

192 
	}
}

197 
	$SysTick_Hdr
()

201 if(
sysLedC
 == 0)

203 
LED_RUN_TOG
;

205 
sysLedC
 = 
SYS_LED_TCNT
;

208 
sysLedC
--;

211 
	`HAL_IncTick
();

215 
	}
}

227 
	$EXTI0_IRQHdr
()

231 if(
sysMode
 & 
MODE_AUTO

wRunC
++;

232 if(
sysMode
 & 
MODE_MANUAL
)

234 if(
sysMode
 & 
MODE_MTEST

tSewC
++;

238 
	`HAL_GPIO_EXTI_IRQHdr
(
GPIO_PIN_0
);

242 
	}
}

247 
	$EXTI1_IRQHdr
()

251 if(
loݔFg

loݔC
++;

254 
	`HAL_GPIO_EXTI_IRQHdr
(
GPIO_PIN_1
);

258 
	}
}

263 
	$EXTI2_IRQHdr
()

267 if(
sysMode
 & 
MODE_MANUAL
)

269 if(
sysMode
 & 
MODE_MTEST
)

271 
tMovC
++;

272 
tMovMaxC
++;

275 if(
rMode
 & 0x01
svEtiC
++;

279 if(
sysMode
 & 
MODE_AUTO
)

282 
wMovC
++;

283 
wMovMaxC
++;

285 if(
movFg
 =1
movC
++;

288 
	`HAL_GPIO_EXTI_IRQHdr
(
GPIO_PIN_2
);

292 
	}
}

297 
	$EXTI3_IRQHdr
()

301 if(
sysMode
 & 
MODE_MANUAL
)

304 
svEtiC
++;

307 if(
lfFg
 =1
lfC
++;

309 
	`HAL_GPIO_EXTI_IRQHdr
(
GPIO_PIN_3
);

313 
	}
}

318 
	$EXTI9_5_IRQHdr
()

322 if(
	`__HAL_GPIO_EXTI_GET_IT
(
GPIO_PIN_5
) != 0x00u)

324 if(
sysMode
 & 
MODE_MANUAL
)

327 if(
	`HAL_GPIO_RdP
(
GPIOB
,
ROE_B
) == 0)

332 
rCWNowC
++;

333 
rCCWNowC
 = 0;

334 
rNowFg
 = 1;

344 
rCCWNowC
++;

345 
rCWNowC
 = 0;

346 
rNowFg
 = 2;

353 if(
	`HAL_GPIO_RdP
(
GPIOB
,
GPIO_PIN_3
) == 0)

355 
rEvt
 = 1;

357 
rNowC
++;

361 
rEvt
 = 2;

363 
rNowC
--;

367 
	`__HAL_GPIO_EXTI_CLEAR_IT
(
GPIO_PIN_5
);

375 
	}
}

380 
	$TIM2_IRQHdr
()

383 if(
Fg
 == 1)

385 if(
C
 =0
Fg
 = 2;

386 
C
--;

392 if(
Fg
 =
AP_SCAN_TSTART
)

394 if(
C
 =0
Fg
 = 
AP_SCAN_NOW
;

395 
C
--;

399 if(
CkFg
 =
INIT_TSTART
)

401 if(
CkC
 =0
CkFg
 = 
INIT_TOVER
;

402 
CkC
--;

405 if(
rsFg
 =
READ_SIG_TSTART
)

407 if(
rsC
 =0
rsFg
 = 
READ_SIG_NOW
;

408 
rsC
--;

411 if(
swFg
 =
SW_SCAN_TSTART
)

413 if(
swC
 =0
swFg
 = 
SW_SCAN_NOW
;

414 
swC
--;

417 if(
bcFg
 =
RC_GEN_TSTART
)

419 if(
bcC
 =0
bcFg
 = 
RC_GEN_NOW
;

420 
bcC
--;

424 if(
Fg
[
INIT_STEP_LIFTING
] =
INIT_TSTART
)

426 if(
C
[
INIT_STEP_LIFTING
] =0
Fg
[INIT_STEP_LIFTING] = 
INIT_TOVER
;

427 
C
[
INIT_STEP_LIFTING
]--;

431 if(
Fg
[
INIT_STEP_NEEDLE
] =
INIT_TSTART
)

433 if(
C
[
INIT_STEP_NEEDLE
] =0
Fg
[INIT_STEP_NEEDLE] = 
INIT_TOVER
;

434 
C
[
INIT_STEP_NEEDLE
]--;

438 if(
Fg
[
INIT_STEP_LOOPER
] =
INIT_TSTART
)

440 if(
C
[
INIT_STEP_LOOPER
] =0
Fg
[INIT_STEP_LOOPER] = 
INIT_TOVER
;

441 
C
[
INIT_STEP_LOOPER
]--;

445 if(
Fg
[
INIT_STEP_MOVING
] =
INIT_TSTART
)

447 if(
C
[
INIT_STEP_MOVING
] =0
Fg
[INIT_STEP_MOVING] = 
INIT_TOVER
;

448 
C
[
INIT_STEP_MOVING
]--;

452 if(
Fg
[
INIT_STEP_CLAMP
] =
INIT_TSTART
)

454 if(
C
[
INIT_STEP_CLAMP
] =0
Fg
[INIT_STEP_CLAMP] = 
INIT_TOVER
;

455 
C
[
INIT_STEP_CLAMP
]--;

547 if(
muFg
 =
MANUAL_TSTART
)

549 if(
muC
 =0
muFg
 = 
MANUAL_NOW
;

550 
muC
--;

554 
	`HAL_TIM_IRQHdr
(&
htim2
);

558 
	}
}

563 
	$USART1_IRQHdr
()

566 
tfg
=0,
tc
=0;

568 
tfg
 = 
	`__HAL_UART_GET_FLAG
(&
hut1
, 
UART_FLAG_RXNE
);

569 
tc
 = 
	`__HAL_UART_GET_IT_SOURCE
(&
hut1
, 
UART_IT_RXNE
);

571 if((
tfg
 !
RESET
&& (
tc
 != RESET))

573 
	`__HAL_UART_CLEAR_PEFLAG
(&
hut1
);

581 
	`__HAL_UART_CLEAR_PEFLAG
(&
hut1
);

588 
	}
}

593 
	$USART2_IRQHdr
()

596 
tfg
=0,
tc
=0;

598 
tfg
 = 
	`__HAL_UART_GET_FLAG
(&
hut2
, 
UART_FLAG_RXNE
);

599 
tc
 = 
	`__HAL_UART_GET_IT_SOURCE
(&
hut2
, 
UART_IT_RXNE
);

601 if((
tfg
 !
RESET
&& (
tc
 != RESET))

603 
	`__HAL_UART_CLEAR_PEFLAG
(&
hut2
);

611 
	`__HAL_UART_CLEAR_PEFLAG
(&
hut2
);

618 
	}
}

623 
	$USART3_IRQHdr
()

626 
tfg
=0,
tc
=0;

628 
tfg
 = 
	`__HAL_UART_GET_FLAG
(&
hut3
, 
UART_FLAG_RXNE
);

629 
tc
 = 
	`__HAL_UART_GET_IT_SOURCE
(&
hut3
, 
UART_IT_RXNE
);

631 if((
tfg
 !
RESET
&& (
tc
 != RESET))

633 
	`__HAL_UART_CLEAR_PEFLAG
(&
hut3
);

635 
comBuf
[
comIC
++] = ()(
hut1
.
In
->
DR
 & 0x00ff);

637 if(
comIC
 =
COM_BUF_MAX
) comIntCnt = 0;

641 
	`__HAL_UART_CLEAR_PEFLAG
(&
hut3
);

648 
	}
}

653 
	$UART4_IRQHdr
()

656 
tfg
=0,
tc
=0;

658 
tfg
 = 
	`__HAL_UART_GET_FLAG
(&
hut4
, 
UART_FLAG_RXNE
);

659 
tc
 = 
	`__HAL_UART_GET_IT_SOURCE
(&
hut4
, 
UART_IT_RXNE
);

661 if((
tfg
 !
RESET
&& (
tc
 != RESET))

663 
	`__HAL_UART_CLEAR_PEFLAG
(&
hut4
);

671 
	`__HAL_UART_CLEAR_PEFLAG
(&
hut4
);

678 
	}
}

	@Src/syscalls.c

25 
	~<sys/.h
>

26 
	~<dlib.h
>

27 
	~<o.h
>

28 
	~<dio.h
>

29 
	~<sigl.h
>

30 
	~<time.h
>

31 
	~<sys/time.h
>

32 
	~<sys/times.h
>

36 
	$__io_putch
(
ch

	`__ibu__
((
wk
));

37 
	$__io_gch
(
	`__ibu__
((
wk
));

40 *
__v
[1] = { 0 
	}
};

41 **
	gv
 = 
__v
;

45 
	$li_mڙ_hds
()

47 
	}
}

49 
	$_gpid
()

52 
	}
}

54 
	$_kl
(
pid
, 
sig
)

56 
o
 = 
EINVAL
;

58 
	}
}

60 
	$_ex
 (
us
)

62 
	`_kl
(
us
, -1);

64 
	}
}

66 
__ibu__
((
wk
)
	$_ad
(
fe
, *
r
, 
n
)

68 
DaIdx
;

70 
DaIdx
 = 0; DaIdx < 
n
; DataIdx++)

72 *
r
++ = 
	`__io_gch
();

75  
n
;

76 
	}
}

78 
__ibu__
((
wk
)
	$_wre
(
fe
, *
r
, 
n
)

80 
DaIdx
;

82 
DaIdx
 = 0; DaIdx < 
n
; DataIdx++)

84 
	`__io_putch
(*
r
++);

86  
n
;

87 
	}
}

89 
	$_o
(
fe
)

92 
	}
}

95 
	$_f
(
fe
, 

 *

)

97 

->
_mode
 = 
S_IFCHR
;

99 
	}
}

101 
	$_iy
(
fe
)

104 
	}
}

106 
	$_lek
(
fe
, 
r
, 
d
)

109 
	}
}

111 
	$_ݒ
(*
th
, 
ags
, ...)

115 
	}
}

117 
	$_wa
(*
us
)

119 
o
 = 
ECHILD
;

121 
	}
}

123 
	$_uƚk
(*
me
)

125 
o
 = 
ENOENT
;

127 
	}
}

129 
	$_times
(
tms
 *
buf
)

132 
	}
}

134 
	$_
(*
fe
, 

 *

)

136 

->
_mode
 = 
S_IFCHR
;

138 
	}
}

140 
	$_lk
(*
d
, *
w
)

142 
o
 = 
EMLINK
;

144 
	}
}

146 
	$_fk
()

148 
o
 = 
EAGAIN
;

150 
	}
}

152 
	$_execve
(*
me
, **
gv
, **
v
)

154 
o
 = 
ENOMEM
;

156 
	}
}

	@Src/sysmem.c

25 
	~<o.h
>

26 
	~<dt.h
>

31 
ut8_t
 *
	g__sbrk_hp_d
 = 
NULL
;

54 *
	$_sbrk
(
rdiff_t
 

)

56 
ut8_t
 
_d
;

57 
ut8_t
 
_eack
;

58 
ut32_t
 
_M_Sck_Size
;

59 cڡ 
ut32_t
 
ack_lim
 = (ut32_t)&
_eack
 - (ut32_t)&
_M_Sck_Size
;

60 cڡ 
ut8_t
 *
max_hp
 = (ut8_*)
ack_lim
;

61 
ut8_t
 *
ev_hp_d
;

64 i(
NULL
 =
__sbrk_hp_d
)

66 
__sbrk_hp_d
 = &
_d
;

70 i(
__sbrk_hp_d
 + 

 > 
max_hp
)

72 
o
 = 
ENOMEM
;

76 
ev_hp_d
 = 
__sbrk_hp_d
;

77 
__sbrk_hp_d
 +

;

79  (*)
ev_hp_d
;

80 
	}
}

	@Src/system_stm32f4xx.c

49 
	~"m32f4xx.h
"

51 #i!
defed
 (
HSE_VALUE
)

52 
	#HSE_VALUE
 ((
ut32_t
)25000000

	)

55 #i!
defed
 (
HSI_VALUE
)

56 
	#HSI_VALUE
 ((
ut32_t
)16000000

	)

77 #i
defed
(
STM32F405xx
|| defed(
STM32F415xx
|| defed(
STM32F407xx
|| defed(
STM32F417xx
)\

78 || 
defed
(
STM32F427xx
|| defed(
STM32F437xx
|| defed(
STM32F429xx
|| defed(
STM32F439xx
)\

79 || 
defed
(
STM32F469xx
|| defed(
STM32F479xx
|| defed(
STM32F412Zx
|| 
	$defed
(
STM32F412Vx
)

82 
STM32F412Zx
 || 
STM32F412Vx
 */

84 #i
	`defed
(
STM32F427xx
|| defed(
STM32F437xx
|| defed(
STM32F429xx
|| defed(
STM32F439xx
)\

85 || 
	`defed
(
STM32F446xx
|| defed(
STM32F469xx
|| 
	$defed
(
STM32F479xx
)

88 
STM32F479xx
 */

97 #i
	`defed
(
USER_VECT_TAB_ADDRESS
)

101 #i
	`defed
(
VECT_TAB_SRAM
)

102 
	#VECT_TAB_BASE_ADDRESS
 
SRAM_BASE


	)

104 
	#VECT_TAB_OFFSET
 0x00000000U

	)

107 
	#VECT_TAB_BASE_ADDRESS
 
FLASH_BASE


	)

109 
	#VECT_TAB_OFFSET
 0x00000000U

	)

138 
ut32_t
 
SyemCeClock
 = 16000000;

139 cڡ 
ut8_t
 
AHBPscTab
[16] = {0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 3, 4, 6, 7, 8, 9
	}
};

140 cڡ 
ut8_t
 
	gAPBPscTab
[8] = {0, 0, 0, 0, 1, 2, 3, 4};

149 #i
defed
 (
DATA_IN_ExtSRAM
|| defed (
DATA_IN_ExtSDRAM
)

150 
SyemIn_ExtMemC
();

168 
	$SyemIn
()

171 #i(
__FPU_PRESENT
 =1&& (
__FPU_USED
 == 1)

172 
SCB
->
CPACR
 |= ((3UL << 10*2)|(3UL << 11*2));

175 #i
	`defed
 (
DATA_IN_ExtSRAM
|| defed (
DATA_IN_ExtSDRAM
)

176 
	`SyemIn_ExtMemC
();

180 #i
	`defed
(
USER_VECT_TAB_ADDRESS
)

181 
SCB
->
VTOR
 = 
VECT_TAB_BASE_ADDRESS
 | 
VECT_TAB_OFFSET
;

183 
	}
}

221 
	$SyemCeClockUpde
()

223 
ut32_t
 
tmp
 = 0, 
lvco
 = 0, 

 = 2, 
lsour
 = 0, 
lm
 = 2;

226 
tmp
 = 
RCC
->
CFGR
 & 
RCC_CFGR_SWS
;

228 
tmp
)

231 
SyemCeClock
 = 
HSI_VALUE
;

234 
SyemCeClock
 = 
HSE_VALUE
;

241 
lsour
 = (
RCC
->
PLLCFGR
 & 
RCC_PLLCFGR_PLLSRC
) >> 22;

242 
lm
 = 
RCC
->
PLLCFGR
 & 
RCC_PLLCFGR_PLLM
;

244 i(
lsour
 != 0)

247 
lvco
 = (
HSE_VALUE
 / 
lm
* ((
RCC
->
PLLCFGR
 & 
RCC_PLLCFGR_PLLN
) >> 6);

252 
lvco
 = (
HSI_VALUE
 / 
lm
* ((
RCC
->
PLLCFGR
 & 
RCC_PLLCFGR_PLLN
) >> 6);

255 

 = (((
RCC
->
PLLCFGR
 & 
RCC_PLLCFGR_PLLP
) >>16) + 1 ) *2;

256 
SyemCeClock
 = 
lvco
/

;

259 
SyemCeClock
 = 
HSI_VALUE
;

264 
tmp
 = 
AHBPscTab
[((
RCC
->
CFGR
 & 
RCC_CFGR_HPRE
) >> 4)];

266 
SyemCeClock
 >>
tmp
;

267 
	}
}

269 #i
defed
 (
DATA_IN_ExtSRAM
&& defed (
DATA_IN_ExtSDRAM
)

270 #i
defed
(
STM32F427xx
|| defed(
STM32F437xx
|| defed(
STM32F429xx
|| defed(
STM32F439xx
)\

271 || 
defed
(
STM32F469xx
|| 
	$defed
(
STM32F479xx
)

280 
	$SyemIn_ExtMemC
()

282 
__IO
 
ut32_t
 
tmp
 = 0x00;

284 
ut32_t
 
tmeg
 = 0, 
timeout
 = 0xFFFF;

285 
__IO
 
ut32_t
 
dex
;

288 
RCC
->
AHB1ENR
 |= 0x000001F8;

291 
tmp
 = 
	`READ_BIT
(
RCC
->
AHB1ENR
, 
RCC_AHB1ENR_GPIOCEN
);

294 
GPIOD
->
AFR
[0] = 0x00CCC0CC;

295 
GPIOD
->
AFR
[1] = 0xCCCCCCCC;

297 
GPIOD
->
MODER
 = 0xAAAA0A8A;

299 
GPIOD
->
OSPEEDR
 = 0xFFFF0FCF;

301 
GPIOD
->
OTYPER
 = 0x00000000;

303 
GPIOD
->
PUPDR
 = 0x00000000;

306 
GPIOE
->
AFR
[0] = 0xC00CC0CC;

307 
GPIOE
->
AFR
[1] = 0xCCCCCCCC;

309 
GPIOE
->
MODER
 = 0xAAAA828A;

311 
GPIOE
->
OSPEEDR
 = 0xFFFFC3CF;

313 
GPIOE
->
OTYPER
 = 0x00000000;

315 
GPIOE
->
PUPDR
 = 0x00000000;

318 
GPIOF
->
AFR
[0] = 0xCCCCCCCC;

319 
GPIOF
->
AFR
[1] = 0xCCCCCCCC;

321 
GPIOF
->
MODER
 = 0xAA800AAA;

323 
GPIOF
->
OSPEEDR
 = 0xAA800AAA;

325 
GPIOF
->
OTYPER
 = 0x00000000;

327 
GPIOF
->
PUPDR
 = 0x00000000;

330 
GPIOG
->
AFR
[0] = 0xCCCCCCCC;

331 
GPIOG
->
AFR
[1] = 0xCCCCCCCC;

333 
GPIOG
->
MODER
 = 0xAAAAAAAA;

335 
GPIOG
->
OSPEEDR
 = 0xAAAAAAAA;

337 
GPIOG
->
OTYPER
 = 0x00000000;

339 
GPIOG
->
PUPDR
 = 0x00000000;

342 
GPIOH
->
AFR
[0] = 0x00C0CC00;

343 
GPIOH
->
AFR
[1] = 0xCCCCCCCC;

345 
GPIOH
->
MODER
 = 0xAAAA08A0;

347 
GPIOH
->
OSPEEDR
 = 0xAAAA08A0;

349 
GPIOH
->
OTYPER
 = 0x00000000;

351 
GPIOH
->
PUPDR
 = 0x00000000;

354 
GPIOI
->
AFR
[0] = 0xCCCCCCCC;

355 
GPIOI
->
AFR
[1] = 0x00000CC0;

357 
GPIOI
->
MODER
 = 0x0028AAAA;

359 
GPIOI
->
OSPEEDR
 = 0x0028AAAA;

361 
GPIOI
->
OTYPER
 = 0x00000000;

363 
GPIOI
->
PUPDR
 = 0x00000000;

367 
RCC
->
AHB3ENR
 |= 0x00000001;

369 
tmp
 = 
	`READ_BIT
(
RCC
->
AHB3ENR
, 
RCC_AHB3ENR_FMCEN
);

371 
FMC_Bk5_6
->
SDCR
[0] = 0x000019E4;

372 
FMC_Bk5_6
->
SDTR
[0] = 0x01115351;

376 
FMC_Bk5_6
->
SDCMR
 = 0x00000011;

377 
tmeg
 = 
FMC_Bk5_6
->
SDSR
 & 0x00000020;

378 (
tmeg
 !0&& (
timeout
-- > 0))

380 
tmeg
 = 
FMC_Bk5_6
->
SDSR
 & 0x00000020;

384 
dex
 = 0; index<1000; index++);

387 
FMC_Bk5_6
->
SDCMR
 = 0x00000012;

388 
tmeg
 = 
FMC_Bk5_6
->
SDSR
 & 0x00000020;

389 
timeout
 = 0xFFFF;

390 (
tmeg
 !0&& (
timeout
-- > 0))

392 
tmeg
 = 
FMC_Bk5_6
->
SDSR
 & 0x00000020;

396 
FMC_Bk5_6
->
SDCMR
 = 0x00000073;

397 
tmeg
 = 
FMC_Bk5_6
->
SDSR
 & 0x00000020;

398 
timeout
 = 0xFFFF;

399 (
tmeg
 !0&& (
timeout
-- > 0))

401 
tmeg
 = 
FMC_Bk5_6
->
SDSR
 & 0x00000020;

405 
FMC_Bk5_6
->
SDCMR
 = 0x00046014;

406 
tmeg
 = 
FMC_Bk5_6
->
SDSR
 & 0x00000020;

407 
timeout
 = 0xFFFF;

408 (
tmeg
 !0&& (
timeout
-- > 0))

410 
tmeg
 = 
FMC_Bk5_6
->
SDSR
 & 0x00000020;

414 
tmeg
 = 
FMC_Bk5_6
->
SDRTR
;

415 
FMC_Bk5_6
->
SDRTR
 = (
tmeg
 | (0x0000027C<<1));

418 
tmeg
 = 
FMC_Bk5_6
->
SDCR
[0];

419 
FMC_Bk5_6
->
SDCR
[0] = (
tmeg
 & 0xFFFFFDFF);

421 #i
	`defed
(
STM32F427xx
|| defed(
STM32F437xx
|| defed(
STM32F429xx
|| defed(
STM32F439xx
)

423 
FMC_Bk1
->
BTCR
[2] = 0x00001011;

424 
FMC_Bk1
->
BTCR
[3] = 0x00000201;

425 
FMC_Bk1E
->
BWTR
[2] = 0x0fffffff;

427 #i
	`defed
(
STM32F469xx
|| defed(
STM32F479xx
)

429 
FMC_Bk1
->
BTCR
[2] = 0x00001091;

430 
FMC_Bk1
->
BTCR
[3] = 0x00110212;

431 
FMC_Bk1E
->
BWTR
[2] = 0x0fffffff;

434 ()(
tmp
);

435 
	}
}

437 #i
defed
 (
DATA_IN_ExtSRAM
|| defed (
DATA_IN_ExtSDRAM
)

446 
	$SyemIn_ExtMemC
()

448 
__IO
 
ut32_t
 
tmp
 = 0x00;

449 #i
	`defed
(
STM32F427xx
|| defed(
STM32F437xx
|| defed(
STM32F429xx
|| defed(
STM32F439xx
)\

450 || 
	`defed
(
STM32F446xx
|| defed(
STM32F469xx
|| defed(
STM32F479xx
)

451 #i
	`defed
 (
DATA_IN_ExtSDRAM
)

452 
ut32_t
 
tmeg
 = 0, 
timeout
 = 0xFFFF;

453 
__IO
 
ut32_t
 
dex
;

455 #i
	`defed
(
STM32F446xx
)

458 
RCC
->
AHB1ENR
 |= 0x0000007D;

462 
RCC
->
AHB1ENR
 |= 0x000001F8;

465 
tmp
 = 
	`READ_BIT
(
RCC
->
AHB1ENR
, 
RCC_AHB1ENR_GPIOCEN
);

467 #i
	`defed
(
STM32F446xx
)

469 
GPIOA
->
AFR
[0] |= 0xC0000000;

470 
GPIOA
->
AFR
[1] |= 0x00000000;

472 
GPIOA
->
MODER
 |= 0x00008000;

474 
GPIOA
->
OSPEEDR
 |= 0x00008000;

476 
GPIOA
->
OTYPER
 |= 0x00000000;

478 
GPIOA
->
PUPDR
 |= 0x00000000;

481 
GPIOC
->
AFR
[0] |= 0x00CC0000;

482 
GPIOC
->
AFR
[1] |= 0x00000000;

484 
GPIOC
->
MODER
 |= 0x00000A00;

486 
GPIOC
->
OSPEEDR
 |= 0x00000A00;

488 
GPIOC
->
OTYPER
 |= 0x00000000;

490 
GPIOC
->
PUPDR
 |= 0x00000000;

494 
GPIOD
->
AFR
[0] = 0x000000CC;

495 
GPIOD
->
AFR
[1] = 0xCC000CCC;

497 
GPIOD
->
MODER
 = 0xA02A000A;

499 
GPIOD
->
OSPEEDR
 = 0xA02A000A;

501 
GPIOD
->
OTYPER
 = 0x00000000;

503 
GPIOD
->
PUPDR
 = 0x00000000;

506 
GPIOE
->
AFR
[0] = 0xC00000CC;

507 
GPIOE
->
AFR
[1] = 0xCCCCCCCC;

509 
GPIOE
->
MODER
 = 0xAAAA800A;

511 
GPIOE
->
OSPEEDR
 = 0xAAAA800A;

513 
GPIOE
->
OTYPER
 = 0x00000000;

515 
GPIOE
->
PUPDR
 = 0x00000000;

518 
GPIOF
->
AFR
[0] = 0xCCCCCCCC;

519 
GPIOF
->
AFR
[1] = 0xCCCCCCCC;

521 
GPIOF
->
MODER
 = 0xAA800AAA;

523 
GPIOF
->
OSPEEDR
 = 0xAA800AAA;

525 
GPIOF
->
OTYPER
 = 0x00000000;

527 
GPIOF
->
PUPDR
 = 0x00000000;

530 
GPIOG
->
AFR
[0] = 0xCCCCCCCC;

531 
GPIOG
->
AFR
[1] = 0xCCCCCCCC;

533 
GPIOG
->
MODER
 = 0xAAAAAAAA;

535 
GPIOG
->
OSPEEDR
 = 0xAAAAAAAA;

537 
GPIOG
->
OTYPER
 = 0x00000000;

539 
GPIOG
->
PUPDR
 = 0x00000000;

541 #i
	`defed
(
STM32F427xx
|| defed(
STM32F437xx
|| defed(
STM32F429xx
|| defed(
STM32F439xx
)\

542 || 
	`defed
(
STM32F469xx
|| defed(
STM32F479xx
)

544 
GPIOH
->
AFR
[0] = 0x00C0CC00;

545 
GPIOH
->
AFR
[1] = 0xCCCCCCCC;

547 
GPIOH
->
MODER
 = 0xAAAA08A0;

549 
GPIOH
->
OSPEEDR
 = 0xAAAA08A0;

551 
GPIOH
->
OTYPER
 = 0x00000000;

553 
GPIOH
->
PUPDR
 = 0x00000000;

556 
GPIOI
->
AFR
[0] = 0xCCCCCCCC;

557 
GPIOI
->
AFR
[1] = 0x00000CC0;

559 
GPIOI
->
MODER
 = 0x0028AAAA;

561 
GPIOI
->
OSPEEDR
 = 0x0028AAAA;

563 
GPIOI
->
OTYPER
 = 0x00000000;

565 
GPIOI
->
PUPDR
 = 0x00000000;

570 
RCC
->
AHB3ENR
 |= 0x00000001;

572 
tmp
 = 
	`READ_BIT
(
RCC
->
AHB3ENR
, 
RCC_AHB3ENR_FMCEN
);

575 #i
	`defed
(
STM32F446xx
)

576 
FMC_Bk5_6
->
SDCR
[0] = 0x00001954;

578 
FMC_Bk5_6
->
SDCR
[0] = 0x000019E4;

580 
FMC_Bk5_6
->
SDTR
[0] = 0x01115351;

584 
FMC_Bk5_6
->
SDCMR
 = 0x00000011;

585 
tmeg
 = 
FMC_Bk5_6
->
SDSR
 & 0x00000020;

586 (
tmeg
 !0&& (
timeout
-- > 0))

588 
tmeg
 = 
FMC_Bk5_6
->
SDSR
 & 0x00000020;

592 
dex
 = 0; index<1000; index++);

595 
FMC_Bk5_6
->
SDCMR
 = 0x00000012;

596 
tmeg
 = 
FMC_Bk5_6
->
SDSR
 & 0x00000020;

597 
timeout
 = 0xFFFF;

598 (
tmeg
 !0&& (
timeout
-- > 0))

600 
tmeg
 = 
FMC_Bk5_6
->
SDSR
 & 0x00000020;

604 #i
	`defed
(
STM32F446xx
)

605 
FMC_Bk5_6
->
SDCMR
 = 0x000000F3;

607 
FMC_Bk5_6
->
SDCMR
 = 0x00000073;

609 
tmeg
 = 
FMC_Bk5_6
->
SDSR
 & 0x00000020;

610 
timeout
 = 0xFFFF;

611 (
tmeg
 !0&& (
timeout
-- > 0))

613 
tmeg
 = 
FMC_Bk5_6
->
SDSR
 & 0x00000020;

617 #i
	`defed
(
STM32F446xx
)

618 
FMC_Bk5_6
->
SDCMR
 = 0x00044014;

620 
FMC_Bk5_6
->
SDCMR
 = 0x00046014;

622 
tmeg
 = 
FMC_Bk5_6
->
SDSR
 & 0x00000020;

623 
timeout
 = 0xFFFF;

624 (
tmeg
 !0&& (
timeout
-- > 0))

626 
tmeg
 = 
FMC_Bk5_6
->
SDSR
 & 0x00000020;

630 
tmeg
 = 
FMC_Bk5_6
->
SDRTR
;

631 #i
	`defed
(
STM32F446xx
)

632 
FMC_Bk5_6
->
SDRTR
 = (
tmeg
 | (0x0000050C<<1));

634 
FMC_Bk5_6
->
SDRTR
 = (
tmeg
 | (0x0000027C<<1));

638 
tmeg
 = 
FMC_Bk5_6
->
SDCR
[0];

639 
FMC_Bk5_6
->
SDCR
[0] = (
tmeg
 & 0xFFFFFDFF);

643 #i
	`defed
(
STM32F405xx
|| defed(
STM32F415xx
|| defed(
STM32F407xx
|| defed(
STM32F417xx
)\

644 || 
	`defed
(
STM32F427xx
|| defed(
STM32F437xx
|| defed(
STM32F429xx
|| defed(
STM32F439xx
)\

645 || 
	`defed
(
STM32F469xx
|| defed(
STM32F479xx
|| defed(
STM32F412Zx
|| defed(
STM32F412Vx
)

647 #i
	`defed
(
DATA_IN_ExtSRAM
)

650 
RCC
->
AHB1ENR
 |= 0x00000078;

652 
tmp
 = 
	`READ_BIT
(
RCC
->
AHB1ENR
, 
RCC_AHB1ENR_GPIODEN
);

655 
GPIOD
->
AFR
[0] = 0x00CCC0CC;

656 
GPIOD
->
AFR
[1] = 0xCCCCCCCC;

658 
GPIOD
->
MODER
 = 0xAAAA0A8A;

660 
GPIOD
->
OSPEEDR
 = 0xFFFF0FCF;

662 
GPIOD
->
OTYPER
 = 0x00000000;

664 
GPIOD
->
PUPDR
 = 0x00000000;

667 
GPIOE
->
AFR
[0] = 0xC00CC0CC;

668 
GPIOE
->
AFR
[1] = 0xCCCCCCCC;

670 
GPIOE
->
MODER
 = 0xAAAA828A;

672 
GPIOE
->
OSPEEDR
 = 0xFFFFC3CF;

674 
GPIOE
->
OTYPER
 = 0x00000000;

676 
GPIOE
->
PUPDR
 = 0x00000000;

679 
GPIOF
->
AFR
[0] = 0x00CCCCCC;

680 
GPIOF
->
AFR
[1] = 0xCCCC0000;

682 
GPIOF
->
MODER
 = 0xAA000AAA;

684 
GPIOF
->
OSPEEDR
 = 0xFF000FFF;

686 
GPIOF
->
OTYPER
 = 0x00000000;

688 
GPIOF
->
PUPDR
 = 0x00000000;

691 
GPIOG
->
AFR
[0] = 0x00CCCCCC;

692 
GPIOG
->
AFR
[1] = 0x000000C0;

694 
GPIOG
->
MODER
 = 0x00085AAA;

696 
GPIOG
->
OSPEEDR
 = 0x000CAFFF;

698 
GPIOG
->
OTYPER
 = 0x00000000;

700 
GPIOG
->
PUPDR
 = 0x00000000;

704 
RCC
->
AHB3ENR
 |= 0x00000001;

706 #i
	`defed
(
STM32F427xx
|| defed(
STM32F437xx
|| defed(
STM32F429xx
|| defed(
STM32F439xx
)

708 
tmp
 = 
	`READ_BIT
(
RCC
->
AHB3ENR
, 
RCC_AHB3ENR_FMCEN
);

710 
FMC_Bk1
->
BTCR
[2] = 0x00001011;

711 
FMC_Bk1
->
BTCR
[3] = 0x00000201;

712 
FMC_Bk1E
->
BWTR
[2] = 0x0fffffff;

714 #i
	`defed
(
STM32F469xx
|| defed(
STM32F479xx
)

716 
tmp
 = 
	`READ_BIT
(
RCC
->
AHB3ENR
, 
RCC_AHB3ENR_FMCEN
);

718 
FMC_Bk1
->
BTCR
[2] = 0x00001091;

719 
FMC_Bk1
->
BTCR
[3] = 0x00110212;

720 
FMC_Bk1E
->
BWTR
[2] = 0x0fffffff;

722 #i
	`defed
(
STM32F405xx
|| defed(
STM32F415xx
|| defed(
STM32F407xx
)|| defed(
STM32F417xx
)\

723 || 
	`defed
(
STM32F412Zx
|| defed(
STM32F412Vx
)

725 
tmp
 = 
	`READ_BIT
(
RCC
->
AHB3ENR
, 
RCC_AHB3ENR_FSMCEN
);

727 
FSMC_Bk1
->
BTCR
[2] = 0x00001011;

728 
FSMC_Bk1
->
BTCR
[3] = 0x00000201;

729 
FSMC_Bk1E
->
BWTR
[2] = 0x0FFFFFFF;

734 
STM32F429xx
 || 
STM32F439xx
 || 
STM32F469xx
 || 
STM32F479xx
 || 
STM32F412Zx
 || 
STM32F412Vx
 */

735 ()(
tmp
);

736 
	}
}

	@Src/vfdn_acsv.c

20 
	~"ma.h
"

21 
	~"vfdn_acsv.h
"

22 
	~"vfdn_sub.h
"

24 #ifdef 
__DEBUG_ACSV__


25 
	~"vfdn_com.h
"

50 
	gsvMovMLP
 = 0;

51 
	gsvMovDLP
 = 0;

54 
	gsvSewEtiC
 = 0;

56 
	gsvEtiC
 = 0;

57 
	gsvRC
 = 0;

63 
svMovLCue
();

77 
	$svMovLCue
()

79 
a
=0;

81 
a
 = (()
mL
 / 
ONE_PULSE_MV
)+1;

83 
svMovMLP
 = ()
a
;

84 
	}
}

	@Src/vfdn_adc.c

20 
	~"ma.h
"

21 
	~"vfdn_adc.h
"

22 
	~"vfdn_sub.h
"

24 #ifdef 
__DEBUG_ADC__


25 
	~"vfdn_com.h
"

50 
	gadcFg
 = 0;

51 
	gadcC
 = 0;

52 
	gadcBufC
 = 0;

53 
	gadcBuf
[
ADC_CNT_MAX
];

60 
adcCheck
();

72 
	$adcCheck
()

74 
i
=0,
j
=0;

75 
avr
=0,
sum
=0;

76 
d
=0;

78 if(
adcFg
 =
ADC_SCAN_NOW
)

80 
	`HAL_ADC_S
(&
hadc1
);

82 
	`HAL_ADC_PlFCvsi
(&
hadc1
,
HAL_MAX_DELAY
);

84 
adcBuf
[
adcBufC
++] = 
	`HAL_ADC_GVue
(&
hadc1
);

86 
	`HAL_ADC_St
(&
hadc1
);

88 if(
adcBufC
 =
ADC_CNT_MAX
)

90 
i
=0; i<
ADC_CNT_MAX
-1; i++)

92 
j
=0; j<
ADC_CNT_MAX
-
i
-1; j++)

94 if(
adcBuf
[
j
] >dcBuf[j+
i
])

96 
avr
 = 
adcBuf
[
j
];

97 
adcBuf
[
j
] =dcBuf[j+1];

98 
adcBuf
[
j
+1] = 
avr
;

103 
i
=1; i<
ADC_CNT_MAX
-1; i++)

105 
sum
 +
adcBuf
[
i
];

108 
avr
 = 
sum
/(
ADC_CNT_MAX
-2);

110 
d
 = (3300*()
avr
)/4096;

114 
d
 /= 50;

116 
htCu
 = ()(
d
*10);

118 #ifde
__DEBUG_ADC__


119 
avr
 = ()
d
;

120 
	`putCh
(&
hut1
, ((
avr
/1000)+0x30));

121 
	`putCh
(&
hut1
, (((
avr
%1000)/100)+0x30));

122 
	`putCh
(&
hut1
, ((((
avr
%1000)%100)/10)+0x30));

123 
	`putCh
(&
hut1
, ((
avr
%10)+0x30));

124 
	`putCh
(&
hut1
, '\n');

127 
adcBufC
 = 0;

130 
adcC
 = 
ADC_SCAN_TCNT
;

131 
adcFg
 = 
ADC_SCAN_TSTART
;

133 
	}
}

	@Src/vfdn_com.c

20 
	~"ma.h
"

21 
	~"vfdn_com.h
"

22 
	~"vfdn_c.h
"

23 
	~"vfdn_sub.h
"

24 
	~"vfdn_io_.h
"

47 
	gcomSp
 = 
COM_STEP_STX1
;

48 
	gcomBuf
[
COM_BUF_MAX
];

49 
	gcomBufC
 = 0;

50 
	gcomIC
 = 0;

51 
	gcomEndFg
 = 0;

52 
	gcomDaC
 = 0;

53 
	gcomDaBuf
[
COM_DATA
];

54 
	gcomCyeFg
 = 0;

55 
	gcomCyeC
 = 0;

56 
	gcomSoSt
 = 0;

57 
	gcomOKFg
 = 0;

63 
comCheck
();

64 
comAlysis
();

65 
comDaSt
();

66 
putCh
(
UART_HdTyDef
 * 
t
, 
sda
);

67 
putS
(
UART_HdTyDef
 * 
t
, cڡ *
r
);

80 
	$comCheck
()

82 
mp
=0;

84 if((
comBufC
 !
comIC
&& (
comEndFg
 == 0))

86 
mp
 = 
comBuf
[
comBufC
++];

88 if(
comBufC
 =
COM_BUF_MAX
) comBufCnt = 0;

90 
comSp
)

92 
COM_STEP_STX1
:

93 if(
mp
 =
COM_STX1
)

95 #ifdef 
__DEBUG_COM__


96 
	`putS
(&
hut1
,"STX1\n");

98 
comSp
 = 
COM_STEP_STX2
;

102 
comSp
 = 
COM_STEP_STX1
;

106 
COM_STEP_STX2
:

107 if(
mp
 =
COM_STX2
)

109 #ifdef 
__DEBUG_COM__


110 
	`putS
(&
hut1
,"STX2\n");

112 
comSp
 = 
COM_STEP_DATA
;

113 
comDaC
 = 0;

117 
comSp
 = 
COM_STEP_STX1
;

121 
COM_STEP_DATA
:

122 
comDaBuf
[
comDaC
] = 
mp
;

124 #ifdef 
__DEBUG_COM__


125 
	`putCh
(&
hut1
,
comDaBuf
[
comDaC
]);

128 
comDaC
++;

130 if(
comDaC
 =
COM_DATA
)

132 #ifdef 
__DEBUG_COM__


133 
	`putCh
(&
hut1
,(
comDaC
/10)+0x30);

134 
	`putCh
(&
hut1
,(
comDaC
%10)+0x30);

135 
	`putS
(&
hut1
,"EA DATA END\n");

137 
comSp
 = 
COM_STEP_ETX1
;

142 
COM_STEP_ETX1
:

143 if(
mp
 =
COM_ETX1
)

145 #ifdef 
__DEBUG_COM__


146 
	`putS
(&
hut1
,"ETX1\n");

148 
comSp
 = 
COM_STEP_ETX2
;

152 
comSp
 = 
COM_STEP_STX1
;

156 
COM_STEP_ETX2
:

157 if(
mp
 =
COM_ETX2
)

159 #ifdef 
__DEBUG_COM__


160 
	`putS
(&
hut1
,"ETX2\n");

162 
comEndFg
 = 1;

164 
comCyeC
 = 
COM_PACKET_CYCLE
;

165 
comCyeFg
 = 
COM_PACKET_TIM_START
;

167 
comOKFg
 = 1;

171 
comSp
 = 
COM_STEP_STX1
;

172 
comDaC
 = 0;

181 if(
comCyeFg
 =
COM_PACKET_TIM_OCCUR
)

183 
comCyeFg
 = 
COM_PACKET_TIM_ERROR
;

184 
comCyeC
 = 0;

186 
comEndFg
 = 0;

188 
comOKFg
 = 0;

191 
	}
}

198 
	$comAlysis
()

200 
mp
=0;

203 if(
comEndFg
 == 1)

205 if(
comDaBuf
[0] =
bdID
)

208 
mp
 = ()
comDaBuf
[
COM_METERIAL_LEN
];

210 
mp
 <<= 8;

211 
mp
 &= 0xff00;

213 
mp
 |(()
comDaBuf
[
COM_METERIAL_LEN
+1])&0x00ff;

215 if((
mp
 >
METERIAL_LEN_MIN
&& (m<
METERIAL_LEN_MAX
))

217 
mL
 = 
mp
;

219 
comOKFg
 = 0x01;

224 
comOKFg
 = 0x00;

228 if(
comDaBuf
[
COM_ERROR_CODE
] & 
COM_SOFT_STOP

comSoSt
 = 1;

229 
comSoSt
 = 0;

231 
	`comDaSt
();

233 if(
comDaBuf
[0] == 'T')

235 
rWkDay
 = 
comDaBuf
[1];

236 
rYr
 = 
comDaBuf
[2];

237 
rMth
 = 
comDaBuf
[3];

238 
rDe
 = 
comDaBuf
[4];

239 
rHour
 = 
comDaBuf
[5];

240 
rMu
 = 
comDaBuf
[6];

241 
rSecd
 = 
comDaBuf
[7];

243 
	`tRTCTime
();

249 
comEndFg
 = 0;

251 
	}
}

258 
	$comDaSt
()

260 
t
=0,
tbuf
[19],
i
=0;

262 
tbuf
[
t
++] = 
COM_STX1
;

263 
tbuf
[
t
++] = 
COM_STX2
;

265 
tbuf
[
t
++] = 
bdID
;

266 
tbuf
[
t
++] = 
htCu
;

267 
tbuf
[
t
++] = 
kPa
;

268 
tbuf
[
t
++] = 0;

270 if(
SW
 & 
ST_SW_EMS

tbuf
[
t
] |= 0x01;

271 
tbuf
[
t
] &= ~0x01;

273 if(
SW
 & 
ST_SW_AUTO_MANUAL

tbuf
[
t
++] |= 0x10;

274 
tbuf
[
t
++] &= ~0x10;

276 if(
SEN
 & 
ST_SEN_LIFTING_UP_LIM

tbuf
[
t
] |= 0x01;

277 
tbuf
[
t
] &= ~0x01;

279 if(
SEN
 & 
ST_SEN_LIFTING_DN_LIM

tbuf
[
t
] |= 0x02;

280 
tbuf
[
t
] &= ~0x02;

282 if(
SEN
 & 
ST_SEN_LIFTING_HOME

tbuf
[
t
] |= 0x04;

283 
tbuf
[
t
] &= ~0x04;

285 if(
SEN
 & 
ST_SEN_NEEDLE_HOME

tbuf
[
t
] |= 0x08;

286 
tbuf
[
t
] &= ~0x08;

288 if(
SEN
 & 
ST_SEN_BAND_EMPTY1

tbuf
[
t
] |= 0x10;

289 
tbuf
[
t
] &= ~0x10;

291 if(
SEN
 & 
ST_SEN_BAND_EMPTY2

tbuf
[
t
] |= 0x20;

292 
tbuf
[
t
] &= ~0x20;

294 if(
SEN
 & 
ST_SEN_BAND_LOST1

tbuf
[
t
] |= 0x40;

295 
tbuf
[
t
] &= ~0x40;

297 if(
SEN
 & 
ST_SEN_BAND_LOST2

tbuf
[
t
++] |= 0x80;

298 
tbuf
[
t
++] &= ~0x80;

300 if(
SEN
 & 
ST_SEN_UPPER_THREAD_CUT_OFF

tbuf
[
t
] |= 0x01;

301 
tbuf
[
t
] &= ~0x01;

303 if(
SEN
 & 
ST_SEN_LOOPER_HOME

tbuf
[
t
] |= 0x02;

304 
tbuf
[
t
] &= ~0x02;

306 if(
SEN
 & 
ST_SEN_UNDER_THREAD_CUT_OFF

tbuf
[
t
] |= 0x04;

307 
tbuf
[
t
] &= ~0x04;

309 if(
SEN
 & 
ST_SEN_BAND_INSERT1

tbuf
[
t
] |= 0x08;

310 
tbuf
[
t
] &= ~0x08;

312 if(
SEN
 & 
ST_SEN_BAND_INSERT2

tbuf
[
t
] |= 0x10;

313 
tbuf
[
t
] &= ~0x10;

315 if(
SEN
 & 
ST_SEN_MOVING_BACKWARD_LIM

tbuf
[
t
] |= 0x20;

316 
tbuf
[
t
] &= ~0x20;

318 if(
SEN
 & 
ST_SEN_MOVING_FORWARD_LIM

tbuf
[
t
] |= 0x40;

319 
tbuf
[
t
] &= ~0x40;

321 if(
SEN
 & 
ST_SEN_MOVING_HOME

tbuf
[
t
++] |= 0x80;

322 
tbuf
[
t
++] &= ~0x80;

324 if(
SEN
 & 
ST_SEN_FABRIC_DETECT1

tbuf
[
t
] |= 0x01;

325 
tbuf
[
t
] &= ~0x01;

327 if(
SEN
 & 
ST_SEN_FABRIC_DETECT2

tbuf
[
t
] |= 0x02;

328 
tbuf
[
t
] &= ~0x02;

330 if(
SEN
 & 
ST_SEN_CLAMP12_OPEN

tbuf
[
t
] |= 0x04;

331 
tbuf
[
t
] &= ~0x04;

333 if(
SEN
 & 
ST_SEN_CLAMP12_CLOSE

tbuf
[
t
] |= 0x08;

334 
tbuf
[
t
] &= ~0x08;

336 if(
SEN
 & 
ST_SEN_CLAMP34_OPEN

tbuf
[
t
] |= 0x10;

337 
tbuf
[
t
] &= ~0x10;

339 if(
SEN
 & 
ST_SEN_CLAMP34_CLOSE

tbuf
[
t
++] |= 0x20;

340 
tbuf
[
t
++] &= ~0x20;

342 if(
SEN
 & 
ST_SW_CLAMP1_OPEN_CLOSE

tbuf
[
t
] |= 0x01;

343 
tbuf
[
t
] &= ~0x01;

345 if(
SEN
 & 
ST_SW_CLAMP2_OPEN_CLOSE

tbuf
[
t
] |= 0x02;

346 
tbuf
[
t
] &= ~0x02;

348 if(
SEN
 & 
ST_SW_CLAMP3_OPEN_CLOSE

tbuf
[
t
] |= 0x04;

349 
tbuf
[
t
] &= ~0x04;

351 if(
SEN
 & 
ST_SW_CLAMP4_OPEN_CLOSE

tbuf
[
t
] |= 0x08;

352 
tbuf
[
t
] &= ~0x08;

354 if(
SEN
 & 
ST_SW_VACCUM_OPEN_CLOSE

tbuf
[
t
] |= 0x10;

355 
tbuf
[
t
] &= ~0x10;

357 
tbuf
[
t
++] |(
wA
&0xe0);

359 
tbuf
[
t
] = ()(
mL
>>8);

360 
tbuf
[
t
++] = ()
mL
;

362 
tbuf
[
t
++] = 
rCode
[0];

363 
tbuf
[
t
++] = 
rCode
[1];

364 
tbuf
[
t
++] = 
rCode
[2];

365 
tbuf
[
t
++] = 
rCode
[3];

367 
tbuf
[
t
++] = 
COM_ETX1
;

368 
tbuf
[
t
++] = 
COM_ETX2
;

370 
i
=0; i<
t
; i++)

372 
	`putCh
(&
hut1
, 
tbuf
[
i
]);

374 
	}
}

381 
	$putCh
(
UART_HdTyDef
 * 
t
, 
sda
)

383 
	`HAL_UART_Tnsm
(
t
, (*)&
sda
,1,100);

384 
	}
}

391 
	$putS
(
UART_HdTyDef
 * 
t
, cڡ *
r
)

393 *
r
)

395 
	`putCh
(
t
, *
r
++);

397 
	}
}

	@Src/vfdn_io_cntl.c

21 
	~"ma.h
"

22 
	~"vfdn_io_.h
"

23 
	~"vfdn_sub.h
"

24 
	~"dwt_m32_day.h
"

25 
	~"vfdn_com.h
"

47 
	gscFg
 = 0;

48 
	grsFg
 = 0;

49 
	grsC
 = 0;

50 
	gCh
 = 0;

63 
	gSV
[4];

120 
	gOut
[8];

143 
	gSW
 = 0;

170 
	gSEN
 = 0;

173 #ifde
__DEBUG_IO__


174 
	gSWPv
 = 255;

175 
	gSENPv
 = 255;

176 
	gSVPv
[4];

179 
	gbuff
=0;

180 
	gch
=0;

184 
adID
();

185 
adSigl
(
ch
);

186 
outSigl
(
ch
, 
sda
);

187 
adSiglPross
();

188 
chkE
();

202 
	$adID
()

204 
buf
=0;

211 
buf
 = 
GPIOD
->
IDR
;

213 
buf
 >>= 4;

215 
bdID
 = ()(
buf
 & 0x000f);

216 
	}
}

223 
	$outTe
()

225 if(
rsFg
 =
READ_SIG_NOW
)

227 
	`outSigl
(
ch
,
buff
);

229 
ch
++;

231 if(
ch
 == 8)

233 
ch
 = 0;

235 
buff
++;

237 if(
buff
 == 0x0100) buff = 0;

240 
rsC
 = 99;

241 
rsFg
 = 
READ_SIG_TSTART
;

243 
	}
}

245 
ut16_t
 
	gGPIO_PIN_DEF
[8] = {

246 
GPIO_PIN_0
,

247 
GPIO_PIN_1
,

248 
GPIO_PIN_3
,

249 
GPIO_PIN_4
,

250 
GPIO_PIN_5
,

251 
GPIO_PIN_13
,

252 
GPIO_PIN_7
,

253 
GPIO_PIN_8
,

256 
	$adSigl
(
ch
)

258 
ut32_t
 
buf
;

260 
	`HAL_GPIO_WreP
(
GPIOC
, 
GPIO_PIN_DEF
[
ch
], 
RESET
);

261 
	`DWT_Day_us
(
READ_US_DLY
);

263 
	`HAL_GPIO_WreP
(
GPIOB
, 
GPIO_PIN_14
, 
SET
);

264 
	`DWT_Day_us
(
READ_US_DLY
);

266 
buf
 = 
GPIOE
->
IDR
;

268 
	`DWT_Day_us
(
READ_US_DLY
);

269 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_14
,
RESET
);

271 
	`HAL_GPIO_WreP
(
GPIOC
, 
GPIO_PIN_DEF
[
ch
], 
SET
);

273  (
buf
&0x00ff);

274 
	}
}

282 
	$adSigl
(
ch
)

284 
buf
=0;

287 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_14
,
SET
);

288 
	`DWT_Day_us
(
READ_US_DLY
);

289 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_14
,
RESET
);

290 
	`DWT_Day_us
(
READ_US_DLY
);

293 
ch
)

295 
IN_CH1
:

296 
	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_0
,
RESET
);

297 
	`DWT_Day_us
(
READ_US_DLY
);

302 
IN_CH2
:

303 
	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_1
,
RESET
);

304 
	`DWT_Day_us
(
READ_US_DLY
);

309 
IN_CH3
:

310 
	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_3
,
RESET
);

311 
	`DWT_Day_us
(
READ_US_DLY
);

316 
IN_CH4
:

317 
	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_4
,
RESET
);

318 
	`DWT_Day_us
(
READ_US_DLY
);

323 
IN_CH5
:

324 
	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_5
,
RESET
);

325 
	`DWT_Day_us
(
READ_US_DLY
);

330 
IN_CH6
:

331 
	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_13
,
RESET
);

332 
	`DWT_Day_us
(
READ_US_DLY
);

337 
IN_CH7
:

338 
	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_7
,
RESET
);

339 
	`DWT_Day_us
(
READ_US_DLY
);

344 
IN_CH8
:

345 
	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_8
,
RESET
);

346 
	`DWT_Day_us
(
READ_US_DLY
);

355 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_14
,
SET
);

356 
	`DWT_Day_us
(
READ_US_DLY
);

358 
buf
 = 
GPIOE
->
IDR
;

360 
	`DWT_Day_us
(
READ_US_DLY
);

362 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_14
,
RESET
);

364 if(
ch
 =
IN_CH1

	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_0
,
SET
);

365 if(
ch
 =
IN_CH2

	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_1
,
SET
);

366 if(
ch
 =
IN_CH3

	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_3
,
SET
);

367 if(
ch
 =
IN_CH4

	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_4
,
SET
);

368 if(
ch
 =
IN_CH5

	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_5
,
SET
);

369 if(
ch
 =
IN_CH6

	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_13
,
SET
);

370 if(
ch
 =
IN_CH7

	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_7
,
SET
);

371 if(
ch
 =
IN_CH8

	`HAL_GPIO_WreP
(
GPIOC
,
GPIO_PIN_8
,
SET
);

373  (
buf
&0x00ff);

374 
	}
}

382 
	$outSigl
(
ch
, 
sda
)

384 
sda
 <<= 8;

385 
GPIOE
->
ODR
 = 
sda
;

386 
	`DWT_Day_us
(1);

388 
ch
)

390 
OUT_CH1
:

394 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_0
,
SET
);

395 
	`DWT_Day_us
(
READ_US_DLY
);

397 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_0
,
RESET
);

400 
OUT_CH2
:

404 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_1
,
SET
);

405 
	`DWT_Day_us
(
READ_US_DLY
);

407 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_1
,
RESET
);

410 
OUT_CH3
:

414 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_2
,
SET
);

415 
	`DWT_Day_us
(
READ_US_DLY
);

417 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_2
,
RESET
);

420 
OUT_CH4
:

424 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_4
,
SET
);

425 
	`DWT_Day_us
(
READ_US_DLY
);

427 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_4
,
RESET
);

430 
OUT_CH5
:

434 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_5
,
SET
);

435 
	`DWT_Day_us
(
READ_US_DLY
);

437 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_5
,
RESET
);

440 
OUT_CH6
:

444 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_12
,
SET
);

445 
	`DWT_Day_us
(
READ_US_DLY
);

447 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_12
,
RESET
);

450 
OUT_CH7
:

454 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_8
,
SET
);

455 
	`DWT_Day_us
(
READ_US_DLY
);

457 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_8
,
RESET
);

460 
OUT_CH8
:

464 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_9
,
SET
);

465 
	`DWT_Day_us
(
READ_US_DLY
);

467 
	`HAL_GPIO_WreP
(
GPIOB
,
GPIO_PIN_9
,
RESET
);

473 
	}
}

475 
	sPORT_DEF
 {

478 
ut8_t
 
	mb0
:1;

479 
ut8_t
 
	mb1
:1;

480 
ut8_t
 
	mb2
:1;

481 
ut8_t
 
	mb3
:1;

482 
ut8_t
 
	mb4
:1;

483 
ut8_t
 
	mb5
:1;

484 
ut8_t
 
	mb6
:1;

485 
ut8_t
 
	mb7
:1;

487 
ut8_t
 
	mda
;

489 } 
	gPORT_DATA
[8];

492 
	$adSiglPross
()

494 
ut8_t
 
ad_pt_da
 = 0;

496 
ad_pt_da
 = (
ut8_t

	`adSigl
(
Ch
);

500 
PORT_DATA
[
Ch
].
da
 = 
ad_pt_da
;

504 if(
Ch
 =
IN_CH_MAX
)

506 
scFg
 = 1;

507 
Ch
 = 0;

509 if(
sysSFg
 == 0) sysStartFg = 1;

512 
Ch
++;

513 
	}
}

521 
	$adSiglPross
()

523 
buf
=0;

527 
buf
 = 
	`adSigl
(
Ch
);

529 
buf
 &= 0x00ff;

531 
Ch
)

533 
IN_CH1
:

534 if(!(
buf
 & 
SW_VACCUM_OPEN_CLOSE
)
SW
 |
ST_SW_VACCUM_OPEN_CLOSE
;

535 
SW
 &~
ST_SW_VACCUM_OPEN_CLOSE
;

538 
IN_CH2
:

542 
IN_CH3
:

543 if(!(
buf
 & 
SW_ROE_X
)
SW
 |
ST_SW_ROE_X
;

544 
SW
 &~
ST_SW_ROE_X
;

546 if(!(
buf
 & 
SW_ROE_Y
)
SW
 |
ST_SW_ROE_Y
;

547 
SW
 &~
ST_SW_ROE_Y
;

550 
IN_CH4
:

551 if(!(
buf
 & 
SW_ROE_Z
)
SW
 |
ST_SW_ROE_Z
;

552 
SW
 &~
ST_SW_ROE_Z
;

554 if(!(
buf
 & 
SW_ROE_X1
)
SW
 |
ST_SW_ROE_X1
;

555 
SW
 &~
ST_SW_ROE_X1
;

557 if(!(
buf
 & 
SW_ROE_X10
)
SW
 |
ST_SW_ROE_X10
;

558 
SW
 &~
ST_SW_ROE_X10
;

561 
IN_CH5
:

562 if(
buf
 & 
SEN_LIFTING_DN_LIM

SEN
 |
ST_SEN_LIFTING_DN_LIM
;

563 
SEN
 &~
ST_SEN_LIFTING_DN_LIM
;

565 if(
buf
 & 
SEN_LIFTING_HOME

SEN
 |
ST_SEN_LIFTING_HOME
;

566 
SEN
 &~
ST_SEN_LIFTING_HOME
;

568 if(
buf
 & 
SEN_BAND_EMPTY1

SEN
 |
ST_SEN_BAND_EMPTY1
;

569 
SEN
 &~
ST_SEN_BAND_EMPTY1
;

574 if(
buf
 & 
SEN_MOVING_HOME

SEN
 |
ST_SEN_MOVING_HOME
;

575 
SEN
 &~
ST_SEN_MOVING_HOME
;

577 if(
buf
 & 
SEN_BAND_LOST1

SEN
 |
ST_SEN_BAND_LOST1
;

578 
SEN
 &~
ST_SEN_BAND_LOST1
;

580 if(
buf
 & 
SEN_BAND_LOST2

SEN
 |
ST_SEN_BAND_LOST2
;

581 
SEN
 &~
ST_SEN_BAND_LOST2
;

584 
IN_CH6
:

585 if(
buf
 & 
SEN_UPPER_THREAD_CUT_OFF

SEN
 |
ST_SEN_UPPER_THREAD_CUT_OFF
;

586 
SEN
 &~
ST_SEN_UPPER_THREAD_CUT_OFF
;

588 if(!(
buf
 & 
SEN_LOOPER_HOME
)
SEN
 |
ST_SEN_LOOPER_HOME
;

590 
SEN
 &~
ST_SEN_LOOPER_HOME
;

593 
IN_CH7
:

594 if(!(
buf
 & 
SW_AUTO_MANUAL
)
SW
 |
ST_SW_AUTO_MANUAL
;

595 
SW
 &~
ST_SW_AUTO_MANUAL
;

597 if(!(
buf
 & 
SW_AUTO_START
)
SW
 |
ST_SW_AUTO_START
;

598 
SW
 &~
ST_SW_AUTO_START
;

600 if(!(
buf
 & 
SW_AUTO_STOP
)
SW
 |
ST_SW_AUTO_STOP
;

601 
SW
 &~
ST_SW_AUTO_STOP
;

603 if(!(
buf
 & 
SW_AUTO_RESET
)
SW
 |
ST_SW_AUTO_RESET
;

604 
SW
 &~
ST_SW_AUTO_RESET
;

606 if(!(
buf
 & 
SW_TEST_SEWING
)
SW
 |
ST_SW_TEST_SEWING
;

607 
SW
 &~
ST_SW_TEST_SEWING
;

609 if(
buf
 & 
SEN_LIFTING_UP_LIM

SEN
 |
ST_SEN_LIFTING_UP_LIM
;

610 
SEN
 &~
ST_SEN_LIFTING_UP_LIM
;

612 if(!(
buf
 & 
SEN_NEEDLE_HOME
)
SEN
 |
ST_SEN_NEEDLE_HOME
;

614 
SEN
 &~
ST_SEN_NEEDLE_HOME
;

617 
IN_CH8
:

618 if(!(
buf
 & 
SW_NEEDLE_HOME
)
SW
 |
ST_SW_NEEDLE_HOME
;

619 
SW
 &~
ST_SW_NEEDLE_HOME
;

621 if(!(
buf
 & 
SW_LOOPER_HOME
)
SW
 |
ST_SW_LOOPER_HOME
;

622 
SW
 &~
ST_SW_LOOPER_HOME
;

624 if(!(
buf
 & 
SW_MOVING_HOME
)
SW
 |
ST_SW_MOVING_HOME
;

625 
SW
 &~
ST_SW_MOVING_HOME
;

627 if(!(
buf
 & 
SW_UD_HOME
)
SW
 |
ST_SW_UD_HOME
;

628 
SW
 &~
ST_SW_UD_HOME
;

630 if(!(
buf
 & 
SW_CLAMP1_OPEN_CLOSE
)
SW
 |
ST_SW_CLAMP1_OPEN_CLOSE
;

631 
SW
 &~
ST_SW_CLAMP1_OPEN_CLOSE
;

633 if(!(
buf
 & 
SW_CLAMP2_OPEN_CLOSE
)
SW
 |
ST_SW_CLAMP2_OPEN_CLOSE
;

634 
SW
 &~
ST_SW_CLAMP2_OPEN_CLOSE
;

636 if(!(
buf
 & 
SW_CLAMP3_OPEN_CLOSE
)
SW
 |
ST_SW_CLAMP3_OPEN_CLOSE
;

637 
SW
 &~
ST_SW_CLAMP3_OPEN_CLOSE
;

639 if(!(
buf
 & 
SW_CLAMP4_OPEN_CLOSE
)
SW
 |
ST_SW_CLAMP4_OPEN_CLOSE
;

640 
SW
 &~
ST_SW_CLAMP4_OPEN_CLOSE
;

647 if(
Ch
 =
IN_CH_MAX
)

649 
scFg
 = 1;

650 
Ch
 = 0;

652 if(
sysSFg
 == 0) sysStartFg = 1;

654 #ifde
__DEBUG_IO__


655 if(
SVPv
[
IN_CH1
] !
SV
[IN_CH1])

660 if(
SVPv
[
IN_CH2
] !
SV
[IN_CH2])

665 if(
SVPv
[
IN_CH3
] !
SV
[IN_CH3])

670 if(
SVPv
[
IN_CH4
] !
SV
[IN_CH4])

675 if(
SWPv
 !
SW
)

677 if((
SWPv
 & 
ST_SW_EMS
!(
SW
 & ST_SW_EMS))

679 if(
SW
 & 
ST_SW_EMS

	`putS
(&
hut4
,(const *)"SW EMS LOCK\n");

680 
	`putS
(&
hut4
,(const *)"SW EMS UNLOCK\n");

683 if((
SWPv
 & 
ST_SW_AUTO_MANUAL
!(
SW
 & ST_SW_AUTO_MANUAL))

685 if(
SW
 & 
ST_SW_AUTO_MANUAL

	`putS
(&
hut4
,(const *)"SW MANUAL\n");

686 
	`putS
(&
hut4
,(const *)"SW AUTO\n");

689 if((
SWPv
 & 
ST_SW_AUTO_START
!(
SW
 & ST_SW_AUTO_START))

691 if(
SW
 & 
ST_SW_AUTO_START

	`putS
(&
hut4
,(const *)"SW AUTO START ON\n");

692 
	`putS
(&
hut4
,(const *)"SW AUTO START OFF\n");

695 if((
SWPv
 & 
ST_SW_AUTO_STOP
!(
SW
 & ST_SW_AUTO_STOP))

697 if(
SW
 & 
ST_SW_AUTO_STOP

	`putS
(&
hut4
,(const *)"SW AUTO STOP ON\n");

698 
	`putS
(&
hut4
,(const *)"SW AUTO STOP OFF\n");

701 if((
SWPv
 & 
ST_SW_AUTO_RESET
!(
SW
 & ST_SW_AUTO_RESET))

703 if(
SW
 & 
ST_SW_AUTO_RESET

	`putS
(&
hut4
,(const *)"SW AUTO RESET ON\n");

704 
	`putS
(&
hut4
,(const *)"SW AUTO RESET OFF\n");

707 if((
SWPv
 & 
ST_SW_TEST_SEWING
!(
SW
 & ST_SW_TEST_SEWING))

709 if(
SW
 & 
ST_SW_TEST_SEWING

	`putS
(&
hut4
,(const *)"SW TEST SEWING ON\n");

710 
	`putS
(&
hut4
,(const *)"SW TEST SEWING OFF\n");

713 if((
SWPv
 & 
ST_SW_NEEDLE_HOME
!(
SW
 & ST_SW_NEEDLE_HOME))

715 if(
SW
 & 
ST_SW_NEEDLE_HOME

	`putS
(&
hut4
,(const *)"SW NEEDLE HOME ON\n");

716 
	`putS
(&
hut4
,(const *)"SW NEEDLE HOME OFF\n");

719 if((
SWPv
 & 
ST_SW_LOOPER_HOME
!(
SW
 & ST_SW_LOOPER_HOME))

721 if(
SW
 & 
ST_SW_LOOPER_HOME

	`putS
(&
hut4
,(const *)"SW LOOPER HOME ON\n");

722 
	`putS
(&
hut4
,(const *)"SW LOOPER HOME OFF\n");

725 if((
SWPv
 & 
ST_SW_MOVING_HOME
!(
SW
 & ST_SW_MOVING_HOME))

727 if(
SW
 & 
ST_SW_MOVING_HOME

	`putS
(&
hut4
,(const *)"SW MV HOME ON\n");

728 
	`putS
(&
hut4
,(const *)"SW MV HOME OFF\n");

731 if((
SWPv
 & 
ST_SW_UD_HOME
!(
SW
 & ST_SW_UD_HOME))

733 if(
SW
 & 
ST_SW_UD_HOME

	`putS
(&
hut4
,(const *)"SW UD HOWE ON\n");

734 
	`putS
(&
hut4
,(const *)"SW UD HOWE OFF\n");

737 if((
SWPv
 & 
ST_SW_CLAMP1_OPEN_CLOSE
!(
SW
 & ST_SW_CLAMP1_OPEN_CLOSE))

739 if(
SW
 & 
ST_SW_CLAMP1_OPEN_CLOSE

	`putS
(&
hut4
,(const *)"SW CLAMP1 OP/CL ON\n");

740 
	`putS
(&
hut4
,(const *)"SW CLAMP1 OP/CL OFF\n");

743 if((
SWPv
 & 
ST_SW_CLAMP2_OPEN_CLOSE
!(
SW
 & ST_SW_CLAMP2_OPEN_CLOSE))

745 if(
SW
 & 
ST_SW_CLAMP2_OPEN_CLOSE

	`putS
(&
hut4
,(const *)"SW CLAMP2 OP/CL ON\n");

746 
	`putS
(&
hut4
,(const *)"SW CLAMP2 OP/CL OFF\n");

749 if((
SWPv
 & 
ST_SW_CLAMP3_OPEN_CLOSE
!(
SW
 & ST_SW_CLAMP3_OPEN_CLOSE))

751 if(
SW
 & 
ST_SW_CLAMP3_OPEN_CLOSE

	`putS
(&
hut4
,(const *)"SW CLAMP3 OP/CL ON\n");

752 
	`putS
(&
hut4
,(const *)"SW CLAMP3 OP/CL OFF\n");

755 if((
SWPv
 & 
ST_SW_CLAMP4_OPEN_CLOSE
!(
SW
 & ST_SW_CLAMP4_OPEN_CLOSE))

757 if(
SW
 & 
ST_SW_CLAMP4_OPEN_CLOSE

	`putS
(&
hut4
,(const *)"SW CLAMP4 OP/CL ON\n");

758 
	`putS
(&
hut4
,(const *)"SW CLAMP4 OP/CL OFF\n");

761 if((
SWPv
 & 
ST_SW_VACCUM_OPEN_CLOSE
!(
SW
 & ST_SW_VACCUM_OPEN_CLOSE))

763 if(
SW
 & 
ST_SW_VACCUM_OPEN_CLOSE

	`putS
(&
hut4
,(const *)"SW VACCUM OP/CL ON\n");

764 
	`putS
(&
hut4
,(const *)"SW VACCUM OP/CL OFF\n");

767 if((
SWPv
 & 
ST_SW_BAND_CUT
!(
SW
 & ST_SW_BAND_CUT))

769 if(
SW
 & 
ST_SW_BAND_CUT

	`putS
(&
hut4
,(const *)"SW BAND CUT ON\n");

770 
	`putS
(&
hut4
,(const *)"SW BAND CUT OFF\n");

773 if((
SWPv
 & 
ST_SW_ROE_X
!(
SW
 & ST_SW_ROE_X))

775 if(
SW
 & 
ST_SW_ROE_X

	`putS
(&
hut4
,(const *)"SW ROE X ON\n");

776 
	`putS
(&
hut4
,(const *)"SW ROE X OFF\n");

779 if((
SWPv
 & 
ST_SW_ROE_Y
!(
SW
 & ST_SW_ROE_Y))

781 if(
SW
 & 
ST_SW_ROE_Y

	`putS
(&
hut4
,(const *)"SW ROE Y ON\n");

782 
	`putS
(&
hut4
,(const *)"SW ROE Y OFF\n");

785 if((
SWPv
 & 
ST_SW_ROE_Z
!(
SW
 & ST_SW_ROE_Z))

787 if(
SW
 & 
ST_SW_ROE_Z

	`putS
(&
hut4
,(const *)"SW ROE Z ON\n");

788 
	`putS
(&
hut4
,(const *)"SW ROE Z OFF\n");

791 if((
SWPv
 & 
ST_SW_ROE_X1
!(
SW
 & ST_SW_ROE_X1))

793 if(
SW
 & 
ST_SW_ROE_X1

	`putS
(&
hut4
,(const *)"SW ROE x1 ON\n");

794 
	`putS
(&
hut4
,(const *)"SW ROE x1 OFF\n");

797 if((
SWPv
 & 
ST_SW_ROE_X10
!(
SW
 & ST_SW_ROE_X10))

799 if(
SW
 & 
ST_SW_ROE_X10

	`putS
(&
hut4
,(const *)"SW ROE x10 ON\n");

800 
	`putS
(&
hut4
,(const *)"SW ROE x10 OFF\n");

803 
SWPv
 = 
SW
;

806 if(
SENPv
 !
SEN
)

808 if((
SENPv
 & 
ST_SEN_LIFTING_UP_LIM
!(
SEN
 & ST_SEN_LIFTING_UP_LIM))

810 if(
SEN
 & 
ST_SEN_LIFTING_UP_LIM

	`putS
(&
hut4
,(const *)"SEN LF UP LIM ON\n");

811 
	`putS
(&
hut4
,(const *)"SEN LF UP LIM OFF\n");

814 if((
SENPv
 & 
ST_SEN_LIFTING_DN_LIM
!(
SEN
 & ST_SEN_LIFTING_DN_LIM))

816 if(
SEN
 & 
ST_SEN_LIFTING_DN_LIM

	`putS
(&
hut4
,(const *)"SEN LF DN LIM ON\n");

817 
	`putS
(&
hut4
,(const *)"SEN LF DN LIM OFF\n");

820 if((
SENPv
 & 
ST_SEN_LIFTING_HOME
!(
SEN
 & ST_SEN_LIFTING_HOME))

822 if(
SEN
 & 
ST_SEN_LIFTING_HOME

	`putS
(&
hut4
,(const *)"SEN LF HOME ON\n");

823 
	`putS
(&
hut4
,(const *)"SEN LF HOME OFF\n");

826 if((
SENPv
 & 
ST_SEN_NEEDLE_HOME
!(
SEN
 & ST_SEN_NEEDLE_HOME))

828 if(
SEN
 & 
ST_SEN_NEEDLE_HOME

	`putS
(&
hut4
,(const *)"SEN NEEDLE HOME ON\n");

829 
	`putS
(&
hut4
,(const *)"SEN NEEDLE HOME OFF\n");

832 if((
SENPv
 & 
ST_SEN_BAND_EMPTY1
!(
SEN
 & ST_SEN_BAND_EMPTY1))

834 if(
SEN
 & 
ST_SEN_BAND_EMPTY1

	`putS
(&
hut4
,(const *)"SEN BAND1 EMPTY\n");

835 
	`putS
(&
hut4
,(const *)"SEN BAND1 EMPTY NOR\n");

838 if((
SENPv
 & 
ST_SEN_BAND_EMPTY2
!(
SEN
 & ST_SEN_BAND_EMPTY2))

840 if(
SEN
 & 
ST_SEN_BAND_EMPTY2

	`putS
(&
hut4
,(const *)"SEN BAND2 EMPTY\n");

841 
	`putS
(&
hut4
,(const *)"SEN BAND2 EMPTY NOR\n");

844 if((
SENPv
 & 
ST_SEN_BAND_LOST1
!(
SEN
 & ST_SEN_BAND_LOST1))

846 if(
SEN
 & 
ST_SEN_BAND_LOST1

	`putS
(&
hut4
,(const *)"SEN BAND1 LOST\n");

847 
	`putS
(&
hut4
,(const *)"SEN BAND1 NOR\n");

850 if((
SENPv
 & 
ST_SEN_BAND_LOST2
!(
SEN
 & ST_SEN_BAND_LOST2))

852 if(
SEN
 & 
ST_SEN_BAND_LOST2

	`putS
(&
hut4
,(const *)"SEN BAND2 LOST\n");

853 
	`putS
(&
hut4
,(const *)"SEN BAND2 NOR\n");

856 if((
SENPv
 & 
ST_SEN_UPPER_THREAD_CUT_OFF
!(
SEN
 & ST_SEN_UPPER_THREAD_CUT_OFF))

858 if(
SEN
 & 
ST_SEN_UPPER_THREAD_CUT_OFF

	`putS
(&
hut4
,(const *)"SEN UP THR CUT OFF\n");

859 
	`putS
(&
hut4
,(const *)"SEN UP THR NOR\n");

862 if((
SENPv
 & 
ST_SEN_LOOPER_HOME
!(
SEN
 & ST_SEN_LOOPER_HOME))

864 if(
SEN
 & 
ST_SEN_LOOPER_HOME

	`putS
(&
hut4
,(const *)"SEN LOOPER HOME ON\n");

865 
	`putS
(&
hut4
,(const *)"SEN LOOPER HOME OFF\n");

868 if((
SENPv
 & 
ST_SEN_UNDER_THREAD_CUT_OFF
!(
SEN
 & ST_SEN_UNDER_THREAD_CUT_OFF))

870 if(
SEN
 & 
ST_SEN_UNDER_THREAD_CUT_OFF

	`putS
(&
hut4
,(const *)"SEN UN THR CUT OFF\n");

871 
	`putS
(&
hut4
,(const *)"SEN UN THR NOR\n");

874 if((
SENPv
 & 
ST_SEN_BAND_INSERT1
!(
SEN
 & ST_SEN_BAND_INSERT1))

876 if(
SEN
 & 
ST_SEN_BAND_INSERT1

	`putS
(&
hut4
,(const *)"SEN BAND1 INSERT\n");

877 
	`putS
(&
hut4
,(const *)"SEN BAND1 NO INSERT\n");

880 if((
SENPv
 & 
ST_SEN_BAND_INSERT2
!(
SEN
 & ST_SEN_BAND_INSERT2))

882 if(
SEN
 & 
ST_SEN_BAND_INSERT2

	`putS
(&
hut4
,(const *)"SEN BAND2 INSERT\n");

883 
	`putS
(&
hut4
,(const *)"SEN BAND2 NO INSERT\n");

886 if((
SENPv
 & 
ST_SEN_MOVING_BACKWARD_LIM
!(
SEN
 & ST_SEN_MOVING_BACKWARD_LIM))

888 if(
SEN
 & 
ST_SEN_MOVING_BACKWARD_LIM

	`putS
(&
hut4
,(const *)"SEN MV BACKWARD LIM ON\n");

889 
	`putS
(&
hut4
,(const *)"SEN MV BACKWARD LIM OFF\n");

892 if((
SENPv
 & 
ST_SEN_MOVING_FORWARD_LIM
!(
SEN
 & ST_SEN_MOVING_FORWARD_LIM))

894 if(
SEN
 & 
ST_SEN_MOVING_FORWARD_LIM

	`putS
(&
hut4
,(const *)"SEN MV FORWARD LIM ON\n");

895 
	`putS
(&
hut4
,(const *)"SEN MV FORWARD LIM OFF\n");

898 if((
SENPv
 & 
ST_SEN_MOVING_HOME
!(
SEN
 & ST_SEN_MOVING_HOME))

900 if(
SEN
 & 
ST_SEN_MOVING_HOME

	`putS
(&
hut4
,(const *)"SEN MV HOME ON\n");

901 
	`putS
(&
hut4
,(const *)"SEN MV HOME OFF\n");

904 if((
SENPv
 & 
ST_SEN_FABRIC_DETECT1
!(
SEN
 & ST_SEN_FABRIC_DETECT1))

906 if(
SEN
 & 
ST_SEN_FABRIC_DETECT1

	`putS
(&
hut4
,(const *)"SEN FABR1 DET ON\n");

907 
	`putS
(&
hut4
,(const *)"SEN FABR1 DET OFF\n");

910 if((
SENPv
 & 
ST_SEN_FABRIC_DETECT2
!(
SEN
 & ST_SEN_FABRIC_DETECT2))

912 if(
SEN
 & 
ST_SEN_FABRIC_DETECT2

	`putS
(&
hut4
,(const *)"SEN FABR2 DET ON\n");

913 
	`putS
(&
hut4
,(const *)"SEN FABR2 DET OFF\n");

916 if((
SENPv
 & 
ST_SEN_CLAMP12_OPEN
!(
SEN
 & ST_SEN_CLAMP12_OPEN))

918 if(
SEN
 & 
ST_SEN_CLAMP12_OPEN

	`putS
(&
hut4
,(const *)"SEN CLAMP12 OPEN\n\n");

919 
	`putS
(&
hut4
,(const *)"SEN CLAMP12 OPEN OFF\n");

922 if((
SENPv
 & 
ST_SEN_CLAMP12_OPEN
!(
SEN
 & 
ST_SEN_CLAMP12_CLOSE
))

924 if(
SEN
 & 
ST_SEN_CLAMP12_CLOSE

	`putS
(&
hut4
,(const *)"SEN CLAMP12 CLOSE\n");

925 
	`putS
(&
hut4
,(const *)"SEN CLAMP12 CLOSE OFF\n");

928 if((
SENPv
 & 
ST_SEN_CLAMP34_OPEN
!(
SEN
 & ST_SEN_CLAMP34_OPEN))

930 if(
SEN
 & 
ST_SEN_CLAMP34_OPEN

	`putS
(&
hut4
,(const *)"SEN CLAMP34 OPEN\n");

931 
	`putS
(&
hut4
,(const *)"SEN CLAMP34 OPEN OFF\n");

934 if((
SENPv
 & 
ST_SEN_CLAMP34_CLOSE
!(
SEN
 & ST_SEN_CLAMP34_CLOSE))

936 if(
SEN
 & 
ST_SEN_CLAMP34_CLOSE

	`putS
(&
hut4
,(const *)"SEN CLAMP34 CLOSE\n");

937 
	`putS
(&
hut4
,(const *)"SEN CLAMP34 CLOSE OFF\n");

940 if((
SWPv
 & 
ST_SEN_MOVING_HOME
!(
SW
 & ST_SEN_MOVING_HOME))

942 if(
SW
 & 
ST_SEN_MOVING_HOME

	`putS
(&
hut4
,(const *)"SEN MOV HOME ON\n");

943 
	`putS
(&
hut4
,(const *)"SEN MOV HOME OFF\n");

946 
SENPv
 = 
SEN
;

952 
Ch
++;

958 
	}
}

967 
	$adSiglPross
()

969 
buf
=0;

973 
buf
 = 
	`adSigl
(
Ch
);

975 
buf
 &= 0x00ff;

977 
Ch
)

979 
IN_CH1
:

980 
SV
[
IN_CH1
] = (~
buf
 & 0x05);

982 if(!(
buf
 & 
SW_MOVING_HOME
)
SW
 |
ST_SW_MOVING_HOME
;

983 
SW
 &~
ST_SW_MOVING_HOME
;

985 if(!(
buf
 & 
SW_UD_HOME
)
SW
 |
ST_SW_UD_HOME
;

986 
SW
 &~
ST_SW_UD_HOME
;

988 if(!(
buf
 & 
SW_CLAMP1_OPEN_CLOSE
)
SW
 |
ST_SW_CLAMP1_OPEN_CLOSE
;

989 
SW
 &~
ST_SW_CLAMP1_OPEN_CLOSE
;

992 
IN_CH2
:

993 
SV
[
IN_CH2
] = (~
buf
 & 0x05);

995 if(!(
buf
 & 
SW_CLAMP2_OPEN_CLOSE
)
SW
 |
ST_SW_CLAMP2_OPEN_CLOSE
;

996 
SW
 &~
ST_SW_CLAMP2_OPEN_CLOSE
;

998 if(!(
buf
 & 
SW_CLAMP3_OPEN_CLOSE
)
SW
 |
ST_SW_CLAMP3_OPEN_CLOSE
;

999 
SW
 &~
ST_SW_CLAMP3_OPEN_CLOSE
;

1001 if(!(
buf
 & 
SW_CLAMP4_OPEN_CLOSE
)
SW
 |
ST_SW_CLAMP4_OPEN_CLOSE
;

1002 
SW
 &~
ST_SW_CLAMP4_OPEN_CLOSE
;

1005 
IN_CH3
:

1006 
SV
[
IN_CH3
] = (~
buf
 & 0x05);

1008 if(!(
buf
 & 
SW_VACCUM_OPEN_CLOSE
)
SW
 |
ST_SW_VACCUM_OPEN_CLOSE
;

1009 
SW
 &~
ST_SW_VACCUM_OPEN_CLOSE
;

1011 if(!(
buf
 & 
SW_BAND_CUT
)
SW
 |
ST_SW_BAND_CUT
;

1012 
SW
 &~
ST_SW_BAND_CUT
;

1015 
IN_CH4
:

1016 
SV
[
IN_CH4
] = (~
buf
 & 0x05);

1019 
IN_CH5
:

1020 if(!(
buf
 & 
SW_EMS
)
SW
 |
ST_SW_EMS
;

1021 
SW
 &~
ST_SW_EMS
;

1023 if(!(
buf
 & 
SW_AUTO_MANUAL
)
SW
 |
ST_SW_AUTO_MANUAL
;

1024 
SW
 &~
ST_SW_AUTO_MANUAL
;

1026 if(!(
buf
 & 
SEN_LIFTING_UP_LIM
)
SEN
 |
ST_SEN_LIFTING_UP_LIM
;

1027 
SEN
 &~
ST_SEN_LIFTING_UP_LIM
;

1029 if(!(
buf
 & 
SEN_LIFTING_DN_LIM
)
SEN
 |
ST_SEN_LIFTING_DN_LIM
;

1030 
SEN
 &~
ST_SEN_LIFTING_DN_LIM
;

1032 if(!(
buf
 & 
SEN_LIFTING_HOME
)
SEN
 |
ST_SEN_LIFTING_HOME
;

1033 
SEN
 &~
ST_SEN_LIFTING_HOME
;

1035 if(!(
buf
 & 
SEN_NEEDLE_HOME
)
SEN
 |
ST_SEN_NEEDLE_HOME
;

1036 
SEN
 &~
ST_SEN_NEEDLE_HOME
;

1038 if(!(
buf
 & 
SEN_BAND_EMPTY1
)
SEN
 |
ST_SEN_BAND_EMPTY1
;

1039 
SEN
 &~
ST_SEN_BAND_EMPTY1
;

1041 if(!(
buf
 & 
SEN_BAND_EMPTY2
)
SEN
 |
ST_SEN_BAND_EMPTY2
;

1042 
SEN
 &~
ST_SEN_BAND_EMPTY2
;

1045 
IN_CH6
:

1046 if(!(
buf
 & 
SEN_BAND_LOST1
)
SEN
 |
ST_SEN_BAND_LOST1
;

1047 
SEN
 &~
ST_SEN_BAND_LOST1
;

1049 if(!(
buf
 & 
SEN_BAND_LOST2
)
SEN
 |
ST_SEN_BAND_LOST2
;

1050 
SEN
 &~
ST_SEN_BAND_LOST2
;

1052 if(!(
buf
 & 
SEN_UPPER_THREAD_CUT_OFF
)
SEN
 |
ST_SEN_UPPER_THREAD_CUT_OFF
;

1053 
SEN
 &~
ST_SEN_UPPER_THREAD_CUT_OFF
;

1055 if(!(
buf
 & 
SEN_LOOPER_HOME
)
SEN
 |
ST_SEN_LOOPER_HOME
;

1056 
SEN
 &~
ST_SEN_LOOPER_HOME
;

1058 if(!(
buf
 & 
SEN_UNDER_THREAD_CUT_OFF
)
SEN
 |
ST_SEN_UNDER_THREAD_CUT_OFF
;

1059 
SEN
 &~
ST_SEN_UNDER_THREAD_CUT_OFF
;

1061 if(!(
buf
 & 
SEN_BAND_INSERT1
)
SEN
 |
ST_SEN_BAND_INSERT1
;

1062 
SEN
 &~
ST_SEN_BAND_INSERT1
;

1064 if(!(
buf
 & 
SEN_BAND_INSERT2
)
SEN
 |
ST_SEN_BAND_INSERT2
;

1065 
SEN
 &~
ST_SEN_BAND_INSERT2
;

1067 if(!(
buf
 & 
SEN_MOVING_BACKWARD_LIM
)
SEN
 |
ST_SEN_MOVING_BACKWARD_LIM
;

1068 
SEN
 &~
ST_SEN_MOVING_BACKWARD_LIM
;

1071 
IN_CH7
:

1072 if(!(
buf
 & 
SEN_MOVING_FORWARD_LIM
)
SEN
 |
ST_SEN_MOVING_FORWARD_LIM
;

1073 
SEN
 &~
ST_SEN_MOVING_FORWARD_LIM
;

1075 if(!(
buf
 & 
SEN_MOVING_HOME
)
SEN
 |
ST_SEN_MOVING_HOME
;

1076 
SEN
 &~
ST_SEN_MOVING_HOME
;

1078 if(!(
buf
 & 
SEN_FABRIC_DETECT1
)
SEN
 |
ST_SEN_FABRIC_DETECT1
;

1079 
SEN
 &~
ST_SEN_FABRIC_DETECT1
;

1081 if(!(
buf
 & 
SEN_FABRIC_DETECT2
)
SEN
 |
ST_SEN_FABRIC_DETECT2
;

1082 
SEN
 &~
ST_SEN_FABRIC_DETECT2
;

1084 if(!(
buf
 & 
SEN_CLAMP12_OPEN
)
SEN
 |
ST_SEN_CLAMP12_OPEN
;

1085 
SEN
 &~
ST_SEN_CLAMP12_OPEN
;

1087 if(!(
buf
 & 
SEN_CLAMP12_CLOSE
)
SEN
 |
ST_SEN_CLAMP12_CLOSE
;

1088 
SEN
 &~
ST_SEN_CLAMP12_CLOSE
;

1090 if(!(
buf
 & 
SEN_CLAMP34_OPEN
)
SEN
 |
ST_SEN_CLAMP34_OPEN
;

1091 
SEN
 &~
ST_SEN_CLAMP34_OPEN
;

1093 if(!(
buf
 & 
SEN_CLAMP34_CLOSE
)
SEN
 |
ST_SEN_CLAMP34_CLOSE
;

1094 
SEN
 &~
ST_SEN_CLAMP34_CLOSE
;

1097 
IN_CH8
:

1098 if(!(
buf
 & 
SW_MOVING_FB
)
SW
 |
ST_SW_MOVING_FB
;

1099 
SW
 &~
ST_SW_MOVING_FB
;

1101 if(!(
buf
 & 
SW_MOVING_UD
)
SW
 |
ST_SW_MOVING_UD
;

1102 
SW
 &~
ST_SW_MOVING_UD
;

1104 if(!(
buf
 & 
SW_AUTO_START
)
SW
 |
ST_SW_AUTO_START
;

1105 
SW
 &~
ST_SW_AUTO_START
;

1107 if(!(
buf
 & 
SW_AUTO_STOP
)
SW
 |
ST_SW_AUTO_STOP
;

1108 
SW
 &~
ST_SW_AUTO_STOP
;

1110 if(!(
buf
 & 
SW_AUTO_RESET
)
SW
 |
ST_SW_AUTO_RESET
;

1111 
SW
 &~
ST_SW_AUTO_RESET
;

1113 if(!(
buf
 & 
SW_TEST_SEWING
)
SW
 |
ST_SW_TEST_SEWING
;

1114 
SW
 &~
ST_SW_TEST_SEWING
;

1116 if(!(
buf
 & 
SW_NEEDLE_HOME
)
SW
 |
ST_SW_NEEDLE_HOME
;

1117 
SW
 &~
ST_SW_NEEDLE_HOME
;

1119 if(!(
buf
 & 
SW_LOOPER_HOME
)
SW
 |
ST_SW_LOOPER_HOME
;

1120 
SW
 &~
ST_SW_LOOPER_HOME
;

1127 if(
Ch
 =
IN_CH_MAX
)

1129 
scFg
 = 1;

1130 
Ch
 = 0;

1132 if(
sysSFg
 == 0) sysStartFg = 1;

1134 #ifde
__DEBUG_IO__


1135 if(
SVPv
[
IN_CH1
] !
SV
[IN_CH1])

1137 if((
SVPv
[
IN_CH1
] & 
SV_ALRM
!(
SV
[IN_CH1] & SV_ALRM)
	`putS
(&
hut4
,(const *)"SERVO1 ALARM\n");

1139 if((
SVPv
[
IN_CH1
] & 
SV_RDY
!(
SV
[IN_CH1] & SV_RDY)
	`putS
(&
hut4
,(const *)"SERVO1 RDY\n");

1142 
SVPv
[
IN_CH1
] = 
SV
[IN_CH1];

1145 if(
SVPv
[
IN_CH2
] !
SV
[IN_CH2])

1147 if((
SVPv
[
IN_CH2
] & 
SV_ALRM
!(
SV
[IN_CH2] & SV_ALRM)
	`putS
(&
hut4
,(const *)"SERVO2 ALARM\n");

1149 if((
SVPv
[
IN_CH2
] & 
SV_RDY
!(
SV
[IN_CH2] & SV_RDY)
	`putS
(&
hut4
,(const *)"SERVO2 RDY\n");

1152 
SVPv
[
IN_CH2
] = 
SV
[IN_CH2];

1155 if(
SVPv
[
IN_CH3
] !
SV
[IN_CH3])

1157 if((
SVPv
[
IN_CH3
] & 
SV_ALRM
!(
SV
[IN_CH3] & SV_ALRM)
	`putS
(&
hut4
,(const *)"SERVO3 ALARM\n");

1159 if((
SVPv
[
IN_CH3
] & 
SV_RDY
!(
SV
[IN_CH3] & SV_RDY)
	`putS
(&
hut4
,(const *)"SERVO3 RDY\n");

1162 
SVPv
[
IN_CH3
] = 
SV
[IN_CH3];

1165 if(
SVPv
[
IN_CH4
] !
SV
[IN_CH4])

1167 if((
SVPv
[
IN_CH4
] & 
SV_ALRM
!(
SV
[IN_CH4] & SV_ALRM)
	`putS
(&
hut4
,(const *)"SERVO4 ALARM\n");

1169 if((
SVPv
[
IN_CH4
] & 
SV_RDY
!(
SV
[IN_CH4] & SV_RDY)
	`putS
(&
hut4
,(const *)"SERVO4 RDY\n");

1172 
SVPv
[
IN_CH4
] = 
SV
[IN_CH4];

1175 if(
SWPv
 !
SW
)

1177 if((
SWPv
 & 
ST_SW_EMS
!(
SW
 & ST_SW_EMS)
	`putS
(&
hut4
,(const *)"SW EMS LOCK\n");

1178 
	`putS
(&
hut4
,(const *)"SW EMS UNLOCK\n");

1179 if((
SWPv
 & 
ST_SW_AUTO_MANUAL
!(
SW
 & ST_SW_AUTO_MANUAL)
	`putS
(&
hut4
,(const *)"SW MANUAL\n");

1180 
	`putS
(&
hut4
,(const *)"SW AUTO\n");

1181 if((
SWPv
 & 
ST_SW_MOVING_FB
!(
SW
 & ST_SW_MOVING_FB)
	`putS
(&
hut4
,(const *)"SW MV FB ON\n");

1182 
	`putS
(&
hut4
,(const *)"SW MV FB OFF\n");

1183 if((
SWPv
 & 
ST_SW_MOVING_UD
!(
SW
 & ST_SW_MOVING_UD)
	`putS
(&
hut4
,(const *)"SW MV UD ON\n");

1184 
	`putS
(&
hut4
,(const *)"SW MV UD OFF\n");

1185 if((
SWPv
 & 
ST_SW_AUTO_START
!(
SW
 & ST_SW_AUTO_START)
	`putS
(&
hut4
,(const *)"SW AUTO START ON\n");

1186 
	`putS
(&
hut4
,(const *)"SW AUTO START OFF\n");

1187 if((
SWPv
 & 
ST_SW_AUTO_STOP
!(
SW
 & ST_SW_AUTO_STOP)
	`putS
(&
hut4
,(const *)"SW AUTO STOP ON\n");

1188 
	`putS
(&
hut4
,(const *)"SW AUTO STOP OFF\n");

1189 if((
SWPv
 & 
ST_SW_AUTO_RESET
!(
SW
 & ST_SW_AUTO_RESET)
	`putS
(&
hut4
,(const *)"SW AUTO RESET ON\n");

1190 
	`putS
(&
hut4
,(const *)"SW AUTO RESET OFF\n");

1191 if((
SWPv
 & 
ST_SW_TEST_SEWING
!(
SW
 & ST_SW_TEST_SEWING)
	`putS
(&
hut4
,(const *)"SW TEST SEWING ON\n");

1192 
	`putS
(&
hut4
,(const *)"SW TEST SEWING OFF\n");

1193 if((
SWPv
 & 
ST_SW_NEEDLE_HOME
!(
SW
 & ST_SW_NEEDLE_HOME)
	`putS
(&
hut4
,(const *)"SW NEEDLE HOME ON\n");

1194 
	`putS
(&
hut4
,(const *)"SW NEEDLE HOME OFF\n");

1195 if((
SWPv
 & 
ST_SW_LOOPER_HOME
!(
SW
 & ST_SW_LOOPER_HOME)
	`putS
(&
hut4
,(const *)"SW LOOPER HOME ON\n");

1196 
	`putS
(&
hut4
,(const *)"SW LOOPER HOME OFF\n");

1197 if((
SWPv
 & 
ST_SW_MOVING_HOME
!(
SW
 & ST_SW_MOVING_HOME)
	`putS
(&
hut4
,(const *)"SW MV HOME ON\n");

1198 
	`putS
(&
hut4
,(const *)"SW MV HOME OFF\n");

1199 if((
SWPv
 & 
ST_SW_UD_HOME
!(
SW
 & ST_SW_UD_HOME)
	`putS
(&
hut4
,(const *)"SW UD HOWE ON\n");

1200 
	`putS
(&
hut4
,(const *)"SW UD HOWE OFF\n");

1201 if((
SWPv
 & 
ST_SW_CLAMP1_OPEN_CLOSE
!(
SW
 & ST_SW_CLAMP1_OPEN_CLOSE)
	`putS
(&
hut4
,(const *)"SW CLAMP1 OP/CL ON\n");

1202 
	`putS
(&
hut4
,(const *)"SW CLAMP1 OP/CL OFF\n");

1203 if((
SWPv
 & 
ST_SW_CLAMP2_OPEN_CLOSE
!(
SW
 & ST_SW_CLAMP2_OPEN_CLOSE)
	`putS
(&
hut4
,(const *)"SW CLAMP2 OP/CL ON\n");

1204 
	`putS
(&
hut4
,(const *)"SW CLAMP2 OP/CL OFF\n");

1205 if((
SWPv
 & 
ST_SW_CLAMP3_OPEN_CLOSE
!(
SW
 & ST_SW_CLAMP3_OPEN_CLOSE)
	`putS
(&
hut4
,(const *)"SW CLAMP3 OP/CL ON\n");

1206 
	`putS
(&
hut4
,(const *)"SW CLAMP3 OP/CL OFF\n");

1207 if((
SWPv
 & 
ST_SW_CLAMP4_OPEN_CLOSE
!(
SW
 & ST_SW_CLAMP4_OPEN_CLOSE)
	`putS
(&
hut4
,(const *)"SW CLAMP4 OP/CL ON\n");

1208 
	`putS
(&
hut4
,(const *)"SW CLAMP4 OP/CL OFF\n");

1209 if((
SWPv
 & 
ST_SW_VACCUM_OPEN_CLOSE
!(
SW
 & ST_SW_VACCUM_OPEN_CLOSE)
	`putS
(&
hut4
,(const *)"SW VACCUM OP/CL ON\n");

1210 
	`putS
(&
hut4
,(const *)"SW VACCUM OP/CL OFF\n");

1211 if((
SWPv
 & 
ST_SW_BAND_CUT
!(
SW
 & ST_SW_BAND_CUT)
	`putS
(&
hut4
,(const *)"SW BAND CUT ON\n");

1212 
	`putS
(&
hut4
,(const *)"SW BAND CUT OFF\n");

1214 
SWPv
 = 
SW
;

1218 if(
SWPv
 !
SEN
)

1220 if((
SENPv
 & 
ST_SEN_LIFTING_UP_LIM
!(
SEN
 & ST_SEN_LIFTING_UP_LIM)
	`putS
(&
hut4
,(const *)"SEN LF UP LIM ON\n");

1221 
	`putS
(&
hut4
,(const *)"SEN LF UP LIM OFF\n");

1222 if((
SENPv
 & 
ST_SEN_LIFTING_DN_LIM
!(
SEN
 & ST_SEN_LIFTING_DN_LIM)
	`putS
(&
hut4
,(const *)"SEN LF DN LIM ON\n");

1223 
	`putS
(&
hut4
,(const *)"SEN LF DN LIM OFF\n");

1224 if((
SENPv
 & 
ST_SEN_LIFTING_HOME
!(
SEN
 & ST_SEN_LIFTING_HOME)
	`putS
(&
hut4
,(const *)"SEN LF HOME ON\n");

1225 
	`putS
(&
hut4
,(const *)"SEN LF HOME OFF\n");

1226 if((
SENPv
 & 
ST_SEN_NEEDLE_HOME
!(
SEN
 & ST_SEN_NEEDLE_HOME)
	`putS
(&
hut4
,(const *)"SEN NEEDLE HOME ON\n");

1227 
	`putS
(&
hut4
,(const *)"SEN NEEDLE HOME OFF\n");

1228 if((
SENPv
 & 
ST_SEN_BAND_EMPTY1
!(
SEN
 & ST_SEN_BAND_EMPTY1)
	`putS
(&
hut4
,(const *)"SEN BAND1 EMPTY\n");

1229 
	`putS
(&
hut4
,(const *)"SEN BAND1 EMPTY NOR\n");

1230 if((
SENPv
 & 
ST_SEN_BAND_EMPTY2
!(
SEN
 & ST_SEN_BAND_EMPTY2)
	`putS
(&
hut4
,(const *)"SEN BAND2 EMPTY\n");

1231 
	`putS
(&
hut4
,(const *)"SEN BAND2 EMPTY NOR\n");

1232 if((
SENPv
 & 
ST_SEN_BAND_LOST1
!(
SEN
 & ST_SEN_BAND_LOST1)
	`putS
(&
hut4
,(const *)"SEN BAND1 LOST\n");

1233 
	`putS
(&
hut4
,(const *)"SEN BAND1 NOR\n");

1234 if((
SENPv
 & 
ST_SEN_BAND_LOST2
!(
SEN
 & ST_SEN_BAND_LOST2)
	`putS
(&
hut4
,(const *)"SEN BAND2 LOST\n");

1235 
	`putS
(&
hut4
,(const *)"SEN BAND2 NOR\n");

1236 if((
SENPv
 & 
ST_SEN_UPPER_THREAD_CUT_OFF
!(
SEN
 & ST_SEN_UPPER_THREAD_CUT_OFF)
	`putS
(&
hut4
,(const *)"SEN UP THR CUT OFF\n");

1237 
	`putS
(&
hut4
,(const *)"SEN UP THR NOR\n");

1238 if((
SENPv
 & 
ST_SEN_LOOPER_HOME
!(
SEN
 & ST_SEN_LOOPER_HOME)
	`putS
(&
hut4
,(const *)"SEN LOOPER HOME ON\n");

1239 
	`putS
(&
hut4
,(const *)"SEN LOOPER HOME OFF\n");

1240 if((
SENPv
 & 
ST_SEN_UNDER_THREAD_CUT_OFF
!(
SEN
 & ST_SEN_UNDER_THREAD_CUT_OFF)
	`putS
(&
hut4
,(const *)"SEN UN THR CUT OFF\n");

1241 
	`putS
(&
hut4
,(const *)"SEN UN THR NOR\n");

1242 if((
SENPv
 & 
ST_SEN_BAND_INSERT1
!(
SEN
 & ST_SEN_BAND_INSERT1)
	`putS
(&
hut4
,(const *)"SEN BAND1 INSERT\n");

1243 
	`putS
(&
hut4
,(const *)"SEN BAND1 NO INSERT\n");

1244 if((
SENPv
 & 
ST_SEN_BAND_INSERT2
!(
SEN
 & ST_SEN_BAND_INSERT2)
	`putS
(&
hut4
,(const *)"SEN BAND2 INSERT\n");

1245 
	`putS
(&
hut4
,(const *)"SEN BAND2 NO INSERT\n");

1246 if((
SENPv
 & 
ST_SEN_MOVING_BACKWARD_LIM
!(
SEN
 & ST_SEN_MOVING_BACKWARD_LIM)
	`putS
(&
hut4
,(const *)"SEN MV BACKWARD LIM ON\n");

1247 
	`putS
(&
hut4
,(const *)"SEN MV BACKWARD LIM OFF\n");

1248 if((
SENPv
 & 
ST_SEN_MOVING_FORWARD_LIM
!(
SEN
 & ST_SEN_MOVING_FORWARD_LIM)
	`putS
(&
hut4
,(const *)"SEN MV FORWARD LIM ON\n");

1249 
	`putS
(&
hut4
,(const *)"SEN MV FORWARD LIM OFF\n");

1250 if((
SENPv
 & 
ST_SEN_MOVING_HOME
!(
SEN
 & ST_SEN_MOVING_HOME)
	`putS
(&
hut4
,(const *)"SEN MV HOME ON\n");

1251 
	`putS
(&
hut4
,(const *)"SEN MV HOME OFF\n");

1252 if((
SENPv
 & 
ST_SEN_FABRIC_DETECT1
!(
SEN
 & ST_SEN_FABRIC_DETECT1)
	`putS
(&
hut4
,(const *)"SEN FABR1 DET ON\n");

1253 
	`putS
(&
hut4
,(const *)"SEN FABR1 DET OFF\n");

1254 if((
SENPv
 & 
ST_SEN_FABRIC_DETECT2
!(
SEN
 & ST_SEN_FABRIC_DETECT2)
	`putS
(&
hut4
,(const *)"SEN FABR2 DET ON\n");

1255 
	`putS
(&
hut4
,(const *)"SEN FABR2 DET OFF\n");

1256 if((
SENPv
 & 
ST_SEN_CLAMP12_OPEN
!(
SEN
 & ST_SEN_CLAMP12_OPEN)
	`putS
(&
hut4
,(const *)"SEN CLAMP12 OPEN\n\n");

1257 
	`putS
(&
hut4
,(const *)"SEN CLAMP12 OPEN OFF\n");

1258 if((
SENPv
 & 
ST_SEN_CLAMP12_OPEN
!(
SEN
 & 
ST_SEN_CLAMP12_CLOSE
)
	`putS
(&
hut4
,(const *)"SEN CLAMP12 CLOSE\n");

1259 
	`putS
(&
hut4
,(const *)"SEN CLAMP12 CLOSE OFF\n");

1260 if((
SENPv
 & 
ST_SEN_CLAMP34_OPEN
!(
SEN
 & ST_SEN_CLAMP34_OPEN)
	`putS
(&
hut4
,(const *)"SEN CLAMP34 OPEN\n");

1261 
	`putS
(&
hut4
,(const *)"SEN CLAMP34 OPEN OFF\n");

1262 if((
SENPv
 & 
ST_SEN_CLAMP34_CLOSE
!(
SEN
 & ST_SEN_CLAMP34_CLOSE)
	`putS
(&
hut4
,(const *)"SEN CLAMP34 CLOSE\n");

1263 
	`putS
(&
hut4
,(const *)"SEN CLAMP34 CLOSE OFF\n");

1265 
	`putCh
(&
hut4
,'\n');

1267 
SWPv
 = 
SEN
;

1274 
Ch
++;

1280 
	}
}

1288 
	$chkE
()

1290 if(
scFg
 == 1)

1292 
scFg
 = 0;

1304 if(
SW
 & 
ST_SW_EMS

rCode
[0] |= 0x01;

1305 
rCode
[0] &= ~0x01;

1307 if(
comCyeFg
 =
COM_PACKET_TIM_ERROR

rCode
[0] |= 0x02;

1308 
rCode
[0] &= ~0x02;

1312 if((
kPa
 > 
AP_KPA_MIN
&& (kP< 
AP_KPA_MAX
)
rCode
[0] &= ~0x08;

1313 
rCode
[0] |= 0x08;

1315 if(
SEN
 & 
ST_SEN_LIFTING_UP_LIM

rCode
[0] |= 0x10;

1316 
rCode
[0] &= ~0x10;

1318 if(
SEN
 & 
ST_SEN_LIFTING_DN_LIM

rCode
[0] |= 0x20;

1319 
rCode
[0] &= ~0x20;

1339 if(
SEN
 & 
ST_SEN_MOVING_BACKWARD_LIM

rCode
[1] |= 0x02;

1340 
rCode
[1] &= ~0x02;

1342 if(
SEN
 & 
ST_SEN_MOVING_FORWARD_LIM

rCode
[1] |= 0x04;

1343 
rCode
[1] &= ~0x04;

1347 if(
SEN
 & 
ST_SEN_BAND_EMPTY1

rCode
[1] |= 0x10;

1348 
rCode
[1] &= ~0x10;

1350 if(
SEN
 & 
ST_SEN_BAND_EMPTY2

rCode
[1] |= 0x20;

1351 
rCode
[1] &= ~0x20;

1353 if(
SEN
 & 
ST_SEN_BAND_LOST1

rCode
[1] |= 0x40;

1354 
rCode
[1] &= ~0x40;

1356 if(
SEN
 & 
ST_SEN_BAND_LOST2

rCode
[1] |= 0x80;

1357 
rCode
[1] &= ~0x80;

1371 if(
SEN
 & 
ST_SEN_UPPER_THREAD_CUT_OFF

rCode
[2] |= 0x01;

1372 
rCode
[2] &= ~0x01;

1374 if(
SEN
 & 
ST_SEN_UNDER_THREAD_CUT_OFF

rCode
[2] |= 0x02;

1375 
rCode
[2] &= ~0x02;

1378 if(
SEN
 & 
ST_SEN_CLAMP12_OPEN

rCode
[2] |= 0x04;

1379 
rCode
[2] &= ~0x04;

1381 if(
SEN
 & 
ST_SEN_CLAMP12_CLOSE

rCode
[2] |= 0x08;

1382 
rCode
[2] &= ~0x08;

1385 if(
SEN
 & 
ST_SEN_CLAMP34_OPEN

rCode
[2] |= 0x10;

1386 
rCode
[2] &= ~0x10;

1388 if(
SEN
 & 
ST_SEN_CLAMP34_CLOSE

rCode
[2] |= 0x20;

1389 
rCode
[2] &= ~0x20;

1410 if(
SV
[0] & 
ST_SV_ALRM

rCode
[3] |= 0x01;

1411 
rCode
[3] &= ~0x01;

1413 if(
SV
[1] & 
ST_SV_ALRM

rCode
[3] |= 0x02;

1414 
rCode
[3] &= ~0x02;

1416 if(
SV
[2] & 
ST_SV_ALRM

rCode
[3] |= 0x04;

1417 
rCode
[3] &= ~0x04;

1419 if(
SV
[3] & 
ST_SV_ALRM

rCode
[3] |= 0x08;

1420 
rCode
[3] &= ~0x08;

1422 if(
SV
[0] & 
ST_SV_RDY

svRdy
 |= 0x01;

1423 
svRdy
 &= ~0x01;

1425 if(
SV
[1] & 
ST_SV_RDY

svRdy
 |= 0x02;

1426 
svRdy
 &= ~0x02;

1428 if(
SV
[2] & 
ST_SV_RDY

svRdy
 |= 0x04;

1429 
svRdy
 &= ~0x04;

1431 if(
SV
[3] & 
ST_SV_RDY

svRdy
 |= 0x08;

1432 
svRdy
 &= ~0x08;

1434 
	}
}

	@Src/vfdn_roe.c

20 
	~"ma.h
"

21 
	~"vfdn_r.h
"

23 #ifdef 
__DEBUG_ROE__


24 
	~"vfdn_com.h
"

50 
	grNowFg
 = 0;

51 
	grPvFg
 = 0;

52 
	grCWNowC
 = 0;

53 
	grCCWNowC
 = 0;

54 
	grPvC
 = 0;

56 sigd 
	grNowC
 = 0;

57 sigd 
	grPvC
 = 0;

58 
	grEvt
 = 0;

59 
	grDFg
 = 0;

79 
	$rCheck
()

81 if(
rEvt
)

84 
rEvt
 = 0;

86 
	}
}

	@Src/vfdn_rtc.c

20 
	~"ma.h
"

21 
	~"vfdn_c.h
"

23 #ifdef 
__DEBUG_RTC__


24 
	~"vfdn_com.h
"

49 
	grYr
 = 21;

50 
	grMth
 = 12;

51 
	grDe
 = 1;

52 
	grHour
 = 0;

53 
	grMu
 = 0;

54 
	grSecd
 = 0;

55 
	grWkDay
 = 
RTC_WEEKDAY_WEDNESDAY
;

61 
gRTCTime
();

62 
tRTCTime
();

75 
	$gRTCTime
()

80 
	`HAL_RTC_GTime
(&
hc
,&
sTime
,
RTC_FORMAT_BIN
);

81 
	`HAL_RTC_GDe
(&
hc
,&
sDe
,
RTC_FORMAT_BIN
);

83 
rWkDay
 = 
sDe
.
WkDay
;

84 
rYr
 = 
sDe
.
Yr
;

85 
rMth
 = 
sDe
.
Mth
;

86 
rDe
 = 
sDe
.
De
;

87 
rHour
 = 
sTime
.
Hours
;

88 
rMu
 = 
sTime
.
Mus
;

89 
rSecd
 = 
sTime
.
Secds
;

90 
	}
}

97 
	$tRTCTime
()

102 
sDe
.
WkDay
 = 
rWkDay
;

103 
sDe
.
Yr
 = 
rYr
;

104 
sDe
.
Mth
 = 
rMth
;

105 
sDe
.
De
 = 
rDe
;

106 
sTime
.
Hours
 = 
rHour
;

107 
sTime
.
Mus
 = 
rMu
;

108 
sTime
.
Secds
 = 
rSecd
;

110 
	`HAL_RTC_STime
(&
hc
,&
sTime
,
RTC_FORMAT_BIN
);

111 
	`HAL_RTC_SDe
(&
hc
,&
sDe
,
RTC_FORMAT_BIN
);

112 
	}
}

	@Src/vfdn_spi.c

20 
	~"ma.h
"

21 
	~"vfdn_i.h
"

23 #ifdef 
__DEBUG_SPI__


24 
	~"vfdn_com.h
"

49 
	gFg
 = 
AP_SCAN_TSTART
;

50 
	gC
 = 
AP_SCAN_TCNT
;

51 
	gBufC
 = 0;

52 
	gBuf
[
AP_CNT_MAX
];

54 
	gkPa
 = 0;

59 
Check
();

71 
	$Check
()

73 
i
=0,
j
=0, 
buf
[2];

74 
avr
=0,
sum
=0;

75 
d
=0,
k
=0;

77 if(
Fg
 =
AP_SCAN_NOW
)

80 if(
	`HAL_SPI_Reive
(&
hi2
,
buf
,1,100!
HAL_OK
)

82 #ifde
__DEBUG_SPI__


83 
	`putS
(&
hut4
,(const *)"SPIrror!\n");

88 
Buf
[
BufC
] = (()
buf
[0]&0x00ff)<<8;

89 
Buf
[
BufC
] |(()
buf
[1]&0x00ff);

91 
BufC
++;

93 if(
BufC
 =
AP_CNT_MAX
)

95 
i
=0; i<
AP_CNT_MAX
-1; i++)

97 
j
=0; j<
AP_CNT_MAX
-
i
-1; j++)

99 if(
Buf
[
j
] >pBuf[j+
i
])

101 
avr
 = 
Buf
[
j
];

102 
Buf
[
j
] =pBuf[j+1];

103 
Buf
[
j
+1] = 
avr
;

108 
i
=10; i<
AP_CNT_MAX
-10; i++)

110 
sum
 +
Buf
[
i
];

113 
avr
 = 
sum
/(
AP_CNT_MAX
-20);

114 
avr
-=1000;

117 
d
 = ()(
avr
)*0.065/65535;

118 
d
 = ((dat*5)/0.065);

119 #ifde
__DEBUG_SPI__


120 
	`putS
(&
hut4
,(const *)"mV : ");

121 
	`putCh
(&
hut4
,((sigd )(
d
*1000)/10000)+0x30);

122 
	`putCh
(&
hut4
,(((sigd )(
d
*1000)%10000)/1000)+0x30);

123 
	`putCh
(&
hut4
,(((sigd )(
d
*1000)%1000)/100)+0x30);

124 
	`putCh
(&
hut4
,(((sigd )(
d
*1000)%100)/10)+0x30);

125 
	`putCh
(&
hut4
,((sigd )(
d
*1000)%10)+0x30);

126 
	`putCh
(&
hut4
,'\n');

130 
d
 -= 1.33;

131 
k
 = 
d
*250;

144 
kPa
 = ()
k
-76;

146 #ifde
__DEBUG_SPI__


148 
	`putS
(&
hut4
,(const *)"avr : ");

149 
	`putCh
(&
hut4
,(
avr
/10000)+0x30);

150 
	`putCh
(&
hut4
,((
avr
%10000)/1000)+0x30);

151 
	`putCh
(&
hut4
,((
avr
%1000)/100)+0x30);

152 
	`putCh
(&
hut4
,((
avr
%100)/10)+0x30);

153 
	`putCh
(&
hut4
,(
avr
%10)+0x30);

154 
	`putCh
(&
hut4
,'\n');

157 
	`putS
(&
hut4
,(const *)"apkPa : ");

158 
	`putCh
(&
hut4
,(
kPa
/10000)+0x30);

159 
	`putCh
(&
hut4
,((
kPa
%10000)/1000)+0x30);

160 
	`putCh
(&
hut4
,((
kPa
%1000)/100)+0x30);

161 
	`putCh
(&
hut4
,((
kPa
%100)/10)+0x30);

162 
	`putCh
(&
hut4
,(
kPa
%10)+0x30);

163 
	`putCh
(&
hut4
,'\n');

168 
BufC
 = 0;

172 
C
 = 
AP_SCAN_TCNT
;

173 
Fg
 = 
AP_SCAN_TSTART
;

175 
	}
}

	@Src/vfdn_sub.c

21 
	~"m32f407xx.h
"

22 
	~"ma.h
"

23 
	~"vfdn_sub.h
"

24 
	~"dwt_m32_day.h
"

25 
	~"vfdn_io_.h
"

26 
	~"vfdn_rvo.h
"

27 
	~"vfdn_acsv.h
"

28 
	~"vfdn_r.h
"

30 
	~"vfdn_com.h
"

52 
	gbdID
 = 0;

56 
	gsysSFg
 = 0;

58 
	gsysLedC
 = 
SYS_LED_TCNT
;

60 
	gsysMode
 = 0;

61 
	grMode
 = 0;

62 
	grRunFg
 = 0;

63 
	gMode
 = 0;

64 
	gchgeModeFg
 = 0;

67 
	gswFg
 = 0;

68 
	gswC
 = 0;

69 
	gswChkFg
 = 0;

70 
	gswCur
 = 0;

71 
	gswPv
 = 0;

72 
	gswStFg
 = 0;

74 
	ghtCu
 = 0;

76 
	gmL
 = 0;

78 
	gwA
 = 
SEW_ACT_WAIT
;

80 
	gwRunFg
 = 0;

81 
	gwRunC
 = 0;

83 
	gwMovMaxC
 = 0;

84 
	gwMovMaxPul
 = 0;

85 
	gwMovFg
 = 0;

86 
	gwMovC
 = 0;

88 
	grCode
[4];

90 
	gFg
[5];

91 
	gC
[5];

92 
	gSp
[5];

93 
	gliSp
 = 0;

94 
	gliC
 = 0;

96 
	gCkFg
 = 0;

97 
	gCkC
 = 0;

98 
	gSp
 = 0;

99 
	gPvSp
 = 0;

101 
	gbcFg
 = 0;

102 
	gbcC
 = 0;

103 
	gbcSp
 = 0;

105 
	grcDuty
[2];

107 
	grcInDc
 = 0;

109 
	ghtOnFg
 = 0;

111 
	gFg
 = 0;

112 
	gC
 = 0;

113 
	gRGYFg
 = 0;

115 
	gF
 = 0;

117 
	gsvRdy
 = 0;

119 
	gqBuf
 = 0;

121 
	gtogFg
[2];

123 
	gC
 = 0;

124 
	gFg
 = 0;

126 
	gROEC
 = 0;

127 
	gROEPv
 = 0;

128 
	gROEDa
 = 0;

130 
	gtSewC
 = 0;

131 
	gtMovC
 = 0;

132 
	gtMovFg
 = 0;

133 
	gtSewRunFg
 = 0;

134 
	gtMovMaxC
 = 0;

136 
	gloݔC
 = 0;

137 
	gloݔFg
 = 0;

139 
	gmovC
 = 0;

140 
	gmovFg
 = 0;

141 
	gmovCLK
 = 0;

143 
	glfC
 = 0;

144 
	glfFg
 = 0;

145 
	glfCLK
 = 0;

153 
TLamp
();

154 
Vaccum
(
mode
);

155 
Cmp
(
l
, 
mode
);

156 
chgeFRQ
(
mode
);

158 
Lig
(
mode
);

159 
Nd
();

160 
Loݔ
();

162 
Movg
(
mode
);

163 
Cmp
(
l
, 
mode
);

164 
Mache
();

165 
snSw
();

166 
rugPross
();

167 
SV
(
TIM_HdTyDef
 *
htim
, 
ut32_t
 
Chl
, 
ut16_t
 
ime
);

168 
ROE
();

169 
mTeMode
();

177 
	$SV
(
TIM_HdTyDef
 *
htim
, 
ut32_t
 
Chl
, 
ut16_t
 
ime
)

179 if(
Fg
 == 0)

181 if(
Chl
 =
TIM_CHANNEL_1
)

183 
Out
[0] &= ~0x01;

184 
	`outSigl
(
OUT_CH1
,
Out
[0]);

186 
SV1_DIR_CCW
;

188 if(
Chl
 =
TIM_CHANNEL_2
)

190 
Out
[1] &= ~0x01;

191 
	`outSigl
(
OUT_CH2
,
Out
[1]);

193 
SV2_DIR_CCW
;

195 if(
Chl
 =
TIM_CHANNEL_3
)

197 
Out
[2] &= ~0x01;

198 
	`outSigl
(
OUT_CH3
,
Out
[2]);

200 
SV3_DIR_CW
;

204 
Out
[3] &= ~0x01;

205 
	`outSigl
(
OUT_CH4
,
Out
[3]);

207 
SV4_DIR_CCW
;

209 
	`HAL_TIM_PWM_S
(
htim
,
Chl
);

211 
C
 = 
ime
;

212 
Fg
 = 1;

214 if(
Fg
 == 2)

216 
	`HAL_TIM_PWM_St
(
htim
,
Chl
);

218 
	}
}

220 
	$ROE
()

222 if(
ROEPv
 !
ROEC
)

224 
	`putCh
(&
hut4
,(
ROEC
/10000)+0x30);

225 
	`putCh
(&
hut4
,(
ROEC
/1000)+0x30);

226 
	`putCh
(&
hut4
,(
ROEC
/100)+0x30);

227 
	`putCh
(&
hut4
,(
ROEC
/10)+0x30);

228 
	`putCh
(&
hut4
,(
ROEC
%10)+0x30);

229 
	`putCh
(&
hut4
,'\n');

231 
ROEPv
 = 
ROEC
;

233 
	}
}

240 
	$TLamp
()

242 if(
Fg
 =
TLAMP_RUN_NOW
)

244 if(
rCode
[0] & 0x01)

246 if(
RGYFg
 == 1)

248 
Out
[
OUT_CH6
] |
OUT_TL_R_CNTL
;

249 
Out
[
OUT_CH6
] &~(
OUT_TL_G_CNTL
|
OUT_TL_Y_CNTL
);

251 
	`outSigl
(
OUT_CH6
,
Out
[OUT_CH6]);

253 
RGYFg
 = 2;

255 
C
 = 
TLAMP_200MSEC_TCNT
;

257 if(
RGYFg
 == 2)

259 
Out
[
OUT_CH6
] |(
OUT_TL_R_CNTL
|
OUT_TL_G_CNTL
);

260 
Out
[
OUT_CH6
] &~
OUT_TL_Y_CNTL
;

262 
	`outSigl
(
OUT_CH6
,
Out
[OUT_CH6]);

264 
RGYFg
 = 3;

266 
C
 = 
TLAMP_200MSEC_TCNT
;

268 if(
RGYFg
 == 3)

270 
Out
[
OUT_CH6
] |(
OUT_TL_R_CNTL
|
OUT_TL_G_CNTL
);

271 
Out
[
OUT_CH6
] &~
OUT_TL_Y_CNTL
;

273 
	`outSigl
(
OUT_CH6
,
Out
[OUT_CH6]);

275 
RGYFg
 = 0;

277 
C
 = 
TLAMP_200MSEC_TCNT
;

281 
Out
[
OUT_CH6
] &~(
OUT_TL_R_CNTL
|
OUT_TL_G_CNTL
|
OUT_TL_Y_CNTL
);

283 
	`outSigl
(
OUT_CH6
,
Out
[OUT_CH6]);

285 
RGYFg
 = 1;

287 
C
 = 
TLAMP_500MSEC_TCNT
;

290 if(
rCode
[3] & 0x0f)

292 if(
RGYFg
 == 1)

294 
Out
[
OUT_CH6
] |
OUT_TL_R_CNTL
;

295 
Out
[
OUT_CH6
] &~(
OUT_TL_G_CNTL
|
OUT_TL_Y_CNTL
);

297 
	`outSigl
(
OUT_CH6
,
Out
[OUT_CH6]);

299 
RGYFg
 = 2;

301 if(
RGYFg
 == 2)

303 
Out
[
OUT_CH6
] |
OUT_TL_Y_CNTL
;

304 
Out
[
OUT_CH6
] &~(
OUT_TL_R_CNTL
|
OUT_TL_G_CNTL
);

306 
	`outSigl
(
OUT_CH6
,
Out
[OUT_CH6]);

308 
RGYFg
 = 0;

312 
Out
[
OUT_CH6
] &~(
OUT_TL_R_CNTL
|
OUT_TL_G_CNTL
|
OUT_TL_Y_CNTL
);

314 
	`outSigl
(
OUT_CH6
,
Out
[OUT_CH6]);

316 
RGYFg
 = 1;

319 
C
 = 
TLAMP_200MSEC_TCNT
;

321 if(
rCode
[0] & 0x02)

323 if(
RGYFg
)

325 
Out
[
OUT_CH6
] |(
OUT_TL_R_CNTL
|
OUT_TL_G_CNTL
|
OUT_TL_Y_CNTL
);

327 
	`outSigl
(
OUT_CH6
,
Out
[OUT_CH6]);

329 
RGYFg
 = 0;

333 
Out
[
OUT_CH6
] &~(
OUT_TL_R_CNTL
|
OUT_TL_G_CNTL
|
OUT_TL_Y_CNTL
);

335 
	`outSigl
(
OUT_CH6
,
Out
[OUT_CH6]);

337 
RGYFg
 = 1;

340 
C
 = 
TLAMP_200MSEC_TCNT
;

342 if(
rCode
[0] & 0x0c)

344 if((
RGYFg
 == 1) || (tlRGYFg == 3))

346 if(
RGYFg
 == 1)

348 
RGYFg
 = 2;

349 
C
 = 
TLAMP_500MSEC_TCNT
;

353 
RGYFg
 = 0;

354 
C
 = 
TLAMP_1000MSEC_TCNT
;

357 
Out
[
OUT_CH6
] |
OUT_TL_R_CNTL
;

358 
Out
[
OUT_CH6
] &~(
OUT_TL_G_CNTL
|
OUT_TL_Y_CNTL
);

360 
	`outSigl
(
OUT_CH6
,
Out
[OUT_CH6]);

364 if(
RGYFg
 == 2)

366 
RGYFg
 = 3;

367 
C
 = 
TLAMP_500MSEC_TCNT
;

371 
RGYFg
 = 1;

372 
C
 = 
TLAMP_1000MSEC_TCNT
;

375 
Out
[
OUT_CH6
] &~(
OUT_TL_R_CNTL
|
OUT_TL_G_CNTL
|
OUT_TL_Y_CNTL
);

377 
	`outSigl
(
OUT_CH6
,
Out
[OUT_CH6]);

380 if((
rCode
[0] & 0xf0) || (errorCode[1] & 0x0f))

382 if(
RGYFg
)

384 
Out
[
OUT_CH6
] |
OUT_TL_R_CNTL
;

385 
Out
[
OUT_CH6
] &~(
OUT_TL_G_CNTL
|
OUT_TL_Y_CNTL
);

387 
	`outSigl
(
OUT_CH6
,
Out
[OUT_CH6]);

389 
RGYFg
 = 0;

391 
C
 = 
TLAMP_500MSEC_TCNT
;

395 
Out
[
OUT_CH6
] &~(
OUT_TL_R_CNTL
|
OUT_TL_G_CNTL
|
OUT_TL_Y_CNTL
);

397 
	`outSigl
(
OUT_CH6
,
Out
[OUT_CH6]);

399 
RGYFg
 = 1;

401 
C
 = 
TLAMP_1000MSEC_TCNT
;

404 if((
rCode
[1] & 0xc0) || (errorCode[2] & 0x03))

406 if((
RGYFg
 == 1) || (tlRGYFg == 3) || (tlRGYFg == 5))

408 if(
RGYFg
 == 1)lRGYFg = 2;

409 if(
RGYFg
 == 3)lRGYFg = 4;

410 
RGYFg
 = 0;

412 
Out
[
OUT_CH6
] |
OUT_TL_R_CNTL
;

413 
Out
[
OUT_CH6
] &~(
OUT_TL_G_CNTL
|
OUT_TL_Y_CNTL
);

415 
	`outSigl
(
OUT_CH6
,
Out
[OUT_CH6]);

417 
C
 = 
TLAMP_500MSEC_TCNT
;

421 if(
RGYFg
 == 2)

423 
RGYFg
 = 3;

424 
C
 = 
TLAMP_500MSEC_TCNT
;

426 if(
RGYFg
 == 4)

428 
RGYFg
 = 5;

429 
C
 = 
TLAMP_500MSEC_TCNT
;

433 
RGYFg
 = 1;

434 
C
 = 
TLAMP_1000MSEC_TCNT
;

437 
Out
[
OUT_CH6
] &~(
OUT_TL_R_CNTL
|
OUT_TL_G_CNTL
|
OUT_TL_Y_CNTL
);

439 
	`outSigl
(
OUT_CH6
,
Out
[OUT_CH6]);

442 if(
rCode
[1] & 0x30)

444 if(
RGYFg
)

446 
Out
[
OUT_CH6
] |
OUT_TL_Y_CNTL
;

447 
Out
[
OUT_CH6
] &~(
OUT_TL_R_CNTL
|
OUT_TL_G_CNTL
);

449 
	`outSigl
(
OUT_CH6
,
Out
[OUT_CH6]);

451 
RGYFg
 = 0;

453 
C
 = 
TLAMP_500MSEC_TCNT
;

457 
Out
[
OUT_CH6
] &~(
OUT_TL_R_CNTL
|
OUT_TL_G_CNTL
|
OUT_TL_Y_CNTL
);

459 
	`outSigl
(
OUT_CH6
,
Out
[OUT_CH6]);

461 
RGYFg
 = 1;

463 
C
 = 
TLAMP_500MSEC_TCNT
;

468 if(((
rCode
[2] & 0x03) == 0) && ((errorCode[3] & 0x0f) == 0))

470 
Out
[
OUT_CH6
] |
OUT_TL_G_CNTL
;

471 
Out
[
OUT_CH6
] &~(
OUT_TL_R_CNTL
|
OUT_TL_Y_CNTL
);

473 
	`outSigl
(
OUT_CH6
,
Out
[OUT_CH6]);

475 
C
 = 
TLAMP_10MSEC_TCNT
;

479 
Fg
 = 
TLAMP_RUN_TSTART
;

481 
	}
}

488 
	$Vaccum
(
mode
)

490 if(
mode
 =
VACCUM_OPEN

Out
[
OUT_CH6
] &~
OUT_VACCUM_CNTL
;

491 if(
mode
 =
VACCUM_CLOSE

Out
[
OUT_CH6
] |
OUT_VACCUM_CNTL
;

493 
	`outSigl
(
OUT_CH6
,
Out
[OUT_CH6]);

494 
	}
}

501 
	$Cmp
(
l
, 
mode
)

503 if(
mode
 =
CLAMP_OPEN

Out
[
OUT_CH5
] |
l
;

504 if(
mode
 =
CLAMP_CLOSE

Out
[
OUT_CH5
] &~
l
;

506 
	`outSigl
(
OUT_CH5
,
Out
[OUT_CH5]);

507 
	}
}

514 
	$BdCut
()

516 if(
bcSp
 == 0)

519 
rcDuty
[0] = 
RC_DUTY_MIN
;

520 
rcDuty
[1] = 
RC_DUTY_MAX
;

525 
htOnFg
 = 1;

527 
	`HAL_TIM_PWM_S
(&
htim3
,
TIM_CHANNEL_1
);

528 
	`HAL_TIM_PWM_S
(&
htim8
,
TIM_CHANNEL_1
);

530 
	`__HAL_TIM_SET_COMPARE
(&
htim3
,
TIM_CHANNEL_1
,
rcDuty
[0]);

531 
	`__HAL_TIM_SET_COMPARE
(&
htim8
,
TIM_CHANNEL_1
,
rcDuty
[1]);

533 
bcSp
 = 1;

536 
bcC
 = 
RC_GEN_TCNT
;

537 
bcFg
 = 
RC_GEN_TSTART
;

539 if(
bcSp
 == 1)

541 if(
bcC
 =
RC_GEN_NOW
)

543 
	`__HAL_TIM_SET_COMPARE
(&
htim3
,
TIM_CHANNEL_1
,
rcDuty
[0]);

544 
	`__HAL_TIM_SET_COMPARE
(&
htim8
,
TIM_CHANNEL_1
,
rcDuty
[1]);

546 if(
rcInDc
 == 1)

548 
rcDuty
[0] -
RC_DUTY_STEP
;

549 
rcDuty
[1] +
RC_DUTY_STEP
;

553 
rcDuty
[0] +
RC_DUTY_STEP
;

554 
rcDuty
[1] -
RC_DUTY_STEP
;

557 
bcC
 = 
RC_GEN_TCNT
;

558 
bcFg
 = 
RC_GEN_TSTART
;

560 if((
rcDuty
[0] > 
RC_DUTY_MAX
&& (rcDuty[1] < 
RC_DUTY_MIN
))

562 
rcInDc
 = 1;

563 
rcDuty
[0] = 
RC_DUTY_MAX
;

564 
rcDuty
[1] = 
RC_DUTY_MIN
;

566 if((
rcDuty
[0] < 
RC_DUTY_MIN
&& (rcDuty[1] > 
RC_DUTY_MAX
))

571 
htOnFg
 = 0;

573 
	`HAL_TIM_PWM_St
(&
htim3
,
TIM_CHANNEL_1
);

574 
	`HAL_TIM_PWM_St
(&
htim8
,
TIM_CHANNEL_1
);

576 
rcDuty
[0] = 
RC_DUTY_MIN
;

577 
rcDuty
[1] = 
RC_DUTY_MAX
;

579 
rcInDc
 = 0;

581 
bcC
 = 0;

582 
bcFg
 = 0;

585 
bcSp
 = 0;

589 
	}
}

596 
	$chgeFRQ
(
mode
)

598 if(
mode
 =
MODE_SEWING
)

600 
TIM4
->
ARR
 = 
VFAST_SEWING
;

601 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_1
,
VFAST_SEWING
/2);

603 if(
mode
 =
MODE_TEST
)

605 
TIM4
->
ARR
 = 
VSLOW_SEWING
;

606 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_1
,
VSLOW_SEWING
/2);

609 
	}
}

616 
	$Lig
(
mode
)

618 if(
Sp
[
INIT_STEP_LIFTING
] == 0)

620 
Sp
[
INIT_STEP_LIFTING
] = 1;

622 
liSp
 = 0;

623 
liC
 = 0;

625 
Out
[3] &= ~0x01;

627 
	`outSigl
(
OUT_CH4
,
Out
[3]);

629 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_4
);

630 
SV4_DIR_CCW
;

631 
TIM4
->
ARR
 = 
FRQ_1KHz
;

632 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_4
,(
FRQ_1KHz
+1)/2);

633 
	`HAL_TIM_PWM_S
(&
htim4
, 
TIM_CHANNEL_4
);

635 
C
[
INIT_STEP_LIFTING
] = 
INIT_TCNT
;

636 
Fg
[
INIT_STEP_LIFTING
] = 
INIT_TSTART
;

638 if(
Sp
[
INIT_STEP_LIFTING
] == 1)

640 if(
SEN
 & 
ST_SEN_LIFTING_UP_LIM
)

642 
liSp
 = 1;

644 
SV4_DIR_CW
;

645 
	`HAL_TIM_PWM_S
(&
htim4
, 
TIM_CHANNEL_4
);

647 
C
[
INIT_STEP_LIFTING
] = 
INIT_TCNT
;

648 
Fg
[
INIT_STEP_LIFTING
] = 
INIT_TSTART
;;

650 if(
SEN
 & 
ST_SEN_LIFTING_HOME
)

652 if(
mode
 == 0x01)

654 if(
liSp
 == 1)

656 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_4
,0);

657 
	`HAL_TIM_PWM_St
(&
htim4
, 
TIM_CHANNEL_4
);

659 
liC
 = (675*16);

660 
svEtiC
 = 0;

661 
liSp
 = 2;

663 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_4
,(
FRQ_1KHz
+1)/2);

664 
	`HAL_TIM_PWM_S
(&
htim4
, 
TIM_CHANNEL_4
);

666 
C
[
INIT_STEP_LIFTING
] = 
INIT_TCNT
;

667 
Fg
[
INIT_STEP_LIFTING
] = 
INIT_TSTART
;;

672 
Sp
[
INIT_STEP_LIFTING
] = 2;

674 
Fg
[
INIT_STEP_LIFTING
] = 0;

675 
C
[
INIT_STEP_LIFTING
] = 0;

677 
liSp
 = 0;

678 
liC
 = 0;

681 if((
SEN
 & 
ST_SEN_LIFTING_DN_LIM
|| (
Fg
[
INIT_STEP_LIFTING
] =
INIT_TOVER
))

683 
Sp
[
INIT_STEP_LIFTING
] = 3;

685 
Fg
[
INIT_STEP_LIFTING
] = 0;

686 
C
[
INIT_STEP_LIFTING
] = 0;

688 
rCode
[0] |= 0x10;

690 
liSp
 = 0;

691 
liC
 = 0;

693 #ifde
__DEBUG_SUB__


694 if(
SEN
 & 
ST_SEN_LIFTING_DN_LIM
)

695 
	`putS
(&
hut4
,(const *)"Lifting init DN LIM\n");

697 
	`putS
(&
hut4
,(const *)"Lifting init TOV\n");

703 if(
liSp
 == 2)

705 if(
liC
 =
svEtiC
)

707 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_4
,0);

708 
	`HAL_TIM_PWM_St
(&
htim4
, 
TIM_CHANNEL_4
);

710 
Sp
[
INIT_STEP_LIFTING
] = 2;

712 
Fg
[
INIT_STEP_LIFTING
] = 0;

713 
C
[
INIT_STEP_LIFTING
] = 0;

715 
liSp
 = 0;

716 
liC
 = 0;

718 
svEtiC
 = 0;

720 #ifde
__DEBUG_SUB__


721 
	`putS
(&
hut4
,(const *)"liftCnt == svEtiCnt\n");

726 if(
liC
 < 
svEtiC
)

728 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_4
,0);

729 
	`HAL_TIM_PWM_St
(&
htim4
, 
TIM_CHANNEL_4
);

731 
Sp
[
INIT_STEP_LIFTING
] = 3;

733 
Fg
[
INIT_STEP_LIFTING
] = 0;

734 
C
[
INIT_STEP_LIFTING
] = 0;

736 
liSp
 = 0;

737 
liC
 = 0;

739 #ifde
__DEBUG_SUB__


740 
	`putS
(&
hut4
,(const *)"liftCnt < svEtiCnt\n");

748 
	}
}

751 
	$Lig
(
mode
)

753 if(
SEN
 & 
ST_SEN_LIFTING_HOME
)

755 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_4
,0);

756 
	`HAL_TIM_PWM_St
(&
htim4
, 
TIM_CHANNEL_4
);

758 
rCode
[0] &= ~0x40;

759 
rCode
[0] &= ~0x10;

761 if(
mode
 == 0x01)

763 if(
liSp
 == 1)

765 #ifde
__DEBUG_SUB__


766 
	`putS
(&
hut4
,(const *)"Lifting sew init start\n");

768 
liSp
 = 2;

769 
liC
 = (690*16);

770 
svEtiC
 = 0;

772 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_4
,(
FRQ_1KHz
+1)/2);

773 
	`HAL_TIM_PWM_S
(&
htim4
, 
TIM_CHANNEL_4
);

778 
Sp
[
INIT_STEP_LIFTING
] = 2;

780 
Fg
[
INIT_STEP_LIFTING
] = 0;

781 
C
[
INIT_STEP_LIFTING
] = 0;

783 #ifde
__DEBUG_SUB__


784 
	`putS
(&
hut4
,(const *)"Lifting init OK\n");

790 if(
Sp
[
INIT_STEP_LIFTING
] == 0)

792 
Sp
[
INIT_STEP_LIFTING
] = 1;

794 
liSp
 = 0;

795 
liC
 = 0;

797 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_4
);

798 
SV4_DIR_CCW
;

799 
TIM4
->
ARR
 = 
FRQ_1KHz
;

800 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_4
,(
FRQ_1KHz
+1)/2);

801 
	`HAL_TIM_PWM_S
(&
htim4
, 
TIM_CHANNEL_4
);

803 
C
[
INIT_STEP_LIFTING
] = 
INIT_TCNT
;

804 
Fg
[
INIT_STEP_LIFTING
] = 
INIT_TSTART
;

806 if(
Sp
[
INIT_STEP_LIFTING
] == 1)

808 if((
SEN
 & 
ST_SEN_LIFTING_UP_LIM
|| (SEN & 
ST_SEN_LIFTING_DN_LIM
|| (
Fg
[
INIT_STEP_LIFTING
] =
INIT_TOVER
))

812 
	`HAL_TIM_PWM_St
(&
htim4
, 
TIM_CHANNEL_4
);

814 if(
SEN
 & 
ST_SEN_LIFTING_UP_LIM
)

816 
SV4_DIR_CW
;

817 
	`HAL_TIM_PWM_S
(&
htim4
, 
TIM_CHANNEL_4
);

819 
C
[
INIT_STEP_LIFTING
] = 
INIT_TCNT
;

820 
Fg
[
INIT_STEP_LIFTING
] = 
INIT_TSTART
;

822 
liSp
 = 1;

824 #ifde
__DEBUG_SUB__


825 
	`putS
(&
hut4
,(const *)"Lifting init UP LIM\n");

828 if((
SEN
 & 
ST_SEN_LIFTING_DN_LIM
|| (
Fg
[
INIT_STEP_LIFTING
] =
INIT_TOVER
))

830 
Sp
[
INIT_STEP_LIFTING
] = 3;

832 
Fg
[
INIT_STEP_LIFTING
] = 0;

833 
C
[
INIT_STEP_LIFTING
] = 0;

835 
rCode
[0] |= 0x10;

837 #ifde
__DEBUG_SUB__


838 if(
SEN
 & 
ST_SEN_LIFTING_DN_LIM
)

839 
	`putS
(&
hut4
,(const *)"Lifting init DN LIM\n");

841 
	`putS
(&
hut4
,(const *)"Lifting init TOV\n");

847 if(
mode
 == 0x01)

849 if(
liSp
 == 2)

851 if(
svEtiC
 =
liC
)

853 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_4
,0);

854 
	`HAL_TIM_PWM_St
(&
htim4
, 
TIM_CHANNEL_4
);

856 
Sp
[
INIT_STEP_LIFTING
] = 2;

858 
Fg
[
INIT_STEP_LIFTING
] = 0;

859 
C
[
INIT_STEP_LIFTING
] = 0;

861 #ifde
__DEBUG_SUB__


862 
	`putS
(&
hut4
,(const *)"Lifting sew init ok\n");

871 
	}
}

875 
	$Lig
()

877 if(
SEN
 & 
ST_SEN_LIFTING_HOME
)

879 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_4
,0);

880 
	`HAL_TIM_PWM_St
(&
htim4
, 
TIM_CHANNEL_4
);

882 
Sp
[
INIT_STEP_LIFTING
] = 2;

884 
Fg
[
INIT_STEP_LIFTING
] = 0;

885 
C
[
INIT_STEP_LIFTING
] = 0;

887 
rCode
[0] &= ~0x40;

888 
rCode
[0] &= ~0x10;

889 #ifde
__DEBUG_SUB__


890 
	`putS
(&
hut4
,(const *)"Lifting init OK\n");

896 if(
Sp
[
INIT_STEP_LIFTING
] == 0)

898 
Sp
[
INIT_STEP_LIFTING
] = 1;

900 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_4
);

901 
SV4_DIR_CCW
;

902 
TIM4
->
ARR
 = 
FRQ_1KHz
;

903 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_4
,(
FRQ_1KHz
+1)/2);

904 
	`HAL_TIM_PWM_S
(&
htim4
, 
TIM_CHANNEL_4
);

906 
C
[
INIT_STEP_LIFTING
] = 
INIT_TCNT
;

907 
Fg
[
INIT_STEP_LIFTING
] = 
INIT_TSTART
;

909 if(
Sp
[
INIT_STEP_LIFTING
] == 1)

911 if((
SEN
 & 
ST_SEN_LIFTING_UP_LIM
|| (SEN & 
ST_SEN_LIFTING_DN_LIM
|| (
Fg
[
INIT_STEP_LIFTING
] =
INIT_TOVER
))

915 
	`HAL_TIM_PWM_St
(&
htim4
, 
TIM_CHANNEL_4
);

917 if(
SEN
 & 
ST_SEN_LIFTING_UP_LIM
)

919 
SV4_DIR_CW
;

920 
	`HAL_TIM_PWM_S
(&
htim4
, 
TIM_CHANNEL_4
);

922 
C
[
INIT_STEP_LIFTING
] = 
INIT_TCNT
;

923 
Fg
[
INIT_STEP_LIFTING
] = 
INIT_TSTART
;

925 #ifde
__DEBUG_SUB__


926 
	`putS
(&
hut4
,(const *)"Lifting init UP LIM\n");

929 if((
SEN
 & 
ST_SEN_LIFTING_DN_LIM
|| (
Fg
[
INIT_STEP_LIFTING
] =
INIT_TOVER
))

932 
Sp
[
INIT_STEP_LIFTING
] = 3;

934 
Fg
[
INIT_STEP_LIFTING
] = 0;

935 
C
[
INIT_STEP_LIFTING
] = 0;

937 
rCode
[0] |= 0x10;

939 #ifde
__DEBUG_SUB__


940 if(
SEN
 & 
ST_SEN_LIFTING_DN_LIM
)

941 
	`putS
(&
hut4
,(const *)"Lifting init DN LIM\n");

943 
	`putS
(&
hut4
,(const *)"Lifting init TOV\n");

950 
	}
}

958 
	$Nd
()

960 if(
SEN
 & 
ST_SEN_NEEDLE_HOME
)

962 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_1
,0);

963 
	`HAL_TIM_PWM_St
(&
htim4
, 
TIM_CHANNEL_1
);

966 
Sp
[
INIT_STEP_NEEDLE
] = 2;

968 
Fg
[
INIT_STEP_NEEDLE
] = 0;

969 
C
[
INIT_STEP_NEEDLE
] = 0;

971 
rCode
[0] &= ~0x80;

972 #ifde
__DEBUG_SUB__


973 
	`putS
(&
hut4
,(const *)"Needle init OK\n");

979 if(
Sp
[
INIT_STEP_NEEDLE
] == 0)

981 
Sp
[
INIT_STEP_NEEDLE
] = 1;

983 
Out
[0] &= ~0x01;

984 
	`outSigl
(
OUT_CH1
,
Out
[0]);

986 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_1
);

987 
SV1_DIR_CCW
;

988 
TIM4
->
ARR
 = 
FRQ_200Hz
;

989 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_1
,(
FRQ_200Hz
+1)/2);

990 
	`HAL_TIM_PWM_S
(&
htim4
, 
TIM_CHANNEL_1
);

992 
C
[
INIT_STEP_NEEDLE
] = 
INIT_TCNT
;

993 
Fg
[
INIT_STEP_NEEDLE
] = 
INIT_TSTART
;

995 if(
Sp
[
INIT_STEP_NEEDLE
] == 1)

997 if(
Fg
[
INIT_STEP_NEEDLE
] =
INIT_TOVER
)

999 
	`HAL_TIM_PWM_St
(&
htim4
, 
TIM_CHANNEL_1
);

1001 
Sp
[
INIT_STEP_NEEDLE
] = 3;

1003 
Fg
[
INIT_STEP_NEEDLE
] = 0;

1004 
C
[
INIT_STEP_NEEDLE
] = 0;

1006 
rCode
[0] |= 0x80;

1008 #ifde
__DEBUG_SUB__


1009 
	`putS
(&
hut4
,(const *)"Needle init TOV\n");

1015 
	}
}

1022 
	$Loݔ
()

1024 if(
SEN
 & 
ST_SEN_LOOPER_HOME
)

1026 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_2
,0);

1027 
	`HAL_TIM_PWM_St
(&
htim4
, 
TIM_CHANNEL_2
);

1029 
Sp
[
INIT_STEP_LOOPER
] = 2;

1031 
Fg
[
INIT_STEP_LOOPER
] = 0;

1032 
C
[
INIT_STEP_LOOPER
] = 0;

1034 
rCode
[1] &= ~0x01;

1035 #ifde
__DEBUG_SUB__


1036 
	`putS
(&
hut4
,(const *)"Looper init OK\n");

1042 if(
Sp
[
INIT_STEP_LOOPER
] == 0)

1044 
Sp
[
INIT_STEP_LOOPER
] = 1;

1046 
Out
[1] &= ~0x01;

1047 
	`outSigl
(
OUT_CH2
,
Out
[1]);

1049 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_2
);

1050 
SV2_DIR_CCW
;

1051 
TIM4
->
ARR
 = 
FRQ_200Hz
;

1052 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_2
,(
FRQ_200Hz
+1)/2);

1053 
	`HAL_TIM_PWM_S
(&
htim4
, 
TIM_CHANNEL_2
);

1055 
C
[
INIT_STEP_LOOPER
] = 
INIT_TCNT
;

1056 
Fg
[
INIT_STEP_LOOPER
] = 
INIT_TSTART
;

1058 if(
Sp
[
INIT_STEP_LOOPER
] == 1)

1060 if(
Fg
[
INIT_STEP_LOOPER
] =
INIT_TOVER
)

1062 
	`HAL_TIM_PWM_St
(&
htim4
, 
TIM_CHANNEL_2
);

1064 
Sp
[
INIT_STEP_LOOPER
] = 3;

1066 
Fg
[
INIT_STEP_LOOPER
] = 0;

1067 
C
[
INIT_STEP_LOOPER
] = 0;

1069 
rCode
[1] |= 0x01;

1070 #ifde
__DEBUG_SUB__


1071 
	`putS
(&
hut4
,(const *)"Looper init TOV\n");

1078 
	}
}

1085 
	$Movg
(
mode
)

1087 if(
SEN
 & 
ST_SEN_MOVING_HOME
)

1089 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_3
,0);

1090 
	`HAL_TIM_PWM_St
(&
htim4
, 
TIM_CHANNEL_3
);

1092 
Sp
[
INIT_STEP_MOVING
] = 2;

1094 
Fg
[
INIT_STEP_MOVING
] = 0;

1095 
C
[
INIT_STEP_MOVING
] = 0;

1097 
rCode
[1] &= ~0x08;

1098 
rCode
[1] &= ~0x02;

1099 #ifde
__DEBUG_SUB__


1100 
	`putS
(&
hut4
,(const *)"Moving init OK\n");

1105 if(
Sp
[
INIT_STEP_MOVING
] == 0)

1107 
Sp
[
INIT_STEP_MOVING
] = 1;

1109 if(
mode
 == 1)

1111 
movC
 = 0;

1112 
movFg
 = 1;

1115 
Out
[2] &= ~0x01;

1116 
	`outSigl
(
OUT_CH3
,
Out
[2]);

1118 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_3
);

1119 
SV3_DIR_CW
;

1120 
TIM4
->
ARR
 = 
FRQ_5KHz
;

1121 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_3
,(
FRQ_5KHz
+1)/2);

1122 
	`HAL_TIM_PWM_S
(&
htim4
, 
TIM_CHANNEL_3
);

1124 
C
[
INIT_STEP_MOVING
] = 
INIT_TCNT
;

1125 
Fg
[
INIT_STEP_MOVING
] = 
INIT_TSTART
;

1132 if(
Sp
[
INIT_STEP_MOVING
] == 1)

1134 if((
SEN
 & 
ST_SEN_MOVING_BACKWARD_LIM
|| (
Fg
[
INIT_STEP_MOVING
] =
INIT_TOVER
))

1136 
	`HAL_TIM_PWM_St
(&
htim4
, 
TIM_CHANNEL_3
);

1138 
Sp
[
INIT_STEP_MOVING
] = 3;

1140 
Fg
[
INIT_STEP_MOVING
] = 0;

1141 
C
[
INIT_STEP_MOVING
] = 0;

1143 
rCode
[1] |= 0x08;

1145 if(
SEN
 & 
ST_SEN_MOVING_BACKWARD_LIM

rCode
[1] |= 0x02;

1152 if(
mode
 == 1)

1155 if(
movC
 == 92000)

1157 
movFg
 = 2;

1158 
movC
 = 0;

1164 
	}
}

1167 
	$Movg
()

1169 if(
SEN
 & 
ST_SEN_MOVING_HOME
)

1171 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_3
,0);

1172 
	`HAL_TIM_PWM_St
(&
htim4
, 
TIM_CHANNEL_3
);

1174 
Sp
[
INIT_STEP_MOVING
] = 2;

1176 
Fg
[
INIT_STEP_MOVING
] = 0;

1177 
C
[
INIT_STEP_MOVING
] = 0;

1179 
rCode
[1] &= ~0x08;

1180 
rCode
[1] &= ~0x02;

1181 #ifde
__DEBUG_SUB__


1182 
	`putS
(&
hut4
,(const *)"Moving init OK\n");

1187 if(
Sp
[
INIT_STEP_MOVING
] == 0)

1189 
Sp
[
INIT_STEP_MOVING
] = 1;

1191 
Out
[2] &= ~0x01;

1192 
	`outSigl
(
OUT_CH3
,
Out
[2]);

1194 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_3
);

1195 
SV3_DIR_CW
;

1196 
TIM4
->
ARR
 = 
FRQ_5KHz
;

1197 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_3
,(
FRQ_5KHz
+1)/2);

1198 
	`HAL_TIM_PWM_S
(&
htim4
, 
TIM_CHANNEL_3
);

1200 
C
[
INIT_STEP_MOVING
] = 
INIT_TCNT
;

1201 
Fg
[
INIT_STEP_MOVING
] = 
INIT_TSTART
;

1208 if(
Sp
[
INIT_STEP_MOVING
] == 1)

1210 if((
SEN
 & 
ST_SEN_MOVING_BACKWARD_LIM
|| (
Fg
[
INIT_STEP_MOVING
] =
INIT_TOVER
))

1212 
	`HAL_TIM_PWM_St
(&
htim4
, 
TIM_CHANNEL_3
);

1214 
Sp
[
INIT_STEP_MOVING
] = 3;

1216 
Fg
[
INIT_STEP_MOVING
] = 0;

1217 
C
[
INIT_STEP_MOVING
] = 0;

1219 
rCode
[1] |= 0x08;

1221 if(
SEN
 & 
ST_SEN_MOVING_BACKWARD_LIM

rCode
[1] |= 0x02;

1230 
	}
}

1238 
	$Cmp
(
l
, 
mode
)

1240 
	`Cmp
(
l
,
mode
);

1242 if(
mode
 =
CLAMP_OPEN
)

1244 if((
SEN
 & 
ST_SEN_CLAMP12_OPEN
&& (SEN & 
ST_SEN_CLAMP34_OPEN
)

1245 && (!(
SEN
 & 
ST_SEN_CLAMP12_CLOSE
)&& (!(SEN & 
ST_SEN_CLAMP34_CLOSE
)))

1247 
Sp
[
INIT_STEP_CLAMP
] = 2;

1249 
Fg
[
INIT_STEP_CLAMP
] = 0;

1250 
C
[
INIT_STEP_CLAMP
] = 0;

1254 if(
Sp
[
INIT_STEP_CLAMP
] == 0)

1256 
Sp
[
INIT_STEP_CLAMP
] = 1;

1258 
C
[
INIT_STEP_CLAMP
] = 
INIT_TCNT
;

1259 
Fg
[
INIT_STEP_CLAMP
] = 
INIT_TSTART
;

1261 if(
Sp
[
INIT_STEP_CLAMP
] == 1)

1263 if(
Fg
[
INIT_STEP_CLAMP
] =
INIT_TOVER
)

1265 
Sp
[
INIT_STEP_CLAMP
] = 3;

1267 
Fg
[
INIT_STEP_CLAMP
] = 0;

1268 
C
[
INIT_STEP_CLAMP
] = 0;

1276 if((
SEN
 & 
ST_SEN_CLAMP12_CLOSE
&& (SEN & 
ST_SEN_CLAMP34_CLOSE
)

1277 && (!(
SEN
 & 
ST_SEN_CLAMP12_OPEN
)&& (!(SEN & 
ST_SEN_CLAMP34_OPEN
)))

1279 
Sp
[
INIT_STEP_CLAMP
] = 2;

1281 
Fg
[
INIT_STEP_CLAMP
] = 0;

1282 
C
[
INIT_STEP_CLAMP
] = 0;

1286 if(
Sp
[
INIT_STEP_CLAMP
] == 0)

1288 
Sp
[
INIT_STEP_CLAMP
] = 1;

1290 
C
[
INIT_STEP_CLAMP
] = 
INIT_TCNT
;

1291 
Fg
[
INIT_STEP_CLAMP
] = 
INIT_TSTART
;

1293 if(
Sp
[
INIT_STEP_CLAMP
] == 1)

1295 if(
Fg
[
INIT_STEP_CLAMP
] =
INIT_TOVER
)

1297 
Sp
[
INIT_STEP_CLAMP
] = 3;

1299 
Fg
[
INIT_STEP_CLAMP
] = 0;

1300 
C
[
INIT_STEP_CLAMP
] = 0;

1306 
	}
}

1313 
	$Mache
()

1315 
wA
 = 
SEW_ACT_BR
;

1317 if(
Sp
 == 0x00)

1319 
F
 = 0;

1324 
Sp
[
INIT_STEP_LIFTING
] = 0;

1325 
Sp
[
INIT_STEP_NEEDLE
] = 0;

1326 
Sp
[
INIT_STEP_LOOPER
] = 0;

1327 
Sp
[
INIT_STEP_MOVING
] = 0;

1328 
Sp
[
INIT_STEP_CLAMP
] = 0;

1330 
Sp
 = 1;

1331 
CkC
 = 0;

1332 
CkFg
 = 0;

1334 if(
Sp
 == 1)

1336 
PvSp
 = 1;

1339 
	`Cmp
(
OUT_CLAMP1_CNTL
|
OUT_CLAMP2_CNTL
|
OUT_CLAMP3_CNTL
|
OUT_CLAMP4_CNTL
, 
CLAMP_OPEN
);

1341 if(
Sp
[
INIT_STEP_CLAMP
] == 2)

1343 
Sp
 = 2;

1345 
Sp
[
INIT_STEP_CLAMP
] = 0;

1347 if(
Sp
[
INIT_STEP_CLAMP
] == 3)

1349 
Sp
 = 10;

1351 
Sp
[
INIT_STEP_CLAMP
] = 0;

1354 if(
Sp
 == 2)

1356 
PvSp
 = 2;

1359 
	`Lig
(0);

1361 if(
Sp
[
INIT_STEP_LIFTING
] == 2)

1363 
Sp
 = 3;

1365 
Sp
[
INIT_STEP_LIFTING
] = 0;

1367 if(
Sp
[
INIT_STEP_LIFTING
] == 3)

1369 
Sp
 = 11;

1371 
Sp
[
INIT_STEP_LIFTING
] = 0;

1374 if(
Sp
 == 3)

1376 
PvSp
 = 3;

1379 
	`Nd
();

1381 
	`Loݔ
();

1387 if((
Sp
[
INIT_STEP_NEEDLE
] =2&& (Sp[
INIT_STEP_LOOPER
] == 2))

1389 
Sp
 = 4;

1391 
CkC
 = 
INIT_TCNT
;

1392 
CkFg
 = 
INIT_TSTART
;

1397 if(
Sp
[
INIT_STEP_NEEDLE
] =3
Sp
 = 12;

1399 if(
Sp
[
INIT_STEP_LOOPER
] =3
Sp
 = 13;

1404 if(
Sp
 == 4)

1406 
PvSp
 = 4;

1408 
	`Movg
(0);

1410 if(
Sp
[
INIT_STEP_MOVING
] == 2)

1412 
Sp
 = 5;

1414 
CkC
 = 
INIT_TCNT
;

1415 
CkFg
 = 
INIT_TSTART
;

1420 if(
Sp
[
INIT_STEP_MOVING
] =3
Sp
 = 14;

1423 if(
Sp
 == 5)

1425 
PvSp
 = 5;

1427 if((
SEN
 & 
ST_SEN_BAND_INSERT1
&& (SEN & 
ST_SEN_BAND_INSERT2
))

1429 
Sp
 = 6;

1431 
Sp
[
INIT_STEP_LIFTING
] = 0;

1432 
Sp
[
INIT_STEP_NEEDLE
] = 0;

1433 
Sp
[
INIT_STEP_LOOPER
] = 0;

1434 
Sp
[
INIT_STEP_MOVING
] = 0;

1435 
Sp
[
INIT_STEP_CLAMP
] = 0;

1437 
Sp
 = 1;

1438 
CkC
 = 0;

1439 
CkFg
 = 0;

1443 
Sp
 = 16;

1446 if(
Sp
 == 6)

1448 
PvSp
 = 6;

1451 
	`Cmp
(
OUT_CLAMP1_CNTL
|
OUT_CLAMP2_CNTL
|
OUT_CLAMP3_CNTL
|
OUT_CLAMP4_CNTL
, 
CLAMP_CLOSE
);

1453 if(
Sp
[
INIT_STEP_CLAMP
] == 2)

1455 
Sp
 = 6;

1457 
Sp
[
INIT_STEP_LIFTING
] = 0;

1458 
Sp
[
INIT_STEP_NEEDLE
] = 0;

1459 
Sp
[
INIT_STEP_LOOPER
] = 0;

1460 
Sp
[
INIT_STEP_MOVING
] = 0;

1461 
Sp
[
INIT_STEP_CLAMP
] = 0;

1463 
Sp
 = 0;

1464 
CkC
 = 0;

1465 
CkFg
 = 0;

1467 if(
Sp
[
INIT_STEP_CLAMP
] == 3)

1469 
Sp
 = 10;

1473 
	}
}

1480 
	$snSw
()

1482 if(
sysSFg
)

1484 if(
swFg
 =
SW_SCAN_NOW
)

1486 
swCur
 = 
SW
;

1488 if(
swCur
)

1490 if(
swCur
 !
swPv
)

1492 
swPv
 = 
swCur
;

1494 
swCur
 &= 0;

1496 
swChkFg
 = 1;

1500 if(
swChkFg
 == 1)

1502 
swChkFg
 = 2;

1505 if(
swCur
 & 
ST_SW_EMS
)

1506 
sysMode
 |
MODE_EMS
;

1509 
sysMode
 &~
MODE_EMS
;

1511 if(
swCur
 & 
ST_SW_AUTO_MANUAL
)

1513 
sysMode
 |
MODE_MANUAL
;

1514 
sysMode
 &~
MODE_AUTO
;

1518 
sysMode
 |
MODE_AUTO
;

1519 
sysMode
 &~
MODE_MANUAL
;

1522 if(
swCur
 & 
ST_SW_TEST_SEWING

sysMode
 |
MODE_MTEST
;

1525 if(
sysMode
 & 
MODE_MANUAL
)

1556 if(
swCur
 & 
ST_SW_ROE_X
)

1558 
rMode
 |= 0x01;

1559 
Mode
 &= ~0x01;

1565 if(
swCur
 & 
ST_SW_MOVING_HOME
)

1566 
Mode
 |= 0x01;

1568 
rMode
 &= ~0x01;

1569 
rRunFg
 = 0;

1573 if(
swCur
 & 
ST_SW_ROE_Y
)

1575 
rMode
 |= 0x02;

1576 
Mode
 &= ~0x02;

1582 if(
swCur
 & 
ST_SW_UD_HOME
)

1583 
Mode
 |= 0x02;

1585 
rMode
 &= ~0x02;

1586 
rRunFg
 = 0;

1625 if(
swCur
 & 
ST_SW_NEEDLE_HOME

Mode
 |= 0x04;

1628 if(
swCur
 & 
ST_SW_LOOPER_HOME

Mode
 |= 0x08;

1631 if(
swCur
 & 
ST_SW_ROE_X1

rMode
 |= 0x20;

1632 
rMode
 &= ~0x20;

1634 if(
swCur
 & 
ST_SW_ROE_X10

rMode
 |= 0x40;

1635 
rMode
 &= ~0x40;

1638 if(
swCur
 & 
ST_SW_CLAMP1_OPEN_CLOSE

swStFg
 |= ST_SW_CLAMP1_OPEN_CLOSE;

1639 
swStFg
 &~
ST_SW_CLAMP1_OPEN_CLOSE
;

1641 if(
swCur
 & 
ST_SW_CLAMP2_OPEN_CLOSE

swStFg
 |= ST_SW_CLAMP2_OPEN_CLOSE;

1642 
swStFg
 &~
ST_SW_CLAMP2_OPEN_CLOSE
;

1644 if(
swCur
 & 
ST_SW_CLAMP3_OPEN_CLOSE

swStFg
 |= ST_SW_CLAMP3_OPEN_CLOSE;

1645 
swStFg
 &~
ST_SW_CLAMP3_OPEN_CLOSE
;

1647 if(
swCur
 & 
ST_SW_CLAMP4_OPEN_CLOSE

swStFg
 |= ST_SW_CLAMP4_OPEN_CLOSE;

1648 
swStFg
 &~
ST_SW_CLAMP4_OPEN_CLOSE
;

1650 if(
swCur
 & 
ST_SW_VACCUM_OPEN_CLOSE

swStFg
 |= ST_SW_VACCUM_OPEN_CLOSE;

1651 
swStFg
 &~
ST_SW_VACCUM_OPEN_CLOSE
;

1653 if(
swCur
 & 
ST_SW_BAND_CUT

swStFg
 |= ST_SW_BAND_CUT;

1656 if(
swCur
 & 
ST_SW_TEST_SEWING

sysMode
 |
MODE_MTEST
;

1659 if(
sysMode
 & 
MODE_AUTO
)

1661 if(
swCur
 & 
ST_SW_AUTO_STOP
)

1663 
swStFg
 |
ST_SW_AUTO_STOP
;

1669 if(
swCur
 & 
ST_SW_AUTO_START
)

1672 
swStFg
 |
ST_SW_AUTO_START
;

1674 if(
wRunFg
 == 0) sewRunFg = 1;

1675 
	`putCh
(&
hut4
,(
wRunFg
/100)+0x30);

1676 
	`putCh
(&
hut4
,((
wRunFg
%100)/10)+0x30);

1677 
	`putCh
(&
hut4
,(
wRunFg
%10)+0x30);

1684 if(
swChkFg
 == 2)

1686 if(
swCur
 & 
ST_SW_TEST_SEWING

sysMode
 |
MODE_MTEST
;

1692 
swPv
 = 0;

1693 
swCur
 = 0;

1695 
swChkFg
 = 0;

1698 
swC
 = 
SW_SCAN_TCNT
;

1699 
swFg
 = 
SW_SCAN_TSTART
;

1702 
	}
}

1710 
	$RRun
()

1712 

=0;

1713 sigd 
mt
=0;

1714 
t
=0;

1716 if(
rRunFg
 == 0)

1718 #ifde
__DEBUG_SUB__


1719 
	`putS
(&
hut4
,(const *)"ROE start\n");

1721 
rRunFg
 = 1;

1723 
svRC
 = 0;

1724 
svEtiC
 = 0;

1725 
rNowC
 = 
ROE_CLK_REF_CNT
;

1726 
rPvC
 = 
ROE_CLK_REF_CNT
;

1727 
rEvt
 = 0;

1728 
rDFg
 = 0;

1729 
qBuf
 = 0;

1731 
Mode
 = 0;

1733 
Sp
[
INIT_STEP_NEEDLE
] = 0;

1734 
Sp
[
INIT_STEP_LOOPER
] = 0;

1735 
Sp
[
INIT_STEP_MOVING
] = 0;

1736 
Sp
[
INIT_STEP_LIFTING
] = 0;

1738 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_1
);

1739 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_2
);

1740 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_3
);

1741 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_4
);

1743 
Out
[2] &= ~0x01;

1744 
Out
[3] &= ~0x01;

1745 
	`outSigl
(
OUT_CH3
,
Out
[2]);

1746 
	`outSigl
(
OUT_CH4
,
Out
[3]);

1748 if(
rMode
 & 0x01)

1750 
qBuf
 = 
FRQ_25KHz
;

1751 
TIM4
->
ARR
 = 
qBuf
;

1752 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_3
,0);

1753 
	`HAL_TIM_PWM_S
(&
htim4
,
TIM_CHANNEL_3
);

1754 #ifde
__DEBUG_SUB__


1755 
	`putS
(&
hut4
,(const *)"ROE FB start\n");

1758 if(
rMode
 & 0x02)

1760 
qBuf
 = 
FRQ_5KHz
;

1761 
TIM4
->
ARR
 = 
qBuf
;

1762 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_4
,0);

1763 
	`HAL_TIM_PWM_S
(&
htim4
,
TIM_CHANNEL_4
);

1764 #ifde
__DEBUG_SUB__


1765 
	`putS
(&
hut4
,(const *)"ROE UD start\n");

1769 if(
rRunFg
 == 1)

1771 if(
rNowC
 !
rPvC
)

1773 if(
rNowC
 > 
rPvC
)

1775 if(
rMode
 & 0x01)

1777 if(
SEN
 & 
ST_SEN_MOVING_FORWARD_LIM
)

1778 

 = 1;

1780 if(
rMode
 & 0x02)

1782 if(
SEN
 & 
ST_SEN_LIFTING_UP_LIM
)

1783 

 = 1;

1786 if(

 == 0)

1791 #ifdef 
__DEBUG_SUB__


1792 
	`putS
(&
hut4
,(const *)"CW\n");

1798 if(
rMode
 & 0x01)

1801 
SV3_DIR_CCW
;

1803 if(
rMode
 & 0x02)

1806 
SV4_DIR_CCW
;

1810 
mt
 = 
rNowC
 - 
rPvC
;

1812 if(
rMode
 & 0x01)

1814 if(
rMode
 & 0x20)

1816 
t
 = ((()
mt
*1)/
ONE_PULSE_MV
);

1817 if(
rMode
 & 0x40)

1819 
t
 = ((()
mt
*10)/
ONE_PULSE_MV
);

1822 
t
 = ((()
mt
*1)/
ONE_PULSE_MV
);

1824 if(
rMode
 & 0x02)

1826 if(
rMode
 & 0x20)

1827 
t
 = 
mt
*16;

1831 
t
 = 
mt
*16;

1834 
svRC
 +()
t
;

1836 #ifdef 
__DEBUG_SUB__


1837 
	`putS
(&
hut4
,(const *)"CW:");

1838 
	`putCh
(&
hut4
,(
svRC
/100000)+0x30);

1839 
	`putCh
(&
hut4
,((
svRC
%100000)/10000)+0x30);

1840 
	`putCh
(&
hut4
,((
svRC
%10000)/1000)+0x30);

1841 
	`putCh
(&
hut4
,((
svRC
%1000)/100)+0x30);

1842 
	`putCh
(&
hut4
,((
svRC
%100)/10)+0x30);

1843 
	`putCh
(&
hut4
,(
svRC
%10)+0x30);

1844 
	`putCh
(&
hut4
,'\n');

1845 
	`putS
(&
hut4
,(const *)"roePrevCnt:");

1846 
	`putCh
(&
hut4
,(
rPvC
/100000)+0x30);

1847 
	`putCh
(&
hut4
,((
rPvC
%100000)/10000)+0x30);

1848 
	`putCh
(&
hut4
,((
rPvC
%10000)/1000)+0x30);

1849 
	`putCh
(&
hut4
,((
rPvC
%1000)/100)+0x30);

1850 
	`putCh
(&
hut4
,((
rPvC
%100)/10)+0x30);

1851 
	`putCh
(&
hut4
,(
rPvC
%10)+0x30);

1852 
	`putCh
(&
hut4
,'\n');

1853 
	`putS
(&
hut4
,(const *)"roeNowCnt:");

1854 
	`putCh
(&
hut4
,(
rNowC
/100000)+0x30);

1855 
	`putCh
(&
hut4
,((
rNowC
%100000)/10000)+0x30);

1856 
	`putCh
(&
hut4
,((
rNowC
%10000)/1000)+0x30);

1857 
	`putCh
(&
hut4
,((
rNowC
%1000)/100)+0x30);

1858 
	`putCh
(&
hut4
,((
rNowC
%100)/10)+0x30);

1859 
	`putCh
(&
hut4
,(
rNowC
%10)+0x30);

1860 
	`putCh
(&
hut4
,'\n');

1863 
rPvC
 = 
rNowC
;

1867 
rNowC
 = 
rPvC
;

1870 if(
rNowC
 < 
rPvC
)

1872 if(
rMode
 & 0x01)

1874 if(
SEN
 & 
ST_SEN_MOVING_BACKWARD_LIM
)

1875 

 = 1;

1877 if(
rMode
 & 0x02)

1879 if(
SEN
 & 
ST_SEN_LIFTING_DN_LIM
)

1880 

 = 1;

1883 if(

 == 0)

1888 #ifdef 
__DEBUG_SUB__


1889 
	`putS
(&
hut4
,(const *)"CCW\n");

1895 if(
rMode
 & 0x01)

1898 
SV3_DIR_CW
;

1900 if(
rMode
 & 0x02)

1903 
SV4_DIR_CW
;

1908 
mt
 = 
rPvC
 - 
rNowC
;

1910 if(
rMode
 & 0x01)

1912 if(
rMode
 & 0x20)

1914 
t
 = ((()
mt
*1)/
ONE_PULSE_MV
);

1915 if(
rMode
 & 0x40)

1917 
t
 = ((()
mt
*10)/
ONE_PULSE_MV
);

1920 
t
 = ((()
mt
*1)/
ONE_PULSE_MV
);

1922 if(
rMode
 & 0x02)

1924 if(
rMode
 & 0x20)

1925 
t
 = 
mt
*16;

1929 
t
 = 
mt
*16;

1932 
svRC
 +()
t
;

1934 #ifdef 
__DEBUG_SUB__


1935 
	`putS
(&
hut4
,(const *)"CCW:");

1936 
	`putCh
(&
hut4
,(
svRC
/100000)+0x30);

1937 
	`putCh
(&
hut4
,((
svRC
%100000)/10000)+0x30);

1938 
	`putCh
(&
hut4
,((
svRC
%10000)/1000)+0x30);

1939 
	`putCh
(&
hut4
,((
svRC
%1000)/100)+0x30);

1940 
	`putCh
(&
hut4
,((
svRC
%100)/10)+0x30);

1941 
	`putCh
(&
hut4
,(
svRC
%10)+0x30);

1942 
	`putCh
(&
hut4
,'\n');

1943 
	`putS
(&
hut4
,(const *)"roePrevCnt:");

1944 
	`putCh
(&
hut4
,(
rPvC
/100000)+0x30);

1945 
	`putCh
(&
hut4
,((
rPvC
%100000)/10000)+0x30);

1946 
	`putCh
(&
hut4
,((
rPvC
%10000)/1000)+0x30);

1947 
	`putCh
(&
hut4
,((
rPvC
%1000)/100)+0x30);

1948 
	`putCh
(&
hut4
,((
rPvC
%100)/10)+0x30);

1949 
	`putCh
(&
hut4
,(
rPvC
%10)+0x30);

1950 
	`putCh
(&
hut4
,'\n');

1951 
	`putS
(&
hut4
,(const *)"roeNowCnt:");

1952 
	`putCh
(&
hut4
,(
rNowC
/100000)+0x30);

1953 
	`putCh
(&
hut4
,((
rNowC
%100000)/10000)+0x30);

1954 
	`putCh
(&
hut4
,((
rNowC
%10000)/1000)+0x30);

1955 
	`putCh
(&
hut4
,((
rNowC
%1000)/100)+0x30);

1956 
	`putCh
(&
hut4
,((
rNowC
%100)/10)+0x30);

1957 
	`putCh
(&
hut4
,(
rNowC
%10)+0x30);

1958 
	`putCh
(&
hut4
,'\n');

1962 
rPvC
 = 
rNowC
;

1966 
rNowC
 = 
rPvC
;

1975 
rNowC
 = 
ROE_CLK_REF_CNT
;

1976 
rPvC
 = 
ROE_CLK_REF_CNT
;

1979 if(
svRC
 > 
svEtiC
)

1981 if(
rMode
 & 0x01)

1982 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_3
,(
qBuf
+1)/2);

1983 if(
rMode
 & 0x02)

1984 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_4
,(
qBuf
+1)/2);

1988 if(
rMode
 & 0x01)

1989 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_3
,0);

1990 if(
rMode
 & 0x02)

1991 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_4
,0);

1996 
rNowC
 = 
ROE_CLK_REF_CNT
;

1997 
rPvC
 = 
ROE_CLK_REF_CNT
;

2000 #ifdef 
__DEBUG_SUB__


2001 if(
ROEDa
 !
svRC
)

2003 
	`putS
(&
hut4
,(const *)"Roe:");

2004 
	`putCh
(&
hut4
,(
svRC
/100000)+0x30);

2005 
	`putCh
(&
hut4
,((
svRC
%100000)/10000)+0x30);

2006 
	`putCh
(&
hut4
,((
svRC
%10000)/1000)+0x30);

2007 
	`putCh
(&
hut4
,((
svRC
%1000)/100)+0x30);

2008 
	`putCh
(&
hut4
,((
svRC
%100)/10)+0x30);

2009 
	`putCh
(&
hut4
,(
svRC
%10)+0x30);

2010 
	`putCh
(&
hut4
,'\n');

2011 
	`putS
(&
hut4
,(const *)"Eti:");

2012 
	`putCh
(&
hut4
,(
svEtiC
/100000)+0x30);

2013 
	`putCh
(&
hut4
,((
svEtiC
%100000)/10000)+0x30);

2014 
	`putCh
(&
hut4
,((
svEtiC
%10000)/1000)+0x30);

2015 
	`putCh
(&
hut4
,((
svEtiC
%1000)/100)+0x30);

2016 
	`putCh
(&
hut4
,((
svEtiC
%100)/10)+0x30);

2017 
	`putCh
(&
hut4
,(
svEtiC
%10)+0x30);

2018 
	`putCh
(&
hut4
,'\n');

2020 
ROEDa
 = 
svRC
;

2026 
	}
}

2033 
	$mTeMode
()

2035 if(
tSewRunFg
 == 0)

2037 #ifdef 
__DEBUG_SUB__


2038 
	`putS
(&
hut4
,(const *)"MTS srart\n");

2040 if((!(
SEN
 & 
ST_SEN_NEEDLE_HOME
))|| (!(SEN & 
ST_SEN_LOOPER_HOME
)))

2042 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_1
);

2043 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_2
);

2044 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_3
);

2046 
tSewRunFg
 = 0;

2047 
tMovFg
 = 0;

2048 
tSewC
 = 0;

2049 
tMovC
 = 0;

2050 
tMovMaxC
 = 0;

2052 
sysMode
 &~
MODE_MTEST
;

2054 #ifdef 
__DEBUG_SUB__


2055 if(
SEN
 & 
ST_SEN_MOVING_FORWARD_LIM
)

2056 
	`putS
(&
hut4
,(const *)"FLS on\n");

2057 if(!(
SEN
 & 
ST_SEN_NEEDLE_HOME
))

2058 
	`putS
(&
hut4
,(const *)"NHS off\n");

2059 if(!(
SEN
 & 
ST_SEN_LOOPER_HOME
))

2060 
	`putS
(&
hut4
,(const *)"LHS off\n");

2065 
tSewRunFg
 = 1;

2067 
tMovFg
 = 0;

2068 
tSewC
 = 0;

2069 
tMovC
 = 0;

2070 
tMovMaxC
 = 0;

2072 
Out
[0] &= ~0x01;

2073 
Out
[1] &= ~0x01;

2074 
Out
[2] &= ~0x01;

2075 
	`outSigl
(
OUT_CH1
,
Out
[0]);

2076 
	`outSigl
(
OUT_CH2
,
Out
[1]);

2077 
	`outSigl
(
OUT_CH3
,
Out
[2]);

2079 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_1
);

2080 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_2
);

2081 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_3
);

2083 
TIM4
->
ARR
 = 
FRQ_200Hz
;

2085 
SV1_DIR_CCW
;

2086 
SV2_DIR_CCW
;

2087 
SV3_DIR_CCW
;

2089 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_1
,(
FRQ_200Hz
+1)/2);

2090 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_2
,(
FRQ_200Hz
+1)/2);

2091 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_3
,(
FRQ_200Hz
+1)/2);

2093 
	`HAL_TIM_PWM_S
(&
htim4
,
TIM_CHANNEL_1
);

2094 
	`HAL_TIM_PWM_S
(&
htim4
,
TIM_CHANNEL_2
);

2097 if(
tSewRunFg
 == 1)

2099 if(
tMovC
 =
MOV_1CYCLE_PULSE
)

2101 
tMovFg
 = 0;

2103 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_3
);

2105 if(
tSewC
 =
SEW_1CYCLE_PULSE
)

2108 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_1
);

2109 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_2
);

2110 #ifde
__DEBUG_SUB__


2111 
	`putS
(&
hut4
,(const *)"tmmc:");

2112 
	`putCh
(&
hut4
,(
tMovMaxC
/1000)+0x30);

2113 
	`putCh
(&
hut4
,((
tMovMaxC
%1000)/100)+0x30);

2114 
	`putCh
(&
hut4
,((
tMovMaxC
%100)/10)+0x30);

2115 
	`putCh
(&
hut4
,(
tMovMaxC
%10)+0x30);

2116 
	`putCh
(&
hut4
,'\n');

2117 
	`putS
(&
hut4
,(const *)"tsc:");

2118 
	`putCh
(&
hut4
,(
tSewC
/1000)+0x30);

2119 
	`putCh
(&
hut4
,((
tSewC
%1000)/100)+0x30);

2120 
	`putCh
(&
hut4
,((
tSewC
%100)/10)+0x30);

2121 
	`putCh
(&
hut4
,(
tSewC
%10)+0x30);

2122 
	`putCh
(&
hut4
,'\n');

2124 
tSewC
 = 0;

2126 
tSewRunFg
 = 0;

2127 
tMovFg
 = 0;

2128 
tMovC
 = 0;

2129 
tMovMaxC
 = 0;

2131 
sysMode
 &~
MODE_MTEST
;

2133 #ifdef 
__DEBUG_SUB__


2134 
	`putS
(&
hut4
,(const *)"MTSnd\n");

2140 if(
tSewC
 =
SEW_1CYCLE_PULSE
)

2142 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_1
);

2143 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_2
);

2145 if(
tSewC
 =
SEW_OFF_FABRIC_PULSE
)

2148 
tMovC
 = 0;

2150 if(
tMovFg
 == 0)

2152 
tMovFg
 = 1;

2154 
	`HAL_TIM_PWM_S
(&
htim4
,
TIM_CHANNEL_3
);

2174 
	}
}

2182 
	$muMode
()

2184 if(
swStFg
 & 
ST_SW_CLAMP1_OPEN_CLOSE

	`Cmp
(
OUT_CLAMP1_CNTL
,
CLAMP_CLOSE
);

2185 
	`Cmp
(
OUT_CLAMP1_CNTL
,
CLAMP_OPEN
);

2187 if(
swStFg
 & 
ST_SW_CLAMP2_OPEN_CLOSE

	`Cmp
(
OUT_CLAMP2_CNTL
,
CLAMP_CLOSE
);

2188 
	`Cmp
(
OUT_CLAMP2_CNTL
,
CLAMP_OPEN
);

2190 if(
swStFg
 & 
ST_SW_CLAMP3_OPEN_CLOSE

	`Cmp
(
OUT_CLAMP3_CNTL
,
CLAMP_CLOSE
);

2191 
	`Cmp
(
OUT_CLAMP3_CNTL
,
CLAMP_OPEN
);

2193 if(
swStFg
 & 
ST_SW_CLAMP4_OPEN_CLOSE

	`Cmp
(
OUT_CLAMP4_CNTL
,
CLAMP_CLOSE
);

2194 
	`Cmp
(
OUT_CLAMP4_CNTL
,
CLAMP_OPEN
);

2196 if(
swStFg
 & 
ST_SW_VACCUM_OPEN_CLOSE

	`Vaccum
(
VACCUM_OPEN
);

2197 
	`Vaccum
(
VACCUM_CLOSE
);

2199 if(
rMode
 & 0x1f)

2201 
	`RRun
();

2205 if(
Mode
 & 0x01)

2207 
	`Movg
(0);

2209 if((
Sp
[
INIT_STEP_MOVING
] == 2) || (initStep[INIT_STEP_MOVING] == 3))

2211 
Mode
 &= ~0x01;

2212 
Sp
[
INIT_STEP_MOVING
] = 0;

2216 if(
Mode
 & 0x02)

2218 
	`Lig
(1);

2220 if((
Sp
[
INIT_STEP_LIFTING
] == 2) || (initStep[INIT_STEP_LIFTING] == 3))

2222 
Mode
 &= ~0x02;

2223 
Sp
[
INIT_STEP_LIFTING
] = 0;

2227 if(
Mode
 & 0x04)

2229 
	`Nd
();

2231 if((
Sp
[
INIT_STEP_NEEDLE
] == 2) || (initStep[INIT_STEP_NEEDLE] == 3))

2233 
Mode
 &= ~0x04;

2234 
Sp
[
INIT_STEP_NEEDLE
] = 0;

2238 if(
Mode
 & 0x08)

2240 
	`Loݔ
();

2242 if((
Sp
[
INIT_STEP_LOOPER
] == 2) || (initStep[INIT_STEP_LOOPER] == 3))

2244 
Mode
 &= ~0x08;

2245 
Sp
[
INIT_STEP_LOOPER
] = 0;

2249 if(
sysMode
 & 
MODE_MTEST
)

2251 
	`mTeMode
();

2255 if(
swStFg
 & 
ST_SW_BAND_CUT
)

2257 
	`BdCut
();

2259 if(
Sp
 == 2)

2261 
Sp
 = 0;

2262 
swStFg
 &~
ST_SW_BAND_CUT
;

2265 
	}
}

2272 
	$autoMode
()

2295 if(
wRunFg
 == 1)

2297 #ifdef 
__DEBUG_SUB__


2298 
	`putS
(&
hut4
,(cڡ 
ut8_t
 *)"auto init\n");

2302 
wA
 = 
SEW_ACT_FR
;

2304 
wRunFg
 = 2;

2307 
loݔFg
 = 0;

2308 
loݔC
 = 0;

2309 
lfFg
 = 0;

2310 
lfC
 = 0;

2311 
lfCLK
 = 0;

2312 
movFg
 = 0;

2313 
movC
 = 0;

2314 
movCLK
 = 0;

2316 
Sp
[
INIT_STEP_MOVING
] = 0;

2317 
Sp
[
INIT_STEP_CLAMP
] = 0;

2318 
Sp
[
INIT_STEP_NEEDLE
] = 0;

2319 
Sp
[
INIT_STEP_LOOPER
] = 0;

2321 
Out
[0] &= ~0x01;

2322 
Out
[1] &= ~0x01;

2323 
Out
[2] &= ~0x01;

2324 
	`outSigl
(
OUT_CH1
,
Out
[0]);

2325 
	`outSigl
(
OUT_CH2
,
Out
[1]);

2326 
	`outSigl
(
OUT_CH3
,
Out
[2]);

2328 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_1
);

2329 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_2
);

2330 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_3
);

2337 
TIM4
->
ARR
 = 
FRQ_15KHz
;

2338 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_1
,(
FRQ_10KHz
+1)/2);

2339 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_2
,(
FRQ_10KHz
+1)/2);

2340 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_3
,(
FRQ_10KHz
+1)/2);

2342 
SV1_DIR_CCW
;

2343 
SV2_DIR_CCW
;

2344 
SV3_DIR_CCW
;

2349 if(
wRunFg
 == 2)

2351 
	`Cmp
(
OUT_CLAMP1_CNTL
|
OUT_CLAMP2_CNTL
|
OUT_CLAMP3_CNTL
|
OUT_CLAMP4_CNTL
, 
CLAMP_CLOSE
);

2354 
C
 = 1000;

2355 
Fg
 = 1;

2357 
wRunFg
 = 3;

2359 #ifdef 
__DEBUG_SUB__


2360 
	`putS
(&
hut4
,(cڡ 
ut8_t
 *)"clamp close\n");

2377 if(
wRunFg
 == 3)

2379 if(
Fg
 == 2)

2381 
Fg
 = 0;

2382 
C
 = 0;

2384 
wRunFg
 = 4;

2387 if(
wRunFg
 == 4)

2389 if(
movFg
 == 0)

2391 
movCLK
 = ()(20/
ONE_PULSE_MV
);

2392 #ifdef 
__DEBUG_SUB__


2393 
	`putCh
(&
hut4
,(
movCLK
/10000)+0x30);

2394 
	`putCh
(&
hut4
,((
movCLK
%10000)/1000)+0x30);

2395 
	`putCh
(&
hut4
,((
movCLK
%1000)/100)+0x30);

2396 
	`putCh
(&
hut4
,((
movCLK
%100)/10)+0x30);

2397 
	`putCh
(&
hut4
,(
movCLK
%10)+0x30);

2399 
	`putS
(&
hut4
,(cڡ 
ut8_t
 *)"mov 20mm start\n");

2401 
movFg
 = 1;

2402 
movC
 = 0;

2411 
	`HAL_TIM_PWM_S
(&
htim4
,
TIM_CHANNEL_3
);

2415 if(
movCLK
 =
movC
)

2417 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_3
);

2419 
movFg
 = 0;

2420 
movC
 = 0;

2421 
movCLK
 = 0;

2423 
wRunC
 = 0;

2424 
wMovMaxC
 = 0;

2425 
wMovC
 = 0;

2426 
wMovFg
 = 0;

2428 
wRunFg
 = 5;

2429 #ifdef 
__DEBUG_SUB__


2430 
	`putS
(&
hut4
,(cڡ 
ut8_t
 *)"20mm movnd\n");

2433 
	`HAL_TIM_PWM_S
(&
htim4
,
TIM_CHANNEL_1
);

2434 
	`HAL_TIM_PWM_S
(&
htim4
,
TIM_CHANNEL_2
);

2438 if(
wRunFg
 == 5)

2440 if(
wMovMaxC
 =
MOV_MAX_PULSE
)

2442 
wMovFg
 = 0;

2444 
	`HAL_TIM_PWM_St
(&
htim4
, 
TIM_CHANNEL_3
);

2446 if(
wRunC
 =
SEW_1CYCLE_PULSE
)

2448 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_1
);

2449 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_2
);

2450 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_3
);

2452 
wRunC
 = 0;

2453 
wMovMaxC
 = 0;

2454 
wMovC
 = 0;

2456 
wRunFg
 = 6;

2458 
wA
 = 
SEW_ACT_FIN
;

2459 #ifdef 
__DEBUG_SUB__


2460 
	`putS
(&
hut4
,(cڡ 
ut8_t
 *)"sewnd\n");

2473 if(
wRunC
 =
SEW_1CYCLE_PULSE
)

2475 
wRunC
 = 0;

2477 if(
wRunC
 =
SEW_OFF_FABRIC_PULSE
)

2479 
wMovC
 = 0;

2480 
wMovFg
 = 1;

2487 
	`HAL_TIM_PWM_S
(&
htim4
,
TIM_CHANNEL_3
);

2491 if(
wMovFg
 == 1)

2493 if(
wMovC
 =
MOV_1CYCLE_PULSE
)

2495 
wMovFg
 = 0;

2496 
wMovC
 = 0;

2500 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_3
);

2506 if(
wRunFg
 == 6)

2508 if(
loݔFg
 == 0)

2510 #ifdef 
__DEBUG_SUB__


2511 
	`putS
(&
hut4
,(cڡ 
ut8_t
 *)"looper back start\n");

2514 
loݔFg
 = 1;

2515 
loݔC
 = 0;

2518 
TIM4
->
ARR
 = 
FRQ_200Hz
;

2520 
SV2_DIR_CW
;

2522 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_2
,(
FRQ_200Hz
+1)/2);

2524 
	`HAL_TIM_PWM_S
(&
htim4
,
TIM_CHANNEL_2
);

2528 if(
loݔC
 == 800)

2530 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_2
);

2532 
loݔFg
 = 0;

2533 
loݔC
 = 0;

2535 
wRunFg
 = 7;

2536 #ifdef 
__DEBUG_SUB__


2537 
	`putS
(&
hut4
,(cڡ 
ut8_t
 *)"looper backnd\n");

2543 if(
wRunFg
 == 7)

2545 if(
movFg
 == 0)

2547 #ifdef 
__DEBUG_SUB__


2548 
	`putS
(&
hut4
,(cڡ 
ut8_t
 *)"200mm mov start\n");

2551 
movFg
 = 1;

2552 
movC
 = 0;

2554 
movCLK
 = 
MOV_200MM_CLOCK
;

2559 
TIM4
->
ARR
 = 
FRQ_5KHz
;

2560 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_3
,(
FRQ_5KHz
+1)/2);

2562 
SV3_DIR_CCW
;

2564 
	`HAL_TIM_PWM_S
(&
htim4
,
TIM_CHANNEL_3
);

2568 if(
movCLK
 =
movC
)

2570 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_3
);

2572 
movFg
 = 0;

2573 
movC
 = 0;

2574 
movCLK
 = 0;

2576 
wRunFg
 = 8;

2578 
	`Vaccum
(
VACCUM_OPEN
);

2579 #ifdef 
__DEBUG_SUB__


2580 
	`putS
(&
hut4
,(cڡ 
ut8_t
 *)"mov 200mmndnd vac open\n");

2586 if(
wRunFg
 == 8)

2588 
	`BdCut
();

2590 if(
bcSp
 == 2)

2592 #ifdef 
__DEBUG_SUB__


2593 
	`putS
(&
hut4
,(cڡ 
ut8_t
 *)"band cutnd\n");

2596 
bcSp
 = 0;

2598 
wRunFg
 = 9;

2601 if(
wRunFg
 == 9)

2603 if(
lfFg
 == 0)

2605 #ifdef 
__DEBUG_SUB__


2606 
	`putS
(&
hut4
,(cڡ 
ut8_t
 *)"lf 10mm up start\n");

2609 
lfFg
 = 1;

2610 
lfC
 = 0;

2611 
lfCLK
 = 1600;

2613 
SV4_DIR_CCW
;

2614 
TIM4
->
ARR
 = 
FRQ_1KHz
;

2615 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_4
,(
FRQ_1KHz
+1)/2);

2616 
	`HAL_TIM_PWM_S
(&
htim4
, 
TIM_CHANNEL_4
);

2618 if(
lfFg
 == 1)

2620 if(
lfCLK
 =
lfC
)

2622 
	`HAL_TIM_PWM_St
(&
htim4
, 
TIM_CHANNEL_4
);

2624 
lfFg
 = 0;

2625 
lfC
 = 0;

2626 
lfCLK
 = 0;

2628 
wRunFg
 = 10;

2629 #ifdef 
__DEBUG_SUB__


2630 
	`putS
(&
hut4
,(cڡ 
ut8_t
 *)"lf 10mm upnd\n");

2636 if(
wRunFg
 == 10)

2638 #ifdef 
__DEBUG_SUB__


2639 
	`putS
(&
hut4
,(cڡ 
ut8_t
 *)"clampll open\n");

2642 
	`Cmp
(
OUT_CLAMP1_CNTL
|
OUT_CLAMP2_CNTL
|
OUT_CLAMP3_CNTL
|
OUT_CLAMP4_CNTL
, 
CLAMP_OPEN
);

2644 
wRunFg
 = 11;

2659 if(
wRunFg
 == 11)

2661 
wA
 = 
SEW_ACT_BR
;

2663 
	`Movg
(1);

2665 if(
Sp
[
INIT_STEP_MOVING
] == 2)

2667 #ifdef 
__DEBUG_SUB__


2668 
	`putS
(&
hut4
,(cڡ 
ut8_t
 *)"mov homend\n");

2671 
wRunFg
 = 12;

2672 
Sp
[
INIT_STEP_MOVING
] = 0;

2674 if(
Sp
[
INIT_STEP_MOVING
] == 3)

2676 #ifdef 
__DEBUG_SUB__


2677 
	`putS
(&
hut4
,(cڡ 
ut8_t
 *)"moving homerr\n");

2681 if(
movFg
 == 2)

2683 if(
lfFg
 == 0)

2685 #ifdef 
__DEBUG_SUB__


2686 
	`putS
(&
hut4
,(cڡ 
ut8_t
 *)"lift down 10mm start\n");

2689 
lfFg
 = 1;

2690 
lfC
 = 0;

2691 
lfCLK
 = 1600;

2693 
SV4_DIR_CW
;

2694 
TIM4
->
ARR
 = 
FRQ_1KHz
;

2695 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_4
,(
FRQ_1KHz
+1)/2);

2696 
	`__HAL_TIM_SET_COMPARE
(&
htim4
,
TIM_CHANNEL_3
,(
FRQ_1KHz
+1)/2);

2697 
	`HAL_TIM_PWM_S
(&
htim4
, 
TIM_CHANNEL_4
);

2701 if(
lfFg
 == 1)

2703 if(
lfCLK
 =
lfC
)

2705 
	`HAL_TIM_PWM_St
(&
htim4
, 
TIM_CHANNEL_4
);

2707 
lfFg
 = 2;

2708 
lfC
 = 0;

2709 
lfCLK
 = 0;

2710 
movFg
 = 0;

2715 #ifdef 
__DEBUG_SUB__


2716 
	`putS
(&
hut4
,(cڡ 
ut8_t
 *)"lift dn 10mmnd\n");

2723 if(
wRunFg
 == 12)

2725 #ifdef 
__DEBUG_SUB__


2726 
	`putS
(&
hut4
,(cڡ 
ut8_t
 *)"clampll close\n");

2728 
	`Cmp
(
OUT_CLAMP1_CNTL
|
OUT_CLAMP2_CNTL
|
OUT_CLAMP3_CNTL
|
OUT_CLAMP4_CNTL
, 
CLAMP_CLOSE
);

2730 
wRunFg
 = 13;

2732 
lfFg
 = 0;

2747 if(
wRunFg
 == 13)

2749 
	`Nd
();

2750 
	`Loݔ
();

2752 if((
Sp
[
INIT_STEP_NEEDLE
] =2&& (Sp[
INIT_STEP_LOOPER
] == 2))

2754 #ifdef 
__DEBUG_SUB__


2755 
	`putS
(&
hut4
,(cڡ 
ut8_t
 *)"needlendooper initnd\n");

2759 
wRunFg
 = 0;

2760 
Sp
[
INIT_STEP_NEEDLE
] = 0;

2761 
Sp
[
INIT_STEP_LOOPER
] = 0;

2763 
wRunFg
 = 0;

2765 
wA
 = 
SEW_ACT_WAIT
;

2767 
	`Vaccum
(
VACCUM_CLOSE
);

2771 if(
Sp
[
INIT_STEP_NEEDLE
] == 3)

2773 #ifdef 
__DEBUG_SUB__


2774 
	`putS
(&
hut4
,(cڡ 
ut8_t
 *)"needle initrr\n");

2778 if(
Sp
[
INIT_STEP_LOOPER
] == 3)

2780 #ifdef 
__DEBUG_SUB__


2781 
	`putS
(&
hut4
,(cڡ 
ut8_t
 *)"needle initrr\n");

2835 
	}
}

2842 
	$rugPross
()

2844 
r
=0;

2846 if(
sysSFg
 == 1)

2848 if(
rCode
[3] & 0x01
r
 |= 0x0001;

2851 
Out
[0] &= ~0x01;

2852 
	`outSigl
(
OUT_CH1
,
Out
[0]);

2854 if(
svRdy
 & 0x01
r
 |= 0x0100;

2857 if(
rCode
[3] & 0x02
r
 |= 0x0002;

2860 
Out
[1] &= ~0x01;

2861 
	`outSigl
(
OUT_CH2
,
Out
[1]);

2863 if(
svRdy
 & 0x02
r
 |= 0x0200;

2866 if(
rCode
[3] & 0x04
r
 |= 0x0004;

2869 
Out
[2] &= ~0x01;

2870 
	`outSigl
(
OUT_CH3
,
Out
[2]);

2872 if(
svRdy
 & 0x04
r
 |= 0x0400;

2875 if(
rCode
[3] & 0x08
r
 |= 0x0008;

2878 
Out
[3] &= ~0x01;

2879 
	`outSigl
(
OUT_CH4
,
Out
[3]);

2881 if(
svRdy
 & 0x08
r
 |= 0x0800;

2884 if(
SW
 & 
ST_SW_EMS
)

2886 
r
 |= 0x0010;

2889 if(!(
SEN
 & 
ST_SEN_MOVING_HOME
))

2891 
r
 |= 0x0020;

2894 if(
comOKFg
 != 1)

2896 
r
 |= 0x0040;

2900 if(
r
 == 0)

2902 #ifde
__DEBUG_SUB__


2903 
	`putS
(&
hut4
,(const *)"all OK\n");

2906 
sysSFg
 = 2;

2908 
Sp
[
INIT_STEP_LIFTING
] = 0;

2909 
Sp
[
INIT_STEP_NEEDLE
] = 0;

2910 
Sp
[
INIT_STEP_LOOPER
] = 0;

2911 
Sp
[
INIT_STEP_MOVING
] = 0;

2913 
Sp
 = 0;

2917 #ifde
__DEBUG_SUB__


2918 if(
r
 & 0x0001
	`putS
(&
hut4
,(const *)"SV1 ALARM\n");

2921 if(
r
 & 0x0100
	`putS
(&
hut4
,(const *)"SV1 NOT READY\n");

2922 
	`putS
(&
hut4
,(const *)"SV1 READY\n");

2924 if(
r
 & 0x0002
	`putS
(&
hut4
,(const *)"SV2 ALARM\n");

2927 if(
r
 & 0x0200
	`putS
(&
hut4
,(const *)"SV2 NOT READY\n");

2928 
	`putS
(&
hut4
,(const *)"SV2 READY\n");

2931 if(
r
 & 0x0004
	`putS
(&
hut4
,(const *)"SV3 ALARM\n");

2934 if(
r
 & 0x0400
	`putS
(&
hut4
,(const *)"SV3 NOT READY\n");

2935 
	`putS
(&
hut4
,(const *)"SV3 READY\n");

2937 if(
r
 & 0x0008
	`putS
(&
hut4
,(const *)"SV4 ALARM\n");

2940 if(
r
 & 0x0800
	`putS
(&
hut4
,(const *)"SV4 NOT READY\n");

2941 
	`putS
(&
hut4
,(const *)"SV4 READY\n");

2946 if(
sysSFg
 == 2)

2948 if(
sysMode
 =
MODE_EMS
)

2950 
Sp
[
INIT_STEP_LIFTING
] = 0;

2951 
Sp
[
INIT_STEP_NEEDLE
] = 0;

2952 
Sp
[
INIT_STEP_LOOPER
] = 0;

2953 
Sp
[
INIT_STEP_MOVING
] = 0;

2954 
Sp
[
INIT_STEP_CLAMP
] = 0;

2956 
Sp
 = 0;

2957 
CkC
 = 0;

2958 
CkFg
 = 0;

2962 
	`Mache
();

2964 if((
Sp
 >= 10) && (stStep <= 16))

2966 if(
Sp
 == 10)

2968 #ifde
__DEBUG_SUB__


2969 
	`putS
(&
hut4
,"Init Clamp openrr\n");

2971 
Sp
 = 1;

2973 if(
Sp
 == 11)

2975 #ifde
__DEBUG_SUB__


2976 
	`putS
(&
hut4
,"Init Lifting homerr\n");

2978 
Sp
 = 2;

2980 if((
Sp
 >= 12) && (stStep <= 14))

2982 #ifde
__DEBUG_SUB__


2983 
	`putS
(&
hut4
,"Init Needle,Looper,Movingrr\n");

2985 
Sp
 = 3;

2987 if(
Sp
 == 16)

2989 #ifde
__DEBUG_SUB__


2990 
	`putS
(&
hut4
,"Init Clamp closerr\n");

2992 
Sp
 = 4;

2996 #ifde
__DEBUG_SUB__


2997 
	`putS
(&
hut4
,"Unknownrr\n");

2999 
Sp
 = 0;

3004 #ifde
__DEBUG_SUB__


3005 
	`putS
(&
hut4
,"init ok\n");

3007 
sysSFg
 = 3;

3009 
CkC
 = 0;

3012 
Sp
[
INIT_STEP_LIFTING
] = 0;

3013 
Sp
[
INIT_STEP_NEEDLE
] = 0;

3014 
Sp
[
INIT_STEP_LOOPER
] = 0;

3015 
Sp
[
INIT_STEP_MOVING
] = 0;

3016 
Sp
[
INIT_STEP_CLAMP
] = 0;

3018 
CkC
 = 0;

3019 
CkFg
 = 0;

3024 if(
sysSFg
 == 2)

3026 if(
sysMode
 & 
MODE_EMS
)

3032 if(
sysMode
 & 
MODE_MANUAL
)

3034 
	`muMode
();

3036 if(
sysMode
 & 
MODE_AUTO
)

3040 
	`autoMode
();

3043 if((!(
rCode
[0] & 0xf3)) && (!(errorCode[1] & 0xcf)) && (!(errorCode[2] & 0x03) && (!(errorCode[3] & 0x0f))

3049 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_1
);

3050 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_2
);

3051 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_3
);

3052 
	`HAL_TIM_PWM_St
(&
htim4
,
TIM_CHANNEL_4
);

3060 
	}
}

	@Startup/startup_stm32f407vetx.s

28 .
syax
 
	gunifd


29 .
u
 
	gc܋x
-
	gm4


30 .
u
 
	gsov


31 .
	gthumb


33 .
glob
 
	gg_pVes


34 .
glob
 
	gDeu_Hdr


38 .
wd
 
	g_sida


40 .
wd
 
	g_sda


42 .
wd
 
	g_eda


44 .
wd
 
	g_sbss


46 .
wd
 
	g_ebss


58 .
	gi
 .
	gxt
.
	gRet_Hdr


59 .
wk
 
	gRet_Hdr


60 .
ty
 
	gRet_Hdr
, %
funi


61 
	gRet_Hdr
:

62 
ldr
 

, =
_eack


65 
ldr
 
r0
, =
_sda


66 
ldr
 
r1
, =
_eda


67 
ldr
 
r2
, =
_sida


68 
movs
 
r3
, #0

69 
b
 
LoCyDaIn


71 
	gCyDaIn
:

72 
ldr
 
r4
, [
r2
, 
r3
]

73 
r
 
	gr4
, [
r0
, 
r3
]

74 
adds
 
	gr3
,3, #4

76 
	gLoCyDaIn
:

77 
adds
 
r4
, 
	gr0
, 
r3


78 
cmp
 
	gr4
, 
r1


79 
bcc
 
CyDaIn


82 
ldr
 
	gr2
, =
_sbss


83 
ldr
 
r4
, =
_ebss


84 
movs
 
r3
, #0

85 
b
 
LoFlZobss


87 
	gFlZobss
:

88 
r
 
r3
, [
r2
]

89 
adds
 
	gr2
,2, #4

91 
	gLoFlZobss
:

92 
cmp
 
r2
, 
r4


93 
bcc
 
FlZobss


96 
bl
 
SyemIn


98 
bl
 
__libc__y


100 
bl
 
ma


101 
bx
 
	g


102 .
size
 
	gRet_Hdr
, .-Reset_Handler

111 .
	gi
 .
	gxt
.
	gDeu_Hdr
,"ax",%
ogbs


112 
	gDeu_Hdr
:

113 
Infe_Lo
:

114 
b
 
Infe_Lo


115 .
size
 
Deu_Hdr
, .-
	gDeu_Hdr


123 .
	gi
 .
	gi_ve
,"a",%
	gogbs


124 .
ty
 
	gg_pVes
, %
	gobje


125 .
size
 
	gg_pVes
, .-
g_pVes


128 
	gg_pVes
:

129 .
wd
 
_eack


130 .
wd
 
Ret_Hdr


131 .
wd
 
NMI_Hdr


132 .
wd
 
HdFau_Hdr


133 .
wd
 
MemMage_Hdr


134 .
wd
 
BusFau_Hdr


135 .
wd
 
UgeFau_Hdr


136 .
wd
 0

137 .
wd
 0

138 .
wd
 0

139 .
wd
 0

140 .
wd
 
SVC_Hdr


141 .
wd
 
DebugM_Hdr


142 .
wd
 0

143 .
wd
 
PdSV_Hdr


144 .
wd
 
SysTick_Hdr


147 .
wd
 
WWDG_IRQHdr


148 .
wd
 
PVD_IRQHdr


149 .
wd
 
TAMP_STAMP_IRQHdr


150 .
wd
 
RTC_WKUP_IRQHdr


151 .
wd
 
FLASH_IRQHdr


152 .
wd
 
RCC_IRQHdr


153 .
wd
 
EXTI0_IRQHdr


154 .
wd
 
EXTI1_IRQHdr


155 .
wd
 
EXTI2_IRQHdr


156 .
wd
 
EXTI3_IRQHdr


157 .
wd
 
EXTI4_IRQHdr


158 .
wd
 
DMA1_Sm0_IRQHdr


159 .
wd
 
DMA1_Sm1_IRQHdr


160 .
wd
 
DMA1_Sm2_IRQHdr


161 .
wd
 
DMA1_Sm3_IRQHdr


162 .
wd
 
DMA1_Sm4_IRQHdr


163 .
wd
 
DMA1_Sm5_IRQHdr


164 .
wd
 
DMA1_Sm6_IRQHdr


165 .
wd
 
ADC_IRQHdr


166 .
wd
 
CAN1_TX_IRQHdr


167 .
wd
 
CAN1_RX0_IRQHdr


168 .
wd
 
CAN1_RX1_IRQHdr


169 .
wd
 
CAN1_SCE_IRQHdr


170 .
wd
 
EXTI9_5_IRQHdr


171 .
wd
 
TIM1_BRK_TIM9_IRQHdr


172 .
wd
 
TIM1_UP_TIM10_IRQHdr


173 .
wd
 
TIM1_TRG_COM_TIM11_IRQHdr


174 .
wd
 
TIM1_CC_IRQHdr


175 .
wd
 
TIM2_IRQHdr


176 .
wd
 
TIM3_IRQHdr


177 .
wd
 
TIM4_IRQHdr


178 .
wd
 
I2C1_EV_IRQHdr


179 .
wd
 
I2C1_ER_IRQHdr


180 .
wd
 
I2C2_EV_IRQHdr


181 .
wd
 
I2C2_ER_IRQHdr


182 .
wd
 
SPI1_IRQHdr


183 .
wd
 
SPI2_IRQHdr


184 .
wd
 
USART1_IRQHdr


185 .
wd
 
USART2_IRQHdr


186 .
wd
 
USART3_IRQHdr


187 .
wd
 
EXTI15_10_IRQHdr


188 .
wd
 
RTC_Arm_IRQHdr


189 .
wd
 
OTG_FS_WKUP_IRQHdr


190 .
wd
 
TIM8_BRK_TIM12_IRQHdr


191 .
wd
 
TIM8_UP_TIM13_IRQHdr


192 .
wd
 
TIM8_TRG_COM_TIM14_IRQHdr


193 .
wd
 
TIM8_CC_IRQHdr


194 .
wd
 
DMA1_Sm7_IRQHdr


195 .
wd
 
FSMC_IRQHdr


196 .
wd
 
SDIO_IRQHdr


197 .
wd
 
TIM5_IRQHdr


198 .
wd
 
SPI3_IRQHdr


199 .
wd
 
UART4_IRQHdr


200 .
wd
 
UART5_IRQHdr


201 .
wd
 
TIM6_DAC_IRQHdr


202 .
wd
 
TIM7_IRQHdr


203 .
wd
 
DMA2_Sm0_IRQHdr


204 .
wd
 
DMA2_Sm1_IRQHdr


205 .
wd
 
DMA2_Sm2_IRQHdr


206 .
wd
 
DMA2_Sm3_IRQHdr


207 .
wd
 
DMA2_Sm4_IRQHdr


208 .
wd
 
ETH_IRQHdr


209 .
wd
 
ETH_WKUP_IRQHdr


210 .
wd
 
CAN2_TX_IRQHdr


211 .
wd
 
CAN2_RX0_IRQHdr


212 .
wd
 
CAN2_RX1_IRQHdr


213 .
wd
 
CAN2_SCE_IRQHdr


214 .
wd
 
OTG_FS_IRQHdr


215 .
wd
 
DMA2_Sm5_IRQHdr


216 .
wd
 
DMA2_Sm6_IRQHdr


217 .
wd
 
DMA2_Sm7_IRQHdr


218 .
wd
 
USART6_IRQHdr


219 .
wd
 
I2C3_EV_IRQHdr


220 .
wd
 
I2C3_ER_IRQHdr


221 .
wd
 
OTG_HS_EP1_OUT_IRQHdr


222 .
wd
 
OTG_HS_EP1_IN_IRQHdr


223 .
wd
 
OTG_HS_WKUP_IRQHdr


224 .
wd
 
OTG_HS_IRQHdr


225 .
wd
 
DCMI_IRQHdr


226 .
wd
 0

227 .
wd
 
HASH_RNG_IRQHdr


228 .
wd
 
FPU_IRQHdr


238 .
wk
 
NMI_Hdr


239 .
thumb_t
 
NMI_Hdr
,
	gDeu_Hdr


241 .
wk
 
	gHdFau_Hdr


242 .
thumb_t
 
	gHdFau_Hdr
,
	gDeu_Hdr


244 .
wk
 
	gMemMage_Hdr


245 .
thumb_t
 
	gMemMage_Hdr
,
	gDeu_Hdr


247 .
wk
 
	gBusFau_Hdr


248 .
thumb_t
 
	gBusFau_Hdr
,
	gDeu_Hdr


250 .
wk
 
	gUgeFau_Hdr


251 .
thumb_t
 
	gUgeFau_Hdr
,
	gDeu_Hdr


253 .
wk
 
	gSVC_Hdr


254 .
thumb_t
 
	gSVC_Hdr
,
	gDeu_Hdr


256 .
wk
 
	gDebugM_Hdr


257 .
thumb_t
 
	gDebugM_Hdr
,
	gDeu_Hdr


259 .
wk
 
	gPdSV_Hdr


260 .
thumb_t
 
	gPdSV_Hdr
,
	gDeu_Hdr


262 .
wk
 
	gSysTick_Hdr


263 .
thumb_t
 
	gSysTick_Hdr
,
	gDeu_Hdr


265 .
wk
 
	gWWDG_IRQHdr


266 .
thumb_t
 
	gWWDG_IRQHdr
,
	gDeu_Hdr


268 .
wk
 
	gPVD_IRQHdr


269 .
thumb_t
 
	gPVD_IRQHdr
,
	gDeu_Hdr


271 .
wk
 
	gTAMP_STAMP_IRQHdr


272 .
thumb_t
 
	gTAMP_STAMP_IRQHdr
,
	gDeu_Hdr


274 .
wk
 
	gRTC_WKUP_IRQHdr


275 .
thumb_t
 
	gRTC_WKUP_IRQHdr
,
	gDeu_Hdr


277 .
wk
 
	gFLASH_IRQHdr


278 .
thumb_t
 
	gFLASH_IRQHdr
,
	gDeu_Hdr


280 .
wk
 
	gRCC_IRQHdr


281 .
thumb_t
 
	gRCC_IRQHdr
,
	gDeu_Hdr


283 .
wk
 
	gEXTI0_IRQHdr


284 .
thumb_t
 
	gEXTI0_IRQHdr
,
	gDeu_Hdr


286 .
wk
 
	gEXTI1_IRQHdr


287 .
thumb_t
 
	gEXTI1_IRQHdr
,
	gDeu_Hdr


289 .
wk
 
	gEXTI2_IRQHdr


290 .
thumb_t
 
	gEXTI2_IRQHdr
,
	gDeu_Hdr


292 .
wk
 
	gEXTI3_IRQHdr


293 .
thumb_t
 
	gEXTI3_IRQHdr
,
	gDeu_Hdr


295 .
wk
 
	gEXTI4_IRQHdr


296 .
thumb_t
 
	gEXTI4_IRQHdr
,
	gDeu_Hdr


298 .
wk
 
	gDMA1_Sm0_IRQHdr


299 .
thumb_t
 
	gDMA1_Sm0_IRQHdr
,
	gDeu_Hdr


301 .
wk
 
	gDMA1_Sm1_IRQHdr


302 .
thumb_t
 
	gDMA1_Sm1_IRQHdr
,
	gDeu_Hdr


304 .
wk
 
	gDMA1_Sm2_IRQHdr


305 .
thumb_t
 
	gDMA1_Sm2_IRQHdr
,
	gDeu_Hdr


307 .
wk
 
	gDMA1_Sm3_IRQHdr


308 .
thumb_t
 
	gDMA1_Sm3_IRQHdr
,
	gDeu_Hdr


310 .
wk
 
	gDMA1_Sm4_IRQHdr


311 .
thumb_t
 
	gDMA1_Sm4_IRQHdr
,
	gDeu_Hdr


313 .
wk
 
	gDMA1_Sm5_IRQHdr


314 .
thumb_t
 
	gDMA1_Sm5_IRQHdr
,
	gDeu_Hdr


316 .
wk
 
	gDMA1_Sm6_IRQHdr


317 .
thumb_t
 
	gDMA1_Sm6_IRQHdr
,
	gDeu_Hdr


319 .
wk
 
	gADC_IRQHdr


320 .
thumb_t
 
	gADC_IRQHdr
,
	gDeu_Hdr


322 .
wk
 
	gCAN1_TX_IRQHdr


323 .
thumb_t
 
	gCAN1_TX_IRQHdr
,
	gDeu_Hdr


325 .
wk
 
	gCAN1_RX0_IRQHdr


326 .
thumb_t
 
	gCAN1_RX0_IRQHdr
,
	gDeu_Hdr


328 .
wk
 
	gCAN1_RX1_IRQHdr


329 .
thumb_t
 
	gCAN1_RX1_IRQHdr
,
	gDeu_Hdr


331 .
wk
 
	gCAN1_SCE_IRQHdr


332 .
thumb_t
 
	gCAN1_SCE_IRQHdr
,
	gDeu_Hdr


334 .
wk
 
	gEXTI9_5_IRQHdr


335 .
thumb_t
 
	gEXTI9_5_IRQHdr
,
	gDeu_Hdr


337 .
wk
 
	gTIM1_BRK_TIM9_IRQHdr


338 .
thumb_t
 
	gTIM1_BRK_TIM9_IRQHdr
,
	gDeu_Hdr


340 .
wk
 
	gTIM1_UP_TIM10_IRQHdr


341 .
thumb_t
 
	gTIM1_UP_TIM10_IRQHdr
,
	gDeu_Hdr


343 .
wk
 
	gTIM1_TRG_COM_TIM11_IRQHdr


344 .
thumb_t
 
	gTIM1_TRG_COM_TIM11_IRQHdr
,
	gDeu_Hdr


346 .
wk
 
	gTIM1_CC_IRQHdr


347 .
thumb_t
 
	gTIM1_CC_IRQHdr
,
	gDeu_Hdr


349 .
wk
 
	gTIM2_IRQHdr


350 .
thumb_t
 
	gTIM2_IRQHdr
,
	gDeu_Hdr


352 .
wk
 
	gTIM3_IRQHdr


353 .
thumb_t
 
	gTIM3_IRQHdr
,
	gDeu_Hdr


355 .
wk
 
	gTIM4_IRQHdr


356 .
thumb_t
 
	gTIM4_IRQHdr
,
	gDeu_Hdr


358 .
wk
 
	gI2C1_EV_IRQHdr


359 .
thumb_t
 
	gI2C1_EV_IRQHdr
,
	gDeu_Hdr


361 .
wk
 
	gI2C1_ER_IRQHdr


362 .
thumb_t
 
	gI2C1_ER_IRQHdr
,
	gDeu_Hdr


364 .
wk
 
	gI2C2_EV_IRQHdr


365 .
thumb_t
 
	gI2C2_EV_IRQHdr
,
	gDeu_Hdr


367 .
wk
 
	gI2C2_ER_IRQHdr


368 .
thumb_t
 
	gI2C2_ER_IRQHdr
,
	gDeu_Hdr


370 .
wk
 
	gSPI1_IRQHdr


371 .
thumb_t
 
	gSPI1_IRQHdr
,
	gDeu_Hdr


373 .
wk
 
	gSPI2_IRQHdr


374 .
thumb_t
 
	gSPI2_IRQHdr
,
	gDeu_Hdr


376 .
wk
 
	gUSART1_IRQHdr


377 .
thumb_t
 
	gUSART1_IRQHdr
,
	gDeu_Hdr


379 .
wk
 
	gUSART2_IRQHdr


380 .
thumb_t
 
	gUSART2_IRQHdr
,
	gDeu_Hdr


382 .
wk
 
	gUSART3_IRQHdr


383 .
thumb_t
 
	gUSART3_IRQHdr
,
	gDeu_Hdr


385 .
wk
 
	gEXTI15_10_IRQHdr


386 .
thumb_t
 
	gEXTI15_10_IRQHdr
,
	gDeu_Hdr


388 .
wk
 
	gRTC_Arm_IRQHdr


389 .
thumb_t
 
	gRTC_Arm_IRQHdr
,
	gDeu_Hdr


391 .
wk
 
	gOTG_FS_WKUP_IRQHdr


392 .
thumb_t
 
	gOTG_FS_WKUP_IRQHdr
,
	gDeu_Hdr


394 .
wk
 
	gTIM8_BRK_TIM12_IRQHdr


395 .
thumb_t
 
	gTIM8_BRK_TIM12_IRQHdr
,
	gDeu_Hdr


397 .
wk
 
	gTIM8_UP_TIM13_IRQHdr


398 .
thumb_t
 
	gTIM8_UP_TIM13_IRQHdr
,
	gDeu_Hdr


400 .
wk
 
	gTIM8_TRG_COM_TIM14_IRQHdr


401 .
thumb_t
 
	gTIM8_TRG_COM_TIM14_IRQHdr
,
	gDeu_Hdr


403 .
wk
 
	gTIM8_CC_IRQHdr


404 .
thumb_t
 
	gTIM8_CC_IRQHdr
,
	gDeu_Hdr


406 .
wk
 
	gDMA1_Sm7_IRQHdr


407 .
thumb_t
 
	gDMA1_Sm7_IRQHdr
,
	gDeu_Hdr


409 .
wk
 
	gFSMC_IRQHdr


410 .
thumb_t
 
	gFSMC_IRQHdr
,
	gDeu_Hdr


412 .
wk
 
	gSDIO_IRQHdr


413 .
thumb_t
 
	gSDIO_IRQHdr
,
	gDeu_Hdr


415 .
wk
 
	gTIM5_IRQHdr


416 .
thumb_t
 
	gTIM5_IRQHdr
,
	gDeu_Hdr


418 .
wk
 
	gSPI3_IRQHdr


419 .
thumb_t
 
	gSPI3_IRQHdr
,
	gDeu_Hdr


421 .
wk
 
	gUART4_IRQHdr


422 .
thumb_t
 
	gUART4_IRQHdr
,
	gDeu_Hdr


424 .
wk
 
	gUART5_IRQHdr


425 .
thumb_t
 
	gUART5_IRQHdr
,
	gDeu_Hdr


427 .
wk
 
	gTIM6_DAC_IRQHdr


428 .
thumb_t
 
	gTIM6_DAC_IRQHdr
,
	gDeu_Hdr


430 .
wk
 
	gTIM7_IRQHdr


431 .
thumb_t
 
	gTIM7_IRQHdr
,
	gDeu_Hdr


433 .
wk
 
	gDMA2_Sm0_IRQHdr


434 .
thumb_t
 
	gDMA2_Sm0_IRQHdr
,
	gDeu_Hdr


436 .
wk
 
	gDMA2_Sm1_IRQHdr


437 .
thumb_t
 
	gDMA2_Sm1_IRQHdr
,
	gDeu_Hdr


439 .
wk
 
	gDMA2_Sm2_IRQHdr


440 .
thumb_t
 
	gDMA2_Sm2_IRQHdr
,
	gDeu_Hdr


442 .
wk
 
	gDMA2_Sm3_IRQHdr


443 .
thumb_t
 
	gDMA2_Sm3_IRQHdr
,
	gDeu_Hdr


445 .
wk
 
	gDMA2_Sm4_IRQHdr


446 .
thumb_t
 
	gDMA2_Sm4_IRQHdr
,
	gDeu_Hdr


448 .
wk
 
	gETH_IRQHdr


449 .
thumb_t
 
	gETH_IRQHdr
,
	gDeu_Hdr


451 .
wk
 
	gETH_WKUP_IRQHdr


452 .
thumb_t
 
	gETH_WKUP_IRQHdr
,
	gDeu_Hdr


454 .
wk
 
	gCAN2_TX_IRQHdr


455 .
thumb_t
 
	gCAN2_TX_IRQHdr
,
	gDeu_Hdr


457 .
wk
 
	gCAN2_RX0_IRQHdr


458 .
thumb_t
 
	gCAN2_RX0_IRQHdr
,
	gDeu_Hdr


460 .
wk
 
	gCAN2_RX1_IRQHdr


461 .
thumb_t
 
	gCAN2_RX1_IRQHdr
,
	gDeu_Hdr


463 .
wk
 
	gCAN2_SCE_IRQHdr


464 .
thumb_t
 
	gCAN2_SCE_IRQHdr
,
	gDeu_Hdr


466 .
wk
 
	gOTG_FS_IRQHdr


467 .
thumb_t
 
	gOTG_FS_IRQHdr
,
	gDeu_Hdr


469 .
wk
 
	gDMA2_Sm5_IRQHdr


470 .
thumb_t
 
	gDMA2_Sm5_IRQHdr
,
	gDeu_Hdr


472 .
wk
 
	gDMA2_Sm6_IRQHdr


473 .
thumb_t
 
	gDMA2_Sm6_IRQHdr
,
	gDeu_Hdr


475 .
wk
 
	gDMA2_Sm7_IRQHdr


476 .
thumb_t
 
	gDMA2_Sm7_IRQHdr
,
	gDeu_Hdr


478 .
wk
 
	gUSART6_IRQHdr


479 .
thumb_t
 
	gUSART6_IRQHdr
,
	gDeu_Hdr


481 .
wk
 
	gI2C3_EV_IRQHdr


482 .
thumb_t
 
	gI2C3_EV_IRQHdr
,
	gDeu_Hdr


484 .
wk
 
	gI2C3_ER_IRQHdr


485 .
thumb_t
 
	gI2C3_ER_IRQHdr
,
	gDeu_Hdr


487 .
wk
 
	gOTG_HS_EP1_OUT_IRQHdr


488 .
thumb_t
 
	gOTG_HS_EP1_OUT_IRQHdr
,
	gDeu_Hdr


490 .
wk
 
	gOTG_HS_EP1_IN_IRQHdr


491 .
thumb_t
 
	gOTG_HS_EP1_IN_IRQHdr
,
	gDeu_Hdr


493 .
wk
 
	gOTG_HS_WKUP_IRQHdr


494 .
thumb_t
 
	gOTG_HS_WKUP_IRQHdr
,
	gDeu_Hdr


496 .
wk
 
	gOTG_HS_IRQHdr


497 .
thumb_t
 
	gOTG_HS_IRQHdr
,
	gDeu_Hdr


499 .
wk
 
	gDCMI_IRQHdr


500 .
thumb_t
 
	gDCMI_IRQHdr
,
	gDeu_Hdr


502 .
wk
 
	gHASH_RNG_IRQHdr


503 .
thumb_t
 
	gHASH_RNG_IRQHdr
,
	gDeu_Hdr


505 .
wk
 
	gFPU_IRQHdr


506 .
thumb_t
 
	gFPU_IRQHdr
,
	gDeu_Hdr


	@
1
.
0
29
503
Inc/dwt_stm32_delay.h
Inc/main.h
Inc/stm32f4xx_hal_conf.h
Inc/stm32f4xx_it.h
Inc/vfdn_acsv.h
Inc/vfdn_adc.h
Inc/vfdn_com.h
Inc/vfdn_io_cntl.h
Inc/vfdn_roe.h
Inc/vfdn_rtc.h
Inc/vfdn_servo.h
Inc/vfdn_spi.h
Inc/vfdn_sub.h
Src/dwt_stm32_delay.c
Src/main.c
Src/stm32f4xx_hal_msp.c
Src/stm32f4xx_it.c
Src/syscalls.c
Src/sysmem.c
Src/system_stm32f4xx.c
Src/vfdn_acsv.c
Src/vfdn_adc.c
Src/vfdn_com.c
Src/vfdn_io_cntl.c
Src/vfdn_roe.c
Src/vfdn_rtc.c
Src/vfdn_spi.c
Src/vfdn_sub.c
Startup/startup_stm32f407vetx.s
